PLOVR_MODULE_INFO={"sign":["app_core"],"app":["app_core","sign"],"app_core":[],"rich_text_editor":["app"]};
PLOVR_MODULE_URIS={"sign":"http://static.zhihu.com/static/compiled/sign.js","app":"http://static.zhihu.com/static/compiled/app.js","app_core":"http://static.zhihu.com/static/compiled/app_core.js","rich_text_editor":"http://static.zhihu.com/static/compiled/rich_text_editor.js"};
PLOVR_MODULE_USE_DEBUG_MODE=false;
zhihu={};(function(a){with(a){
a.f=function(b){throw b;},a.i=void 0,a.j=!0,a.k=null,a.m=!1,a.aa=function(){return function(b){return b}},a.ba=function(){return function(){}},a.ca=function(b){return function(c){this[b]=c}},a.p=function(b){return function(){return this[b]}},a.s=function(b){return function(){return b}},a.t=void 0,a.da=[],a.u=function(b){return function(){return da[b].apply(this,arguments)}},a.ea=a.ea||{},a.fa=this,a.ga=function(b){for(var b=b.split("."),c=fa,d;d=b.shift();)if(c[d]!=k)c=c[d];else return k;return c},
a.ha=function(){},a.ia=function(b){b.P=function(){return b.sj?b.sj:b.sj=new b}},a.ka=function(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&
"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==c&&"undefined"==typeof b.call)return"object";return c},a.la=function(b){return b!==i},a.ma=function(b){return"array"==ka(b)},a.na=function(b){var c=ka(b);return"array"==c||"object"==c&&"number"==typeof b.length},a.oa=function(b){return"string"==typeof b},a.pa=function(b){return"number"==typeof b},a.qa=function(b){return"function"==ka(b)},a.ra=function(b){var c=typeof b;
return"object"==c&&b!=k||"function"==c},a.ua=function(b){return b[sa]||(b[sa]=++ta)},a.sa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),a.ta=0,a.va=function(b,c,d){return b.call.apply(b.bind,arguments)},a.wa=function(b,c,d){b||f(Error());if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}},a.v=function(b,
c,d){v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa;return v.apply(k,arguments)},a.xa=function(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,d);return b.apply(this,c)}},a.ya=function(b,c){for(var d in c)b[d]=c[d]},a.za=Date.now||function(){return+new Date},a.Ba=function(b){if(fa.execScript)fa.execScript(b,"JavaScript");else if(fa.eval)if(Aa==k&&(fa.eval("var _et_ = 1;"),
"undefined"!=typeof fa._et_?(delete fa._et_,Aa=j):Aa=m),Aa)fa.eval(b);else{var c=fa.document,d=c.createElement("script");d.type="text/javascript";d.defer=m;d.appendChild(c.createTextNode(b));c.body.appendChild(d);c.body.removeChild(d)}else f(Error("goog.globalEval not available"))},a.Aa=k,a.x=function(b,c){var d=c||{},e;for(e in d)var g=(""+d[e]).replace(/\$/g,"$$$$"),b=b.replace(RegExp("\\{\\$"+e+"\\}","gi"),g);return b},a.Ca=function(b,c){var d=b.split("."),e=fa;!(d[0]in e)&&e.execScript&&e.execScript("var "+
d[0]);for(var g;d.length&&(g=d.shift());)!d.length&&la(c)?e[g]=c:e=e[g]?e[g]:e[g]={}},a.y=function(b,c){function d(){}d.prototype=c.prototype;b.n=c.prototype;b.prototype=new d;b.prototype.constructor=b};a.Da=function(b){Error.captureStackTrace?Error.captureStackTrace(this,Da):this.stack=Error().stack||"";b&&(this.message=String(b))};y(Da,Error);Da.prototype.name="CustomError";a.Ea=function(b,c){return 0==b.lastIndexOf(c,0)},a.Fa=function(b,c){var d=b.length-c.length;return 0<=d&&b.indexOf(c,d)==d},a.Ga=function(b,c){for(var d=1;d<arguments.length;d++)var e=String(arguments[d]).replace(/\$/g,"$$$$"),b=b.replace(/\%s/,e);return b},a.Ha=function(b){return/^[\s\xa0]*$/.test(b)},a.Ia=function(b){return b.replace(/(\r\n|\r|\n)+/g," ")},a.Ja=function(b){return b.replace(/(\r\n|\r|\n)/g,"\n")},a.Ka=function(b){return b.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,
"")},a.La=function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},a.Ma=function(b){return b.replace(/[\s\xa0]+$/,"")},a.Oa=function(b){return b.replace(/(\r\n|\r|\n)/g,"<br>")},a.Va=function(b){if(!Pa.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(Qa,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(Sa,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(Ta,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(Ua,"&quot;"));return b},a.Qa=/&/g,a.Sa=/</g,a.Ta=/>/g,a.Ua=/\"/g,a.Pa=/[&<>\"]/,a.Za=function(b){if(Xa(b,"&"))if("document"in
fa)var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d=document.createElement("div"),b=b.replace(Ya,function(b,g){var h=c[b];if(h)return h;if("#"==g.charAt(0)){var l=Number("0"+g.substr(1));isNaN(l)||(h=String.fromCharCode(l))}h||(d.innerHTML=b+" ",h=d.firstChild.nodeValue.slice(0,-1));return c[b]=h});else b=b.replace(/&([^;]+);/g,function(b,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if("#"==c.charAt(0)){var d=Number("0"+c.substr(1));
if(!isNaN(d))return String.fromCharCode(d)}return b}});return b},a.Ya=/&([^;\s<&]+);?/g,a.Xa=function(b,c){return-1!=b.indexOf(c)},a.$a=function(b){return String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},a.ab=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^za()).toString(36)},a.bb=function(b,c){for(var d=0,e=La(String(b)).split("."),g=La(String(c)).split("."),h=Math.max(e.length,g.length),l=0;0==d&&
l<h;l++){var n=e[l]||"",q=g[l]||"",r=RegExp("(\\d*)(\\D*)","g"),w=RegExp("(\\d*)(\\D*)","g");do{var C=r.exec(n)||["","",""],I=w.exec(q)||["","",""];if(0==C[0].length&&0==I[0].length)break;d=((0==C[1].length?0:parseInt(C[1],10))<(0==I[1].length?0:parseInt(I[1],10))?-1:(0==C[1].length?0:parseInt(C[1],10))>(0==I[1].length?0:parseInt(I[1],10))?1:0)||((0==C[2].length)<(0==I[2].length)?-1:(0==C[2].length)>(0==I[2].length)?1:0)||(C[2]<I[2]?-1:C[2]>I[2]?1:0)}while(0==d)}return d},a.cb=2147483648*Math.random()|
0,a.db=function(){return"goog_"+cb++},a.eb=function(b){return String(b).replace(/\-([a-z])/g,function(b,d){return d.toUpperCase()})};a.z={Le:function(b){return b[b.length-1]}};z.ub=Array.prototype;z.indexOf=z.ub.indexOf?function(b,c,d){return z.ub.indexOf.call(b,c,d)}:function(b,c,d){d=d==k?0:0>d?Math.max(0,b.length+d):d;if(oa(b))return!oa(c)||1!=c.length?-1:b.indexOf(c,d);for(;d<b.length;d++)if(d in b&&b[d]===c)return d;return-1};
z.lastIndexOf=z.ub.lastIndexOf?function(b,c,d){return z.ub.lastIndexOf.call(b,c,d==k?b.length-1:d)}:function(b,c,d){d=d==k?b.length-1:d;0>d&&(d=Math.max(0,b.length+d));if(oa(b))return!oa(c)||1!=c.length?-1:b.lastIndexOf(c,d);for(;0<=d;d--)if(d in b&&b[d]===c)return d;return-1};z.forEach=z.ub.forEach?function(b,c,d){z.ub.forEach.call(b,c,d)}:function(b,c,d){for(var e=b.length,g=oa(b)?b.split(""):b,h=0;h<e;h++)h in g&&c.call(d,g[h],h,b)};
z.tM=function(b,c){for(var d=oa(b)?b.split(""):b,e=b.length-1;0<=e;--e)e in d&&c.call(i,d[e],e,b)};z.filter=z.ub.filter?function(b,c,d){return z.ub.filter.call(b,c,d)}:function(b,c,d){for(var e=b.length,g=[],h=0,l=oa(b)?b.split(""):b,n=0;n<e;n++)if(n in l){var q=l[n];c.call(d,q,n,b)&&(g[h++]=q)}return g};z.map=z.ub.map?function(b,c,d){return z.ub.map.call(b,c,d)}:function(b,c,d){for(var e=b.length,g=Array(e),h=oa(b)?b.split(""):b,l=0;l<e;l++)l in h&&(g[l]=c.call(d,h[l],l,b));return g};
z.reduce=function(b,c,d,e){if(b.reduce)return e?b.reduce(v(c,e),d):b.reduce(c,d);var g=d;z.forEach(b,function(d,l){g=c.call(e,g,d,l,b)});return g};z.reduceRight=function(b,c,d,e){if(b.reduceRight)return e?b.reduceRight(v(c,e),d):b.reduceRight(c,d);var g=d;z.tM(b,function(d,l){g=c.call(e,g,d,l,b)});return g};z.some=z.ub.some?function(b,c,d){return z.ub.some.call(b,c,d)}:function(b,c,d){for(var e=b.length,g=oa(b)?b.split(""):b,h=0;h<e;h++)if(h in g&&c.call(d,g[h],h,b))return j;return m};
z.every=z.ub.every?function(b,c,d){return z.ub.every.call(b,c,d)}:function(b,c,d){for(var e=b.length,g=oa(b)?b.split(""):b,h=0;h<e;h++)if(h in g&&!c.call(d,g[h],h,b))return m;return j};z.count=function(b,c,d){var e=0;z.forEach(b,function(b,h,l){c.call(d,b,h,l)&&++e},d);return e};z.find=function(b,c,d){c=z.Zv(b,c,d);return 0>c?k:oa(b)?b.charAt(c):b[c]};z.Zv=function(b,c,d){for(var e=b.length,g=oa(b)?b.split(""):b,h=0;h<e;h++)if(h in g&&c.call(d,g[h],h,b))return h;return-1};
z.YX=function(b,c,d){c=z.$v(b,c,d);return 0>c?k:oa(b)?b.charAt(c):b[c]};z.$v=function(b,c,d){for(var e=oa(b)?b.split(""):b,g=b.length-1;0<=g;g--)if(g in e&&c.call(d,e[g],g,b))return g;return-1};z.contains=function(b,c){return 0<=z.indexOf(b,c)};z.Ib=function(b){return 0==b.length};z.clear=function(b){if(!ma(b))for(var c=b.length-1;0<=c;c--)delete b[c];b.length=0};z.Xr=function(b,c){z.contains(b,c)||b.push(c)};z.Tn=function(b,c,d){z.splice(b,d,0,c)};
z.tY=function(b,c,d){xa(z.splice,b,d,0).apply(k,c)};z.insertBefore=function(b,c,d){var e;2==arguments.length||0>(e=z.indexOf(b,d))?b.push(c):z.Tn(b,c,e)};z.remove=function(b,c){var d=z.indexOf(b,c),e;(e=0<=d)&&z.lz(b,d);return e};z.lz=function(b,c){return 1==z.ub.splice.call(b,c,1).length};z.mS=function(b,c){var d=z.Zv(b,c,i);return 0<=d?(z.lz(b,d),j):m};z.concat=function(b){return z.ub.concat.apply(z.ub,arguments)};
z.toArray=function(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]};z.clone=z.toArray;z.extend=function(b,c){for(var d=1;d<arguments.length;d++){var e=arguments[d],g;if(ma(e)||(g=na(e))&&Object.prototype.hasOwnProperty.call(e,"callee"))b.push.apply(b,e);else if(g)for(var h=b.length,l=e.length,n=0;n<l;n++)b[h+n]=e[n];else b.push(e)}};z.splice=function(b,c,d,e){return z.ub.splice.apply(b,z.slice(arguments,1))};
z.slice=function(b,c,d){return 2>=arguments.length?z.ub.slice.call(b,c):z.ub.slice.call(b,c,d)};z.Mo=function(b,c){for(var d=c||b,e={},g=0,h=0;h<b.length;){var l=b[h++],n=ra(l)?"o"+ua(l):(typeof l).charAt(0)+l;Object.prototype.hasOwnProperty.call(e,n)||(e[n]=j,d[g++]=l)}d.length=g};z.UB=function(b,c,d){return z.VB(b,d||z.Oi,m,c)};z.rX=function(b,c,d){return z.VB(b,c,j,i,d)};
z.VB=function(b,c,d,e,g){for(var h=0,l=b.length,n;h<l;){var q=h+l>>1,r;r=d?c.call(g,b[q],q,b):c(e,b[q]);0<r?h=q+1:(l=q,n=!r)}return n?h:~h};z.sort=function(b,c){z.ub.sort.call(b,c||z.Oi)};z.tZ=function(b,c){for(var d=0;d<b.length;d++)b[d]={index:d,value:b[d]};var e=c||z.Oi;z.sort(b,function(b,c){return e(b.value,c.value)||b.index-c.index});for(d=0;d<b.length;d++)b[d]=b[d].value};z.rZ=function(b,c,d){var e=d||z.Oi;z.sort(b,function(b,d){return e(b[c],d[c])})};
z.AY=function(b,c,d){for(var c=c||z.Oi,e=1;e<b.length;e++){var g=c(b[e-1],b[e]);if(0<g||0==g&&d)return m}return j};z.equals=function(b,c,d){if(!na(b)||!na(c)||b.length!=c.length)return m;for(var e=b.length,d=d||z.GL,g=0;g<e;g++)if(!d(b[g],c[g]))return m;return j};z.FX=function(b,c,d){return z.equals(b,c,d)};z.GX=function(b,c,d){for(var d=d||z.Oi,e=Math.min(b.length,c.length),g=0;g<e;g++){var h=d(b[g],c[g]);if(0!=h)return h}return z.Oi(b.length,c.length)};z.Oi=function(b,c){return b>c?1:b<c?-1:0};
z.GL=function(b,c){return b===c};z.pX=function(b,c,d){d=z.UB(b,c,d);return 0>d?(z.Tn(b,c,-(d+1)),j):m};z.qX=function(b,c,d){c=z.UB(b,c,d);return 0<=c?z.lz(b,c):m};z.yX=function(b,c){for(var d={},e=0;e<b.length;e++){var g=b[e],h=c(g,e,b);la(h)&&(d[h]||(d[h]=[])).push(g)}return d};z.Ot=function(b,c,d){var e={};z.forEach(b,function(g,h){e[c.call(d,g,h,b)]=g});return e};z.repeat=function(b,c){for(var d=[],e=0;e<c;e++)d[e]=b;return d};
z.flatten=function(b){for(var c=[],d=0;d<arguments.length;d++){var e=arguments[d];ma(e)?c.push.apply(c,z.flatten.apply(k,e)):c.push(e)}return c};z.rotate=function(b,c){b.length&&(c%=b.length,0<c?z.ub.unshift.apply(b,b.splice(-c,c)):0>c&&z.ub.push.apply(b,b.splice(0,-c)));return b};z.HZ=function(b){if(!arguments.length)return[];for(var c=[],d=0;;d++){for(var e=[],g=0;g<arguments.length;g++){var h=arguments[g];if(d>=h.length)return c;e.push(h[d])}c.push(e)}};
z.pT=function(b){for(var c=Math.random,d=b.length-1;0<d;d--){var e=Math.floor(c()*(d+1)),g=b[d];b[d]=b[e];b[e]=g}};a.fb=void 0,a.gb=void 0,a.hb=void 0,a.ib=void 0,a.jb=void 0,a.kb=void 0,a.lb=void 0,a.mb=void 0,a.nb=function(){return fa.navigator?fa.navigator.userAgent:k},a.ob=function(){return fa.navigator};jb=ib=hb=gb=fb=m;a.pb=void 0;if(pb=nb()){var qb=ob();fb=0==pb.indexOf("Opera");gb=!fb&&-1!=pb.indexOf("MSIE");ib=(hb=!fb&&-1!=pb.indexOf("WebKit"))&&-1!=pb.indexOf("Mobile");jb=!fb&&!hb&&"Gecko"==qb.product}a.rb=fb,a.A=gb,a.B=jb,a.D=hb,a.sb=ib,a.tb=void 0,a.ub=ob();tb=ub&&ub.platform||"";kb=Xa(tb,"Mac");
lb=Xa(tb,"Win");mb=Xa(tb,"Linux");a.vb=!!ob()&&Xa(ob().appVersion||"","X11"),a.wb=function(){var b=fa.document;return b?b.documentMode:i},a.xb=void 0;a:{var yb="",zb;if(rb&&fa.opera)var Ab=fa.opera.version,yb="function"==typeof Ab?Ab():Ab;else if(B?zb=/rv\:([^\);]+)(\)|;)/:A?zb=/MSIE\s+([^\);]+)(\)|;)/:D&&(zb=/WebKit\/(\S+)/),zb)var Bb=zb.exec(nb()),yb=Bb?Bb[1]:"";if(A){var Cb=wb();if(Cb>parseFloat(yb)){xb=String(Cb);break a}}xb=yb}
a.Db={},a.Eb=function(b){return Db[b]||(Db[b]=0<=bb(xb,b))},a.Gb=function(b){return A&&Fb>=b},a.Hb=fa.document,a.Fb=!Hb||!A?i:wb()||("CSS1Compat"==Hb.compatMode?parseInt(xb,10):5);a.Ib=void 0,a.Jb=!A||Gb(9),a.Kb=!B&&!A||A&&Gb(9)||B&&Eb("1.9.1"),a.Lb=A&&!Eb("9");a.E={set:function(b,c){b.className=c},get:function(b){b=b.className;return oa(b)&&b.match(/\S+/g)||[]},add:function(b,c){var d=E.get(b),e=z.slice(arguments,1),g=d.length+e.length;E.uB(d,e);b.className=d.join(" ");return d.length==g},remove:function(b,c){var d=E.get(b),e=z.slice(arguments,1),g=E.ID(d,e);b.className=g.join(" ");return g.length==d.length-e.length},uB:function(b,c){for(var d=0;d<c.length;d++)z.contains(b,c[d])||b.push(c[d])},ID:function(b,c){return z.filter(b,function(b){return!z.contains(c,
b)})},VH:function(b,c,d){for(var e=E.get(b),g=m,h=0;h<e.length;h++)e[h]==c&&(z.splice(e,h--,1),g=j);g&&(e.push(d),b.className=e.join(" "));return g},Ek:function(b,c,d){var e=E.get(b);oa(c)?z.remove(e,c):ma(c)&&(e=E.ID(e,c));oa(d)&&!z.contains(e,d)?e.push(d):ma(d)&&E.uB(e,d);b.className=e.join(" ")},has:function(b,c){return z.contains(E.get(b),c)},enable:function(b,c,d){d?E.add(b,c):E.remove(b,c)},toggle:function(b,c){var d=!E.has(b,c);E.enable(b,c,d);return d}};a.Mb=function(b,c,d){return Math.min(Math.max(b,c),d)};a.Nb=function(b,c){this.x=la(b)?b:0;this.y=la(c)?c:0};Nb.prototype.clone=function(){return new Nb(this.x,this.y)};a.Ob=function(b,c){return new Nb(b.x-c.x,b.y-c.y)};a.Pb=function(b,c){this.width=b;this.height=c},a.Qb=function(b,c){return b==c?j:!b||!c?m:b.width==c.width&&b.height==c.height};t=Pb.prototype;t.clone=function(){return new Pb(this.width,this.height)};t.Ib=function(){return!(this.width*this.height)};t.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};t.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
t.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};a.F={forEach:function(b,c,d){for(var e in b)c.call(d,b[e],e,b)},filter:function(b,c,d){var e={},g;for(g in b)c.call(d,b[g],g,b)&&(e[g]=b[g]);return e},map:function(b,c,d){var e={},g;for(g in b)e[g]=c.call(d,b[g],g,b);return e},some:function(b,c,d){for(var e in b)if(c.call(d,b[e],e,b))return j;return m},every:function(b,c,d){for(var e in b)if(!c.call(d,b[e],e,b))return m;return j},Va:function(b){var c=0,d;for(d in b)c++;return c},fY:function(b){for(var c in b)return c},gY:function(b){for(var c in b)return b[c]},
contains:function(b,c){return F.vg(b,c)},La:function(b){var c=[],d=0,e;for(e in b)c[d++]=b[e];return c},Gb:function(b){var c=[],d=0,e;for(e in b)c[d++]=e;return c},lY:function(b,c){for(var d=na(c),e=d?c:arguments,d=d?0:1;d<e.length&&!(b=b[e[d]],!la(b));d++);return b},Ld:function(b,c){return c in b},vg:function(b,c){for(var d in b)if(b[d]==c)return j;return m},sD:function(b,c,d){for(var e in b)if(c.call(d,b[e],e,b))return e},lr:function(b,c,d){return(c=F.sD(b,c,d))&&b[c]},Ib:function(b){for(var c in b)return m;
return j},clear:function(b){for(var c in b)delete b[c]},remove:function(b,c){var d;(d=c in b)&&delete b[c];return d},add:function(b,c,d){c in b&&f(Error('The object already contains the key "'+c+'"'));F.set(b,c,d)},get:function(b,c,d){return c in b?b[c]:d},set:function(b,c,d){b[c]=d},pZ:function(b,c,d){return c in b?b[c]:b[c]=d},clone:function(b){var c={},d;for(d in b)c[d]=b[d];return c},pU:function(b){var c=ka(b);if("object"==c||"array"==c){if(b.clone)return b.clone();var c="array"==c?[]:{},d;for(d in b)c[d]=
F.pU(b[d]);return c}return b},xm:function(b){var c={},d;for(d in b)c[b[d]]=d;return c},gB:"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),extend:function(b,c){for(var d,e,g=1;g<arguments.length;g++){e=arguments[g];for(d in e)b[d]=e[d];for(var h=0;h<F.gB.length;h++)d=F.gB[h],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}},create:function(b){var c=arguments.length;if(1==c&&ma(arguments[0]))return F.create.apply(k,arguments[0]);c%2&&
f(Error("Uneven number of arguments"));for(var d={},e=0;e<c;e+=2)d[arguments[e]]=arguments[e+1];return d},Bh:function(b){var c=arguments.length;if(1==c&&ma(arguments[0]))return F.Bh.apply(k,arguments[0]);for(var d={},e=0;e<c;e++)d[arguments[e]]=j;return d},LX:function(b){var c=b;Object.isFrozen&&!Object.isFrozen(b)&&(c=Object.create(b),Object.freeze(c));return c},zY:function(b){return!!Object.isFrozen&&Object.isFrozen(b)}};a.Tb=function(b){return b?new Rb(Sb(b)):Ib||(Ib=new Rb)},a.H=function(b){return oa(b)?document.getElementById(b):b},a.Vb=function(b,c,d){return Ub(document,b,c,d)},a.Wb=function(b,c){var d=c||document;return d.querySelectorAll&&d.querySelector?d.querySelectorAll("."+b):d.getElementsByClassName?d.getElementsByClassName(b):Ub(document,"*",b,c)},a.J=function(b,c){var d=c||document,e=k;return(e=d.querySelectorAll&&d.querySelector?d.querySelector("."+b):Wb(b,c)[0])||k},a.Ub=function(b,c,d,e){b=e||b;c=
c&&"*"!=c?c.toUpperCase():"";if(b.querySelectorAll&&b.querySelector&&(c||d))return b.querySelectorAll(c+(d?"."+d:""));if(d&&b.getElementsByClassName){b=b.getElementsByClassName(d);if(c){for(var e={},g=0,h=0,l;l=b[h];h++)c==l.nodeName&&(e[g++]=l);e.length=g;return e}return b}b=b.getElementsByTagName(c||"*");if(d){e={};for(h=g=0;l=b[h];h++)c=l.className,"function"==typeof c.split&&z.contains(c.split(/\s+/),d)&&(e[g++]=l);e.length=g;return e}return b},a.Yb=function(b,c){F.forEach(c,function(c,e){"style"==
e?b.style.cssText=c:"class"==e?b.className=c:"for"==e?b.htmlFor=c:e in Xb?b.setAttribute(Xb[e],c):Ea(e,"aria-")||Ea(e,"data-")?b.setAttribute(e,c):b[e]=c})},a.Xb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},a.Zb=function(b){b=(b||window).document;b="CSS1Compat"==b.compatMode?b.documentElement:b.body;return new Pb(b.clientWidth,
b.clientHeight)},a.ac=function(b){var c=$b(b),b=b.parentWindow||b.defaultView;return new Nb(b.pageXOffset||c.scrollLeft,b.pageYOffset||c.scrollTop)},a.$b=function(b){return!D&&"CSS1Compat"==b.compatMode?b.documentElement:b.body},a.bc=function(b){return b?b.parentWindow||b.defaultView:window},a.K=function(b,c,d){return cc(document,arguments)},a.cc=function(b,c){var d=c[0],e=c[1];if(!Jb&&e&&(e.name||e.type)){d=["<",d];e.name&&d.push(' name="',Va(e.name),'"');if(e.type){d.push(' type="',Va(e.type),'"');
var g={};F.extend(g,e);delete g.type;e=g}d.push(">");d=d.join("")}d=b.createElement(d);e&&(oa(e)?d.className=e:ma(e)?E.add.apply(k,[d].concat(e)):Yb(d,e));2<c.length&&dc(b,d,c,2);return d},a.dc=function(b,c,d,e){function g(d){d&&c.appendChild(oa(d)?b.createTextNode(d):d)}for(;e<d.length;e++){var h=d[e];na(h)&&!(ra(h)&&0<h.nodeType)?z.forEach(ec(h)?z.toArray(h):h,g):g(h)}},a.gc=function(b){return fc(document,b)},a.fc=function(b,c){var d=b.createElement("div");A?(d.innerHTML="<br>"+c,d.removeChild(d.firstChild)):
d.innerHTML=c;if(1==d.childNodes.length)return d.removeChild(d.firstChild);for(var e=b.createDocumentFragment();d.firstChild;)e.appendChild(d.firstChild);return e},a.hc=function(b){if(1!=b.nodeType)return m;switch(b.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return m}return j},
a.ic=function(b,c){dc(Sb(b),b,arguments,1)},a.jc=function(b){for(var c;c=b.firstChild;)b.removeChild(c)},a.kc=function(b,c){c.parentNode&&c.parentNode.insertBefore(b,c)},a.lc=function(b,c){c.parentNode&&c.parentNode.insertBefore(b,c.nextSibling)},a.mc=function(b,c,d){b.insertBefore(c,b.childNodes[d]||k)},a.L=function(b){return b&&b.parentNode?b.parentNode.removeChild(b):k},a.nc=function(b,c){var d=c.parentNode;d&&d.replaceChild(b,c)},a.oc=function(b){var c,d=b.parentNode;if(d&&11!=d.nodeType){if(b.removeNode)return b.removeNode(m);
for(;c=b.firstChild;)d.insertBefore(c,b);return L(b)}},a.pc=function(b){return Kb&&b.children!=i?b.children:z.filter(b.childNodes,function(b){return 1==b.nodeType})},a.rc=function(b){return b.firstElementChild!=i?b.firstElementChild:qc(b.firstChild,j)},a.sc=function(b){return b.previousElementSibling!=i?b.previousElementSibling:qc(b.previousSibling,m)},a.qc=function(b,c){for(;b&&1!=b.nodeType;)b=c?b.nextSibling:b.previousSibling;return b},a.tc=function(b,c){if(b.contains&&1==c.nodeType)return b==
c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||Boolean(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b},a.wc=function(b,c){if(b==c)return 0;if(b.compareDocumentPosition)return b.compareDocumentPosition(c)&2?1:-1;if(A&&!Gb(9)){if(9==b.nodeType)return-1;if(9==c.nodeType)return 1}if("sourceIndex"in b||b.parentNode&&"sourceIndex"in b.parentNode){var d=1==b.nodeType,e=1==c.nodeType;if(d&&e)return b.sourceIndex-c.sourceIndex;var g=b.parentNode,h=
c.parentNode;return g==h?uc(b,c):!d&&tc(g,c)?-1*vc(b,c):!e&&tc(h,b)?vc(c,b):(d?b.sourceIndex:g.sourceIndex)-(e?c.sourceIndex:h.sourceIndex)}e=Sb(b);d=e.createRange();d.selectNode(b);d.collapse(j);e=e.createRange();e.selectNode(c);e.collapse(j);return d.compareBoundaryPoints(fa.Range.START_TO_END,e)},a.vc=function(b,c){var d=b.parentNode;if(d==c)return-1;for(var e=c;e.parentNode!=d;)e=e.parentNode;return uc(e,b)},a.uc=function(b,c){for(var d=c;d=d.previousSibling;)if(d==b)return-1;return 1},a.xc=function(b){var c,
d=arguments.length;if(d){if(1==d)return arguments[0]}else return k;var e=[],g=Infinity;for(c=0;c<d;c++){for(var h=[],l=arguments[c];l;)h.unshift(l),l=l.parentNode;e.push(h);g=Math.min(g,h.length)}h=k;for(c=0;c<g;c++){for(var l=e[0][c],n=1;n<d;n++)if(l!=e[n][c])return h;h=l}return h},a.Sb=function(b){return 9==b.nodeType?b:b.ownerDocument||b.document},a.yc=function(b,c){if("textContent"in b)b.textContent=c;else if(b.firstChild&&3==b.firstChild.nodeType){for(;b.lastChild!=b.firstChild;)b.removeChild(b.lastChild);
b.firstChild.data=c}else jc(b),b.appendChild(Sb(b).createTextNode(c))},a.Ac=function(b,c){var d=[];zc(b,c,d,m);return d},a.zc=function(b,c,d,e){if(b!=k)for(b=b.firstChild;b;){if(c(b)&&(d.push(b),e)||zc(b,c,d,e))return j;b=b.nextSibling}return m},a.Bc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},a.Cc={IMG:" ",BR:"\n"},a.Dc=function(b){var c=b.getAttributeNode("tabindex");return c&&c.specified?(b=b.tabIndex,pa(b)&&0<=b&&32768>b):m},a.Ec=function(b,c){c?b.tabIndex=0:(b.tabIndex=-1,b.removeAttribute("tabIndex"))},
a.Gc=function(b){if(Lb&&"innerText"in b)b=Ja(b.innerText);else{var c=[];Fc(b,c,j);b=c.join("")}b=b.replace(/ \xAD /g," ").replace(/\xAD/g,"");b=b.replace(/\u200B/g,"");Lb||(b=b.replace(/ +/g," "));" "!=b&&(b=b.replace(/^\s*/,""));return b},a.Hc=function(b){var c=[];Fc(b,c,m);return c.join("")},a.Fc=function(b,c,d){if(!(b.nodeName in Bc))if(3==b.nodeType)d?c.push(String(b.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(b.nodeValue);else if(b.nodeName in Cc)c.push(Cc[b.nodeName]);else for(b=b.firstChild;b;)Fc(b,
c,d),b=b.nextSibling},a.ec=function(b){if(b&&"number"==typeof b.length){if(ra(b))return"function"==typeof b.item||"string"==typeof b.item;if(qa(b))return"function"==typeof b.item}return m},a.Jc=function(b,c,d){if(!c&&!d)return k;var e=c?c.toUpperCase():k;return Ic(b,function(b){return(!e||b.nodeName==e)&&(!d||E.has(b,d))},j)},a.Ic=function(b,c,d,e){d||(b=b.parentNode);for(var d=e==k,g=0;b&&(d||g<=e);){if(c(b))return b;b=b.parentNode;g++}return k},a.Kc=function(b){try{return b&&b.activeElement}catch(c){}return k},
a.Rb=function(b){this.Ha=b||fa.document||document};t=Rb.prototype;t.L=Tb;t.Da=p("Ha");t.m=function(b){return oa(b)?this.Ha.getElementById(b):b};t.bu=Rb.prototype.m;t.aj=function(b,c){return J(b,c||this.Ha)};t.w=function(b,c,d){return cc(this.Ha,arguments)};t.createElement=function(b){return this.Ha.createElement(b)};t.createTextNode=function(b){return this.Ha.createTextNode(b)};t.lv=u(21);a.Lc=function(b){return"CSS1Compat"==b.Ha.compatMode};t.Sa=function(){return this.Ha.parentWindow||this.Ha.defaultView};
a.Mc=function(b){return ac(b.Ha)};t.or=function(b){return Kc(b||this.Ha)};t.appendChild=function(b,c){b.appendChild(c)};t.append=ic;t.bt=jc;t.Un=kc;t.xx=lc;t.removeNode=L;t.mM=oc;t.GD=pc;t.JD=rc;t.contains=tc;t.BM=Jc;a.Nc=function(b,c){b.setAttribute("role",c)},a.Oc=function(b,c,d){b.setAttribute("aria-"+c,d)},a.Pc=function(b,c){var d=b.getAttribute("aria-"+c);return d===j||d===m?d?"true":"false":d?String(d):""};a.M=function(){0!=Qc&&(this.MX=Error().stack,Rc[ua(this)]=this)},a.Qc=0,a.Rc={};M.prototype.Ag=m;M.prototype.H=function(){if(!this.Ag&&(this.Ag=j,this.z(),0!=Qc)){var b=ua(this);delete Rc[b]}};a.Sc=function(b,c){b.Tq||(b.Tq=[]);b.Tq.push(c)};M.prototype.z=function(){this.Tq&&Tc.apply(k,this.Tq);if(this.zo)for(;this.zo.length;)this.zo.shift()()};a.Uc=function(b){b&&"function"==typeof b.H&&b.H()},a.Tc=function(b){for(var c=0,d=arguments.length;c<d;++c){var e=arguments[c];na(e)?Tc.apply(k,e):Uc(e)}};a.Vc={Dm:"activedescendant",UU:"atomic",UI:"autocomplete",bV:"busy",Tp:"checked",iV:"controls",mV:"describedby",$I:"disabled",pV:"dropeffect",aB:"expanded",sV:"flowto",zV:"grabbed",Ak:"haspopup",FV:"hidden",MV:"invalid",Wp:"label",ju:"labelledby",SV:"level",VV:"live",dW:"multiline",eW:"multiselectable",lW:"orientation",nW:"owns",pW:"posinset",iJ:"pressed",vW:"readonly",yW:"relevant",zW:"required",lJ:"selected",LW:"setsize",NW:"sort",yJ:"valuemax",zJ:"valuemin",AJ:"valuenow",jX:"valuetext"},a.Wc={QU:"alert",
RU:"alertdialog",SU:"application",TU:"article",WU:"banner",Sp:"button",XI:"checkbox",eV:"columnheader",YI:"combobox",gV:"complementary",ZI:"dialog",nV:"directory",oV:"document",xV:"form",BV:"grid",CV:"gridcell",DV:"group",EV:"heading",KV:"img",cJ:"link",TV:"list",bB:"listbox",UV:"listitem",XV:"log",dJ:"main",YV:"marquee",ZV:"math",eJ:"menu",bW:"menubar",fJ:"menuitem",gJ:"menuitemcheckbox",hJ:"menuitemradio",fW:"navigation",hW:"note",eB:"option",qW:"presentation",rW:"progressbar",tW:"radio",uW:"radiogroup",
xW:"region",BW:"row",DW:"rowgroup",EW:"rowheader",HW:"scrollbar",IW:"search",nJ:"separator",qJ:"slider",OW:"spinbutton",QW:"status",jB:"tab",sJ:"tablist",UW:"tabpanel",VW:"textbox",WW:"timer",uJ:"toolbar",YW:"tooltip",ZW:"tree",$W:"treegrid",aX:"treeitem"};a.Xc=function(b){b=String(b);if(/^\s*$/.test(b)?0:/^[\],:{}\s\u2028\u2029]*$/.test(b.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+b+")")}catch(c){}f(Error("Invalid JSON string: "+b))},a.Yc=function(b){return eval("("+b+")")},a.$c=function(b,c){return(new Zc(c)).serialize(b)},a.Zc=function(b){this.ft=b};
Zc.prototype.serialize=function(b){var c=[];ad(this,b,c);return c.join("")};
a.ad=function(b,c,d){switch(typeof c){case "string":bd(c,d);break;case "number":d.push(isFinite(c)&&!isNaN(c)?c:"null");break;case "boolean":d.push(c);break;case "undefined":d.push("null");break;case "object":if(c==k){d.push("null");break}if(ma(c)){b.serializeArray(c,d);break}d.push("{");var e="",g;for(g in c)if(Object.prototype.hasOwnProperty.call(c,g)){var h=c[g];"function"!=typeof h&&(d.push(e),bd(g,d),d.push(":"),ad(b,b.ft?b.ft.call(c,g,h):h,d),e=",")}d.push("}");break;case "function":break;default:f(Error("Unknown type: "+
typeof c))}},a.cd={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},a.dd=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,a.bd=function(b,c){c.push('"',b.replace(dd,function(b){if(b in cd)return cd[b];var c=b.charCodeAt(0),g="\\u";16>c?g+="000":256>c?g+="00":4096>c&&(g+="0");return cd[b]=g+c.toString(16)}),'"')};
Zc.prototype.serializeArray=function(b,c){var d=b.length;c.push("[");for(var e="",g=0;g<d;g++)c.push(e),e=b[g],ad(this,this.ft?this.ft.call(b,String(g),e):e,c),e=",";c.push("]")};a.ed=!A||Gb(9),a.fd=!A||Gb(9),a.gd=A&&!Eb("9");!D||Eb("528");B&&Eb("1.9b")||A&&Eb("8")||rb&&Eb("9.5")||D&&Eb("528");B&&!Eb("8")||A&&Eb("9");a.hd=function(b,c){this.type=b;this.currentTarget=this.target=c};t=hd.prototype;t.z=ba();t.H=ba();t.Rj=m;t.defaultPrevented=m;t.it=j;t.stopPropagation=function(){this.Rj=j};t.preventDefault=function(){this.defaultPrevented=j;this.it=m};a.id=function(b){b.preventDefault()};a.jd=A?"focusin":"DOMFocusIn";a.kd=function(b){kd[" "](b);return b};kd[" "]=ha;a.ld=function(b,c){b&&this.B(b,c)};y(ld,hd);a.md=[1,4,2];t=ld.prototype;t.target=k;t.relatedTarget=k;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=m;t.altKey=m;t.shiftKey=m;t.metaKey=m;t.Vy=m;t.Yb=k;
t.B=function(b,c){var d=this.type=b.type;hd.call(this,d);this.target=b.target||b.srcElement;this.currentTarget=c;var e=b.relatedTarget;if(e){if(B){var g;a:{try{kd(e.nodeName);g=j;break a}catch(h){}g=m}g||(e=k)}}else"mouseover"==d?e=b.fromElement:"mouseout"==d&&(e=b.toElement);this.relatedTarget=e;this.offsetX=D||b.offsetX!==i?b.offsetX:b.layerX;this.offsetY=D||b.offsetY!==i?b.offsetY:b.layerY;this.clientX=b.clientX!==i?b.clientX:b.pageX;this.clientY=b.clientY!==i?b.clientY:b.pageY;this.screenX=b.screenX||
0;this.screenY=b.screenY||0;this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==d?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.Vy=kb?b.metaKey:b.ctrlKey;this.state=b.state;this.Yb=b;b.defaultPrevented&&this.preventDefault();delete this.Rj};a.nd=function(b,c){return ed?b.Yb.button==c:"click"==b.type?0==c:!!(b.Yb.button&md[c])},a.od=function(b){return nd(b,0)&&!(D&&kb&&b.ctrlKey)};
t.stopPropagation=function(){ld.n.stopPropagation.call(this);this.Yb.stopPropagation?this.Yb.stopPropagation():this.Yb.cancelBubble=j};t.preventDefault=function(){ld.n.preventDefault.call(this);var b=this.Yb;if(b.preventDefault)b.preventDefault();else if(b.returnValue=m,gd)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(c){}};t.ED=p("Yb");t.z=ba();a.pd=function(){},a.qd=0;t=pd.prototype;t.key=0;t.Uj=m;t.wq=m;t.B=function(b,c,d,e,g,h){qa(b)?this.WE=j:b&&b.handleEvent&&qa(b.handleEvent)?this.WE=m:f(Error("Invalid listener argument"));this.Uf=b;this.proxy=c;this.src=d;this.type=e;this.capture=!!g;this.Qh=h;this.wq=m;this.key=++qd;this.Uj=m};t.handleEvent=function(b){return this.WE?this.Uf.call(this.Qh||this.src,b):this.Uf.handleEvent.call(this.Uf,b)};a.rd={},a.sd={},a.td={},a.ud={},a.N=function(b,c,d,e,g){if(ma(c)){for(var h=0;h<c.length;h++)N(b,c[h],d,e,g);return k}return vd(b,c,d,m,e,g)},a.vd=function(b,c,d,e,g,h){c||f(Error("Invalid event type"));var g=!!g,l=sd;c in l||(l[c]={ga:0,Oe:0});l=l[c];g in l||(l[g]={ga:0,Oe:0},l.ga++);var l=l[g],n=ua(b),q;l.Oe++;if(l[n]){q=l[n];for(var r=0;r<q.length;r++)if(l=q[r],l.Uf==d&&l.Qh==h){if(l.Uj)break;e||(q[r].wq=m);return q[r].key}}else q=l[n]=[],l.ga++;var w=wd,C=fd?function(b){return w.call(C.src,C.key,
b)}:function(b){b=w.call(C.src,C.key,b);if(!b)return b},r=C;r.src=b;l=new pd;l.B(d,r,b,c,g,h);l.wq=e;d=l.key;r.key=d;q.push(l);rd[d]=l;td[n]||(td[n]=[]);td[n].push(l);b.addEventListener?(b==fa||!b.LC)&&b.addEventListener(c,r,g):b.attachEvent(c in ud?ud[c]:ud[c]="on"+c,r);return d},a.xd=function(b,c,d,e,g){if(ma(c)){for(var h=0;h<c.length;h++)xd(b,c[h],d,e,g);return k}return vd(b,c,d,j,e,g)},a.yd=function(b,c,d,e,g){if(ma(c))for(var h=0;h<c.length;h++)yd(b,c[h],d,e,g);else if(e=!!e,b=zd(b,c,e))for(h=
0;h<b.length;h++)if(b[h].Uf==d&&b[h].capture==e&&b[h].Qh==g){Ad(b[h].key);break}},a.Ad=function(b){if(!rd[b])return m;var c=rd[b];if(c.Uj)return m;var d=c.src,e=c.type,g=c.proxy,h=c.capture;d.removeEventListener?(d==fa||!d.LC)&&d.removeEventListener(e,g,h):d.detachEvent&&d.detachEvent(e in ud?ud[e]:ud[e]="on"+e,g);d=ua(d);td[d]&&(g=td[d],z.remove(g,c),0==g.length&&delete td[d]);c.Uj=j;if(c=sd[e][h][d])c.UF=j,Bd(e,h,d,c);delete rd[b];return j},a.Bd=function(b,c,d,e){if(!e.vs&&e.UF){for(var g=0,h=0;g<
e.length;g++)e[g].Uj?e[g].proxy.src=k:(g!=h&&(e[h]=e[g]),h++);e.length=h;e.UF=m;0==h&&(delete sd[b][c][d],sd[b][c].ga--,0==sd[b][c].ga&&(delete sd[b][c],sd[b].ga--),0==sd[b].ga&&delete sd[b])}},a.Cd=function(b){var c,d=0,e=c==k;c=!!c;if(b==k)F.forEach(td,function(b){for(var g=b.length-1;0<=g;g--){var h=b[g];if(e||c==h.capture)Ad(h.key),d++}});else if(b=ua(b),td[b])for(var b=td[b],g=b.length-1;0<=g;g--){var h=b[g];if(e||c==h.capture)Ad(h.key),d++}},a.zd=function(b,c,d){var e=sd;return c in e&&(e=e[c],
d in e&&(e=e[d],b=ua(b),e[b]))?e[b]:k},a.Ed=function(b,c,d,e,g){var h=1,c=ua(c);if(b[c]){b.Oe--;b=b[c];b.vs?b.vs++:b.vs=1;try{for(var l=b.length,n=0;n<l;n++){var q=b[n];q&&!q.Uj&&(h&=Dd(q,g)!==m)}}finally{b.vs--,Bd(d,e,c,b)}}return Boolean(h)},a.Dd=function(b,c){b.wq&&Ad(b.key);return b.handleEvent(c)},a.wd=function(b,c){if(!rd[b])return j;var d=rd[b],e=d.type,g=sd;if(!(e in g))return j;var g=g[e],h,l;if(!fd){h=c||ga("window.event");var n=j in g,q=m in g;if(n){if(0>h.keyCode||h.returnValue!=i)return j;
a:{var r=m;if(0==h.keyCode)try{h.keyCode=-1;break a}catch(w){r=j}if(r||h.returnValue==i)h.returnValue=j}}r=new ld;r.B(h,this);h=j;try{if(n){for(var C=[],I=r.currentTarget;I;I=I.parentNode)C.push(I);l=g[j];l.Oe=l.ga;for(var G=C.length-1;!r.Rj&&0<=G&&l.Oe;G--)r.currentTarget=C[G],h&=Ed(l,C[G],e,j,r);if(q){l=g[m];l.Oe=l.ga;for(G=0;!r.Rj&&G<C.length&&l.Oe;G++)r.currentTarget=C[G],h&=Ed(l,C[G],e,m,r)}}else h=Dd(d,r)}finally{C&&(C.length=0)}return h}e=new ld(c,this);return h=Dd(d,e)},a.Fd=0,a.Gd=function(b){return b+
"_"+Fd++};a.Hd=function(){M.call(this)};y(Hd,M);t=Hd.prototype;t.LC=j;t.Ul=k;t.rt=ca("Ul");t.addEventListener=function(b,c,d,e){N(this,b,c,d,e)};t.removeEventListener=function(b,c,d,e){yd(this,b,c,d,e)};
t.dispatchEvent=function(b){var c=b.type||b,d=sd;if(c in d){if(oa(b))b=new hd(b,this);else if(b instanceof hd)b.target=b.target||this;else{var e=b,b=new hd(c,this);F.extend(b,e)}var e=1,g,d=d[c],c=j in d,h;if(c){g=[];for(h=this;h;h=h.Ul)g.push(h);h=d[j];h.Oe=h.ga;for(var l=g.length-1;!b.Rj&&0<=l&&h.Oe;l--)b.currentTarget=g[l],e&=Ed(h,g[l],b.type,j,b)&&b.it!=m}if(m in d)if(h=d[m],h.Oe=h.ga,c)for(l=0;!b.Rj&&l<g.length&&h.Oe;l++)b.currentTarget=g[l],e&=Ed(h,g[l],b.type,m,b)&&b.it!=m;else for(g=this;!b.Rj&&
g&&h.Oe;g=g.Ul)b.currentTarget=g,e&=Ed(h,g,b.type,m,b)&&b.it!=m;b=Boolean(e)}else b=j;return b};t.z=function(){Hd.n.z.call(this);Cd(this);this.Ul=k};a.Jd=function(b,c){M.call(this);this.Lg=b||1;this.up=c||Id;this.Ou=v(this.TT,this);this.Sx=za()};y(Jd,Hd);Jd.prototype.enabled=m;a.Id=fa.window;t=Jd.prototype;t.oa=k;t.setInterval=u(11);t.TT=function(){if(this.enabled){var b=za()-this.Sx;0<b&&b<0.8*this.Lg?this.oa=this.up.setTimeout(this.Ou,this.Lg-b):(this.dispatchEvent(Kd),this.enabled&&(this.oa=this.up.setTimeout(this.Ou,this.Lg),this.Sx=za()))}};t.start=function(){this.enabled=j;this.oa||(this.oa=this.up.setTimeout(this.Ou,this.Lg),this.Sx=za())};
t.stop=function(){this.enabled=m;this.oa&&(this.up.clearTimeout(this.oa),this.oa=k)};t.z=function(){Jd.n.z.call(this);this.stop();delete this.up};a.Kd="tick",a.Ld=function(b,c,d){qa(b)?d&&(b=v(b,d)):b&&"function"==typeof b.handleEvent?b=v(b.handleEvent,b):f(Error("Invalid listener argument"));return 2147483647<c?-1:Id.setTimeout(b,c||0)};a.Md={Va:function(b){return"function"==typeof b.Va?b.Va():na(b)||oa(b)?b.length:F.Va(b)},La:function(b){if("function"==typeof b.La)return b.La();if(oa(b))return b.split("");if(na(b)){for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e]);return c}return F.La(b)},Gb:function(b){if("function"==typeof b.Gb)return b.Gb();if("function"!=typeof b.La){if(na(b)||oa(b)){for(var c=[],b=b.length,d=0;d<b;d++)c.push(d);return c}return F.Gb(b)}},contains:function(b,c){return"function"==typeof b.contains?b.contains(c):
"function"==typeof b.vg?b.vg(c):na(b)||oa(b)?z.contains(b,c):F.vg(b,c)},Ib:function(b){return"function"==typeof b.Ib?b.Ib():na(b)||oa(b)?z.Ib(b):F.Ib(b)},clear:function(b){"function"==typeof b.clear?b.clear():na(b)?z.clear(b):F.clear(b)},forEach:function(b,c,d){if("function"==typeof b.forEach)b.forEach(c,d);else if(na(b)||oa(b))z.forEach(b,c,d);else for(var e=Md.Gb(b),g=Md.La(b),h=g.length,l=0;l<h;l++)c.call(d,g[l],e&&e[l],b)},filter:function(b,c,d){if("function"==typeof b.filter)return b.filter(c,
d);if(na(b)||oa(b))return z.filter(b,c,d);var e,g=Md.Gb(b),h=Md.La(b),l=h.length;if(g){e={};for(var n=0;n<l;n++)c.call(d,h[n],g[n],b)&&(e[g[n]]=h[n])}else{e=[];for(n=0;n<l;n++)c.call(d,h[n],i,b)&&e.push(h[n])}return e},map:function(b,c,d){if("function"==typeof b.map)return b.map(c,d);if(na(b)||oa(b))return z.map(b,c,d);var e,g=Md.Gb(b),h=Md.La(b),l=h.length;if(g){e={};for(var n=0;n<l;n++)e[g[n]]=c.call(d,h[n],g[n],b)}else{e=[];for(n=0;n<l;n++)e[n]=c.call(d,h[n],i,b)}return e},some:function(b,c,d){if("function"==
typeof b.some)return b.some(c,d);if(na(b)||oa(b))return z.some(b,c,d);for(var e=Md.Gb(b),g=Md.La(b),h=g.length,l=0;l<h;l++)if(c.call(d,g[l],e&&e[l],b))return j;return m},every:function(b,c,d){if("function"==typeof b.every)return b.every(c,d);if(na(b)||oa(b))return z.every(b,c,d);for(var e=Md.Gb(b),g=Md.La(b),h=g.length,l=0;l<h;l++)if(!c.call(d,g[l],e&&e[l],b))return m;return j}};a.O={};O.bb="StopIteration"in fa?fa.StopIteration:Error("StopIteration");a.Nd=function(){};Nd.prototype.next=function(){f(O.bb)};Nd.prototype.ed=function(){return this};O.cd=function(b){if(b instanceof Nd)return b;if("function"==typeof b.ed)return b.ed(m);if(na(b)){var c=0,d=new Nd;d.next=function(){for(;;){c>=b.length&&f(O.bb);if(c in b)return b[c++];c++}};return d}f(Error("Not implemented"))};
O.forEach=function(b,c,d){if(na(b))try{z.forEach(b,c,d)}catch(e){e!==O.bb&&f(e)}else{b=O.cd(b);try{for(;;)c.call(d,b.next(),i,b)}catch(g){g!==O.bb&&f(g)}}};O.filter=function(b,c,d){var e=O.cd(b),b=new Nd;b.next=function(){for(;;){var b=e.next();if(c.call(d,b,i,e))return b}};return b};O.Jo=function(b,c,d){var e=0,g=b,h=d||1;1<arguments.length&&(e=b,g=c);0==h&&f(Error("Range step argument must not be zero"));var l=new Nd;l.next=function(){(0<h&&e>=g||0>h&&e<=g)&&f(O.bb);var b=e;e+=h;return b};return l};
O.join=function(b,c){return O.toArray(b).join(c)};O.map=function(b,c,d){var e=O.cd(b),b=new Nd;b.next=function(){for(;;){var b=e.next();return c.call(d,b,i,e)}};return b};O.reduce=function(b,c,d,e){var g=d;O.forEach(b,function(b){g=c.call(e,g,b)});return g};O.some=function(b,c,d){b=O.cd(b);try{for(;;)if(c.call(d,b.next(),i,b))return j}catch(e){e!==O.bb&&f(e)}return m};O.every=function(b,c,d){b=O.cd(b);try{for(;;)if(!c.call(d,b.next(),i,b))return m}catch(e){e!==O.bb&&f(e)}return j};
O.PK=function(b){var c=arguments,d=c.length,e=0,g=new Nd;g.next=function(){try{return e>=d&&f(O.bb),O.cd(c[e]).next()}catch(b){return(b!==O.bb||e>=d)&&f(b),e++,this.next()}};return g};O.YL=function(b,c){var d=O.cd(b),e=new Nd,g=j;e.next=function(){for(;;){var b=d.next();if(!g||!c.call(i,b,i,d))return g=m,b}};return e};O.kA=function(b,c){var d=O.cd(b),e=new Nd,g=j;e.next=function(){for(;;)if(g){var b=d.next();if(c.call(i,b,i,d))return b;g=m}else f(O.bb)};return e};
O.toArray=function(b){if(na(b))return z.toArray(b);var b=O.cd(b),c=[];O.forEach(b,function(b){c.push(b)});return c};O.equals=function(b,c){var b=O.cd(b),c=O.cd(c),d,e;try{for(;;){d=e=m;var g=b.next();d=j;var h=c.next();e=j;if(g!=h)break}}catch(l){l!==O.bb&&f(l);if(d&&!e)return m;if(!e)try{c.next()}catch(n){return n!==O.bb&&f(n),j}}return m};O.PY=function(b,c){try{return O.cd(b).next()}catch(d){return d!=O.bb&&f(d),c}};
O.product=function(b){if(z.some(arguments,function(b){return!b.length})||!arguments.length)return new Nd;var c=new Nd,d=arguments,e=z.repeat(0,d.length);c.next=function(){if(e){for(var b=z.map(e,function(b,c){return d[c][b]}),c=e.length-1;0<=c;c--){if(e[c]<d[c].length-1){e[c]++;break}if(0==c){e=k;break}e[c]=0}return b}f(O.bb)};return c};
O.rv=function(b){var c=O.cd(b),d=[],e=0,b=new Nd,g=m;b.next=function(){var b=k;if(!g)try{return b=c.next(),d.push(b),b}catch(l){(l!=O.bb||z.Ib(d))&&f(l),g=j}b=d[e];e=(e+1)%d.length;return b};return b};a.Od=function(b,c){this.qb={};this.Ta=[];var d=arguments.length;if(1<d){d%2&&f(Error("Uneven number of arguments"));for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else b&&this.su(b)};t=Od.prototype;t.ga=0;t.Hp=0;t.Va=p("ga");t.La=function(){Pd(this);for(var b=[],c=0;c<this.Ta.length;c++)b.push(this.qb[this.Ta[c]]);return b};t.Gb=function(){Pd(this);return this.Ta.concat()};t.Ld=function(b){return Qd(this.qb,b)};
t.vg=function(b){for(var c=0;c<this.Ta.length;c++){var d=this.Ta[c];if(Qd(this.qb,d)&&this.qb[d]==b)return j}return m};t.equals=function(b,c){if(this===b)return j;if(this.ga!=b.Va())return m;var d=c||Rd;Pd(this);for(var e,g=0;e=this.Ta[g];g++)if(!d(this.get(e),b.get(e)))return m;return j};a.Rd=function(b,c){return b===c};t.Ib=function(){return 0==this.ga};t.clear=function(){this.qb={};this.Hp=this.ga=this.Ta.length=0};
t.remove=function(b){return Qd(this.qb,b)?(delete this.qb[b],this.ga--,this.Hp++,this.Ta.length>2*this.ga&&Pd(this),j):m};a.Pd=function(b){if(b.ga!=b.Ta.length){for(var c=0,d=0;c<b.Ta.length;){var e=b.Ta[c];Qd(b.qb,e)&&(b.Ta[d++]=e);c++}b.Ta.length=d}if(b.ga!=b.Ta.length){for(var g={},d=c=0;c<b.Ta.length;)e=b.Ta[c],Qd(g,e)||(b.Ta[d++]=e,g[e]=1),c++;b.Ta.length=d}};t.get=function(b,c){return Qd(this.qb,b)?this.qb[b]:c};
t.set=function(b,c){Qd(this.qb,b)||(this.ga++,this.Ta.push(b),this.Hp++);this.qb[b]=c};t.su=function(b){var c;b instanceof Od?(c=b.Gb(),b=b.La()):(c=F.Gb(b),b=F.La(b));for(var d=0;d<c.length;d++)this.set(c[d],b[d])};t.clone=function(){return new Od(this)};t.xm=function(){for(var b=new Od,c=0;c<this.Ta.length;c++){var d=this.Ta[c];b.set(this.qb[d],d)}return b};t.Ot=function(){Pd(this);for(var b={},c=0;c<this.Ta.length;c++){var d=this.Ta[c];b[d]=this.qb[d]}return b};
t.ed=function(b){Pd(this);var c=0,d=this.Ta,e=this.qb,g=this.Hp,h=this,l=new Nd;l.next=function(){for(;;){g!=h.Hp&&f(Error("The map has changed since the iterator was created"));c>=d.length&&f(O.bb);var l=d[c++];return b?l:e[l]}};return l};a.Qd=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};a.Sd=function(b){this.qb=new Od;b&&this.su(b)},a.Td=function(b){var c=typeof b;return"object"==c&&b||"function"==c?"o"+ua(b):c.substr(0,1)+b};t=Sd.prototype;t.Va=function(){return this.qb.Va()};t.add=function(b){this.qb.set(Td(b),b)};t.su=function(b){for(var b=Md.La(b),c=b.length,d=0;d<c;d++)this.add(b[d])};t.removeAll=function(b){for(var b=Md.La(b),c=b.length,d=0;d<c;d++)this.remove(b[d])};t.remove=function(b){return this.qb.remove(Td(b))};t.clear=function(){this.qb.clear()};t.Ib=function(){return this.qb.Ib()};
t.contains=function(b){return this.qb.Ld(Td(b))};t.QE=function(b){for(var c=new Sd,b=Md.La(b),d=0;d<b.length;d++){var e=b[d];this.contains(e)&&c.add(e)}return c};t.La=function(){return this.qb.La()};t.clone=function(){return new Sd(this)};t.equals=function(b){var c;if(c=this.Va()==Md.Va(b)){var d=b,b=Md.Va(d);this.Va()>b?c=m:(!(d instanceof Sd)&&5<b&&(d=new Sd(d)),c=Md.every(this,function(b){return Md.contains(d,b)}))}return c};t.ed=function(){return this.qb.ed(m)};a.Vd=function(b){return Ud(b||arguments.callee.caller,[])},a.Ud=function(b,c){var d=[];if(z.contains(c,b))d.push("[...circular reference...]");else if(b&&50>c.length){d.push(Wd(b)+"(");for(var e=b.arguments,g=0;g<e.length;g++){0<g&&d.push(", ");var h;h=e[g];switch(typeof h){case "object":h=h?"object":"null";break;case "string":break;case "number":h=String(h);break;case "boolean":h=h?"true":"false";break;case "function":h=(h=Wd(h))?h:"[fn]";break;default:h=typeof h}40<h.length&&(h=h.substr(0,40)+"...");
d.push(h)}c.push(b);d.push(")\n");try{d.push(Ud(b.caller,c))}catch(l){d.push("[exception trying to get caller]\n")}}else b?d.push("[...long stack...]"):d.push("[end]");return d.join("")},a.Wd=function(b){if(Xd[b])return Xd[b];b=String(b);if(!Xd[b]){var c=/function ([^\(]+)/.exec(b);Xd[b]=c?c[1]:"[Anonymous]"}return Xd[b]},a.Xd={};a.Yd=function(b,c,d,e,g){this.reset(b,c,d,e,g)};Yd.prototype.WS=0;Yd.prototype.mD=k;Yd.prototype.lD=k;a.Zd=0;Yd.prototype.reset=function(b,c,d,e,g){this.WS="number"==typeof g?g:Zd++;this.wZ=e||za();this.jo=b;this.SF=c;this.GY=d;delete this.mD;delete this.lD};Yd.prototype.DH=ca("jo");Yd.prototype.ki=u(52);a.$d=function(b){this.VP=b};$d.prototype.Wa=k;$d.prototype.jo=k;$d.prototype.Wb=k;$d.prototype.tE=k;a.ae=function(b,c){this.name=b;this.value=c};ae.prototype.toString=p("name");a.be=new ae("SHOUT",1200),a.ce=new ae("SEVERE",1E3),a.de=new ae("WARNING",900),a.ee=new ae("INFO",800),a.fe=new ae("CONFIG",700),a.ge=new ae("FINE",500);t=$d.prototype;t.getParent=p("Wa");t.GD=function(){this.Wb||(this.Wb={});return this.Wb};t.DH=ca("jo");a.he=function(b){return b.jo?b.jo:b.Wa?he(b.Wa):k};
t.log=function(b,c,d){if(b.value>=he(this).value){b=this.FM(b,c,d);c="log:"+b.SF;fa.console&&(fa.console.timeStamp?fa.console.timeStamp(c):fa.console.markTimeline&&fa.console.markTimeline(c));fa.msWriteProfilerMark&&fa.msWriteProfilerMark(c);for(c=this;c;){var d=c,e=b;if(d.tE)for(var g=0,h=i;h=d.tE[g];g++)h(e);c=c.getParent()}}};
t.FM=function(b,c,d){var e=new Yd(b,String(c),this.VP);if(d){e.mD=d;var g;var h=arguments.callee.caller;try{var l;var n=ga("window.location.href");if(oa(d))l={message:d,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var q,r,w=m;try{q=d.lineNumber||d.FY||"Not available"}catch(C){q="Not available",w=j}try{r=d.fileName||d.filename||d.sourceURL||n}catch(I){r="Not available",w=j}l=w||!d.lineNumber||!d.fileName||!d.stack?{message:d.message,name:d.name,lineNumber:q,
fileName:r,stack:d.stack||"Not available"}:d}g="Message: "+Va(l.message)+'\nUrl: <a href="view-source:'+l.fileName+'" target="_new">'+l.fileName+"</a>\nLine: "+l.lineNumber+"\n\nBrowser stack:\n"+Va(l.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Va(Vd(h)+"-> ")}catch(G){g="Exception trying to expose exception! You win, we lose. "+G}e.lD=g}return e};t.qk=function(b,c){this.log(de,b,c)};t.info=function(b,c){this.log(ee,b,c)};t.config=u(13);
a.ie=function(b,c){b.log(ge,c,i)},a.je={},a.ke=k,a.me=function(b){ke||(ke=new $d(""),je[""]=ke,ke.DH(fe));var c;if(!(c=je[b])){c=new $d(b);var d=b.lastIndexOf("."),e=b.substr(d+1),d=me(b.substr(0,d));d.GD()[e]=c;c.Wa=d;je[b]=c}return c};a.ne=function(b){M.call(this);this.fa=b;this.Ta=[]};y(ne,M);a.oe=[];t=ne.prototype;t.e=function(b,c,d,e,g){ma(c)||(oe[0]=c,c=oe);for(var h=0;h<c.length;h++){var l=N(b,c[h],d||this,e||m,g||this.fa||this);this.Ta.push(l)}return this};a.P=function(b,c,d,e,g,h){if(ma(d))for(var l=0;l<d.length;l++)P(b,c,d[l],e,g,h);else c=xd(c,d,e||b,g,h||b.fa||b),b.Ta.push(c)};
t.Fa=function(b,c,d,e,g){if(ma(c))for(var h=0;h<c.length;h++)this.Fa(b,c[h],d,e,g);else{a:{d=d||this;g=g||this.fa||this;e=!!e;if(b=zd(b,c,e))for(c=0;c<b.length;c++)if(!b[c].Uj&&b[c].Uf==d&&b[c].capture==e&&b[c].Qh==g){b=b[c];break a}b=k}b&&(b=b.key,Ad(b),z.remove(this.Ta,b))}return this};t.removeAll=function(){z.forEach(this.Ta,Ad);this.Ta.length=0};t.z=function(){ne.n.z.call(this);this.removeAll()};t.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};a.pe=function(b){M.call(this);this.jg=b;this.ht=[]};y(pe,M);pe.prototype.Ea=me("goog.net.BulkLoaderHelper");pe.prototype.Cw=p("jg");pe.prototype.yw=p("ht");pe.prototype.z=function(){pe.n.z.call(this);this.ht=this.jg=k};a.qe=function(){};qe.prototype.aC=k;a.se=function(b){var c;if(!(c=b.aC))c={},re(b)&&(c[0]=j,c[1]=j),c=b.aC=c;return c};a.te=void 0,a.ue=function(){};y(ue,qe);a.ve=function(b){return(b=re(b))?new ActiveXObject(b):new XMLHttpRequest},a.re=function(b){if(!b.BE&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var c=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<c.length;d++){var e=c[d];try{return new ActiveXObject(e),b.BE=e}catch(g){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return b.BE};
te=new ue;a.we=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");a.xe=function(b){M.call(this);this.headers=new Od;this.$t=b||k};y(xe,Hd);xe.prototype.Ea=me("goog.net.XhrIo");a.ye=/^https?$/i;t=xe.prototype;t.rh=m;t.ia=k;t.Zt=k;t.ls="";t.jF="";t.bo=0;t.co="";t.Pv=m;t.Qr=m;t.lx=m;t.nj=m;t.Jt=0;t.kk=k;t.kH="";t.HU=m;
t.send=function(b,c,d,e){this.ia&&f(Error("[goog.net.XhrIo] Object is active with another request="+this.ls+"; newUri="+b));c=c?c.toUpperCase():"GET";this.ls=b;this.co="";this.bo=0;this.jF=c;this.Pv=m;this.rh=j;this.ia=this.$t?ve(this.$t):ve(te);this.Zt=this.$t?se(this.$t):se(te);this.ia.onreadystatechange=v(this.qG,this);try{ie(this.Ea,ze(this,"Opening Xhr")),this.lx=j,this.ia.open(c,b,j),this.lx=m}catch(g){ie(this.Ea,ze(this,"Error opening Xhr: "+g.message));Ae(this,g);return}var b=d||"",h=this.headers.clone();
e&&Md.forEach(e,function(b,c){h.set(c,b)});e=fa.FormData&&b instanceof fa.FormData;"POST"==c&&(!h.Ld("Content-Type")&&!e)&&h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Md.forEach(h,function(b,c){this.ia.setRequestHeader(c,b)},this);this.kH&&(this.ia.responseType=this.kH);F.Ld(this.ia,"withCredentials")&&(this.ia.withCredentials=this.HU);try{this.kk&&(Id.clearTimeout(this.kk),this.kk=k),0<this.Jt&&(ie(this.Ea,ze(this,"Will abort after "+this.Jt+"ms if incomplete")),this.kk=
Id.setTimeout(v(this.Kt,this),this.Jt)),ie(this.Ea,ze(this,"Sending request")),this.Qr=j,this.ia.send(b),this.Qr=m}catch(l){ie(this.Ea,ze(this,"Send error: "+l.message)),Ae(this,l)}};t.Kt=function(){"undefined"!=typeof ea&&this.ia&&(this.co="Timed out after "+this.Jt+"ms, aborting",this.bo=8,ie(this.Ea,ze(this,this.co)),this.dispatchEvent("timeout"),this.abort(8))};
a.Ae=function(b,c){b.rh=m;b.ia&&(b.nj=j,b.ia.abort(),b.nj=m);b.co=c;b.bo=5;Be(b);Ce(b)},a.Be=function(b){b.Pv||(b.Pv=j,b.dispatchEvent("complete"),b.dispatchEvent("error"))};t.abort=function(b){this.ia&&this.rh&&(ie(this.Ea,ze(this,"Aborting")),this.rh=m,this.nj=j,this.ia.abort(),this.nj=m,this.bo=b||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ce(this))};t.z=function(){this.ia&&(this.rh&&(this.rh=m,this.nj=j,this.ia.abort(),this.nj=m),Ce(this,j));xe.n.z.call(this)};
t.qG=function(){!this.lx&&!this.Qr&&!this.nj?this.SQ():De(this)};t.SQ=function(){De(this)};
a.De=function(b){if(b.rh&&"undefined"!=typeof ea)if(b.Zt[1]&&4==Ee(b)&&2==Fe(b))ie(b.Ea,ze(b,"Local request error detected and ignored"));else if(b.Qr&&4==Ee(b))Id.setTimeout(v(b.qG,b),0);else if(b.dispatchEvent("readystatechange"),4==Ee(b)){ie(b.Ea,ze(b,"Request complete"));b.rh=m;try{if(Ge(b))b.dispatchEvent("complete"),b.dispatchEvent("success");else{b.bo=6;var c;try{c=2<Ee(b)?b.ia.statusText:""}catch(d){ie(b.Ea,"Can not get status: "+d.message),c=""}b.co=c+" ["+Fe(b)+"]";Be(b)}}finally{Ce(b)}}},
a.Ce=function(b,c){if(b.ia){var d=b.ia,e=b.Zt[0]?ha:k;b.ia=k;b.Zt=k;b.kk&&(Id.clearTimeout(b.kk),b.kk=k);c||b.dispatchEvent("ready");try{d.onreadystatechange=e}catch(g){b.Ea.log(ce,"Problem encountered resetting onreadystatechange: "+g.message,i)}}};t.ac=function(){return!!this.ia};
a.Ge=function(b){var c=Fe(b),d;a:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=j;break a;default:d=m}if(!d){if(c=0===c)b=String(b.ls).match(we)[1]||k,!b&&self.location&&(b=self.location.protocol,b=b.substr(0,b.length-1)),c=!ye.test(b?b.toLowerCase():"");d=c}return d},a.Ee=function(b){return b.ia?b.ia.readyState:0},a.Fe=function(b){try{return 2<Ee(b)?b.ia.status:-1}catch(c){return b.Ea.qk("Can not get status: "+c.message),-1}},a.He=function(b){try{return b.ia?b.ia.responseText:
""}catch(c){return ie(b.Ea,"Can not get responseText: "+c.message),""}},a.Ie=function(b){if(b.ia)return Xc(b.ia.responseText)};t.getResponseHeader=function(b){return this.ia&&4==Ee(this)?this.ia.getResponseHeader(b):i};a.ze=function(b,c){return c+" ["+b.jF+" "+b.ls+" "+Fe(b)+"]"};a.Je=function(b){M.call(this);this.lj=new pe(b);this.Q=new ne(this)};y(Je,Hd);t=Je.prototype;t.Ea=me("goog.net.BulkLoader");t.yw=function(){return this.lj.yw()};t.load=function(){var b=this.Q,c=this.lj.Cw();this.Ea.info("Starting load of code with "+c.length+" uris.");for(var d=0;d<c.length;d++){var e=new xe;b.e(e,"complete",v(this.qN,this,d));e.send(c[d])}};
t.qN=function(b,c){this.Ea.info('Received event "'+c.type+'" for id '+b+" with uri "+this.lj.jg[b]);var d=c.target;Ge(d)?this.Yw(b,d):this.Ow(b,d)};t.Yw=function(b,c){var d=He(c);this.lj.ht[b]=d;a:{var e=this.lj,d=e.ht;if(d.length==e.jg.length){for(e=0;e<d.length;e++)if(d[e]==k){d=m;break a}d=j}else d=m}d&&(this.Ea.info("All uris loaded."),this.dispatchEvent("success"));c.H()};t.Ow=function(b,c){this.dispatchEvent("error");c.H()};
t.z=function(){Je.n.z.call(this);this.Q.H();this.Q=k;this.lj.H();this.lj=k};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
a.Ke=function(b,c){this.$m=[];this.cC=b;this.QC=c||k};t=Ke.prototype;t.Jh=m;t.Dn=m;t.Ho=0;t.Wz=m;t.QK=m;t.Pu=0;t.cancel=function(b){if(this.Jh)this.Oo instanceof Ke&&this.Oo.cancel();else{if(this.Wa){var c=this.Wa;delete this.Wa;b?c.cancel(b):(c.Pu--,0>=c.Pu&&c.cancel())}this.cC?this.cC.call(this.QC,this):this.Wz=j;this.Jh||Le(this,new Me(this))}};t.xC=function(b,c){Ne(this,b,c);this.Ho--;0==this.Ho&&this.Jh&&Oe(this)};a.Ne=function(b,c,d){b.Jh=j;b.Oo=d;b.Dn=!c;Oe(b)};
t.wh=function(){this.Jh&&(this.Wz||f(new Pe(this)),this.Wz=m)};t.Mk=function(b){this.wh();Ne(this,j,b)};
a.Le=function(b,c){b.wh();Ne(b,m,c)},a.Qe=function(b){return z.some(b.$m,function(b){return qa(b[1])})},a.Oe=function(b){b.BA&&(b.Jh&&Qe(b))&&(fa.clearTimeout(b.BA),delete b.BA);b.Wa&&(b.Wa.Pu--,delete b.Wa);for(var c=b.Oo,d=m,e=m;b.$m.length&&0==b.Ho;){var g=b.$m.shift(),h=g[0],l=g[1],g=g[2];if(h=b.Dn?l:h)try{var n=h.call(g||b.QC,c);la(n)&&(b.Dn=b.Dn&&(n==c||n instanceof Error),b.Oo=c=n);c instanceof Ke&&(e=j,b.Ho++)}catch(q){c=q,b.Dn=j,Qe(b)||(d=j)}}b.Oo=c;e&&b.Ho&&(e=c,n=v(b.xC,b,j),h=v(b.xC,b,
m),e.$m.push([n,h,i]),e.Jh&&Oe(e),c.QK=j);d&&(b.BA=fa.setTimeout(function(){f(c)},0))},a.Pe=function(b){Da.call(this);this.deferred=b};y(Pe,Da);Pe.prototype.message="Deferred has already fired";Pe.prototype.name="AlreadyCalledError";a.Me=function(b){Da.call(this);this.deferred=b};y(Me,Da);Me.prototype.message="Deferred was cancelled";Me.prototype.name="CancelledError";a.Re=[],a.Te=function(){if(this&&this.sH){var b=this.sH;b&&"SCRIPT"==b.tagName&&Se(b,j,this.Kt)}},a.Se=function(b,c,d){d!=k&&fa.clearTimeout(d);b.onload=ha;b.onerror=ha;b.onreadystatechange=ha;c&&window.setTimeout(function(){L(b)},0)},a.Ue=function(b,c){var d="Jsloader error (code #"+b+")";c&&(d+=": "+c);Da.call(this,d);this.code=b};y(Ue,Da);a.Ve=function(){M.call(this);this.Q=new ne(this);this.Sg={}};y(Ve,Hd);t=Ve.prototype;t.Nb=me("goog.module.ModuleLoader");t.PC=m;t.vT=m;
t.yP=function(b,c,d,e){var g=this.Sg[b]||new We;g.vF=j;g.hA=d||k;g.Qv=e||k;if(this.Sg[b])g.pz!=k&&Xe(this,b);else{this.Sg[b]=g;d=[];for(e=0;e<b.length;e++)z.extend(d,c[b[e]].Cw());this.Nb.info("downloadModules ids:"+b+" uris:"+d);if(this.PC){var h=d;if(h.length&&(b=Re.length,z.extend(Re,h),!b)){var h=Re,l=function(){var b=h.shift(),c={},d=c.document||document,e=document.createElement("SCRIPT"),g={sH:e,Kt:i},I=new Ke(Te,g),G=k,R=c.timeout!=k?c.timeout:5E3;0<R&&(G=window.setTimeout(function(){Se(e,
j);Le(I,new Ue(1,"Timeout reached for loading script "+b))},R),g.Kt=G);e.onload=e.onreadystatechange=function(){if(!e.readyState||"loaded"==e.readyState||"complete"==e.readyState)Se(e,c.BX||m,G),I.Mk(k)};e.onerror=function(){Se(e,j,G);Le(I,new Ue(0,"Error while loading script "+b))};Yb(e,{type:"text/javascript",charset:"UTF-8",src:b});g=d.getElementsByTagName("HEAD");(!g||z.Ib(g)?d.documentElement:g[0]).appendChild(e);h.length&&(I.$m.push([l,l,i]),I.Jh&&Oe(I))};l()}}else this.Sg[b].iH=d,c=new Je(d),
d=this.Q,d.e(c,"success",v(this.Yw,this,c,b),m,k),d.e(c,"error",v(this.Ow,this,c,b),m,k),c.load()}};a.Xe=function(b,c){b.dispatchEvent(new Ye(Ze,c));b.Nb.info("evaluateCode ids:"+c);var d=j,e=b.Sg[c],g=e.iH,h=e.pz;try{if(b.vT)for(var l=0;l<g.length;l++)Ba(h[l]+" //@ sourceURL="+g[l]);else Ba(h.join("\n"))}catch(n){d=m,b.Nb.qk("Loaded incomplete code for module(s): "+c,n)}b.dispatchEvent(new Ye($e,c));d?e.hA&&e.hA():af(b,c,e.Qv,k);delete b.Sg[c]};
t.Yw=function(b,c){this.Nb.info("Code loaded for module(s): "+c);var d=this.Sg[c];d.pz=b.yw();d.vF&&Xe(this,c);Ld(b.H,5,b)};t.Ow=function(b,c,d){var e=this.Sg[c];e&&(delete this.Sg[c],af(this,c,e.Qv,d));Ld(b.H,5,b)};a.af=function(b,c,d,e){b.dispatchEvent(new Ye(bf,c));b.Nb.qk("Request failed for module(s): "+c);d&&d(e)};t.z=function(){Ve.n.z.call(this);this.Q.H();this.Q=k};a.$e=Gd("evaluateCode"),a.Ze=Gd("requestSuccess"),a.bf=Gd("requestError"),a.Ye=function(b,c){hd.call(this,b);this.LY=c};
y(Ye,hd);a.We=function(){this.pz=this.iH=k;this.vF=m;this.Qv=this.hA=k};a.cf=function(b,c){M.call(this);this.CF=c;this.Cg=[];b>this.CF&&f(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var d=0;d<b;d++)this.Cg.push(this.Qk())};y(cf,M);t=cf.prototype;t.yC=k;t.$C=k;a.df=function(b,c){b.Cg.length<b.CF?b.Cg.push(c):b.Dv(c)};t.Qk=function(){return this.yC?this.yC():{}};t.Dv=function(b){if(this.$C)this.$C(b);else if(ra(b))if(qa(b.H))b.H();else for(var c in b)delete b[c]};
t.z=function(){cf.n.z.call(this);for(var b=this.Cg;b.length;)this.Dv(b.pop());delete this.Cg};a.gf=function(){this.Jf=[];this.Oy=new Od;this.St=this.gI=this.hI=this.RH=0;this.ek=new Od;this.gv=this.fI=0;this.ry=1;this.el=new cf(0,4E3);this.el.Qk=function(){return new ef};this.lp=new cf(0,50);this.lp.Qk=function(){return new ff};var b=this;this.cx=new cf(0,2E3);this.cx.Qk=function(){return String(b.ry++)};this.cx.Dv=ba();this.LL=3};gf.prototype.Ea=me("goog.debug.Trace");a.ff=function(){this.KA=this.time=this.count=0};
ff.prototype.toString=function(){var b=[];b.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.KA&&b.push(" [VarAlloc = ",this.KA,"]");return b.join("")};a.ef=function(){},a.kf=function(b,c,d,e){var g=[];-1==d?g.push("    "):g.push(hf(b.er-d));g.push(" ",jf(b.er-c));0==b.fr?g.push(" Start        "):1==b.fr?(g.push(" Done "),g.push(hf(b.vZ-b.startTime)," ms ")):g.push(" Comment      ");g.push(e,b);0<b.eI&&g.push("[VarAlloc ",b.eI,"] ");return g.join("")};
ef.prototype.toString=function(){return this.type==k?this.nC:"["+this.type+"] "+this.nC};gf.prototype.reset=function(b){this.LL=b;for(b=0;b<this.Jf.length;b++){var c=this.el.id;c&&df(this.cx,c);df(this.el,this.Jf[b])}this.Jf.length=0;this.Oy.clear();this.RH=za();this.gv=this.fI=this.St=this.gI=this.hI=0;c=this.ek.Gb();for(b=0;b<c.length;b++){var d=this.ek.get(c[b]);d.count=0;d.time=0;d.KA=0;df(this.lp,d)}this.ek.clear()};gf.prototype.$p=u(14);
gf.prototype.toString=function(){for(var b=[],c=-1,d=[],e=0;e<this.Jf.length;e++){var g=this.Jf[e];1==g.fr&&d.pop();b.push(" ",kf(g,this.RH,c,d.join("")));c=g.er;b.push("\n");0==g.fr&&d.push("|  ")}if(0!=this.Oy.Va()){var h=za();b.push(" Unstopped timers:\n");O.forEach(this.Oy,function(c){b.push("  ",c," (",h-c.startTime," ms, started at ",jf(c.startTime),")\n")})}c=this.ek.Gb();for(e=0;e<c.length;e++)d=this.ek.get(c[e]),1<d.count&&b.push(" TOTAL ",d,"\n");b.push("Total tracers created ",this.fI,
"\n","Total comments created ",this.gv,"\n","Overhead start: ",this.hI," ms\n","Overhead end: ",this.gI," ms\n","Overhead comment: ",this.St," ms\n");return b.join("")};a.hf=function(b){var b=Math.round(b),c="";1E3>b&&(c=" ");100>b&&(c="  ");10>b&&(c="   ");return c+b},a.jf=function(b){b=Math.round(b);return String(100+b/1E3%60).substring(1,3)+"."+String(1E3+b%1E3).substring(1,4)};new gf;a.lf=function(b){return function(){return b}},a.mf=lf(m),a.nf=lf(j),a.of=function(b){return b},a.pf=function(b,c){var d=arguments,e=d.length;return function(){var b;e&&(b=d[e-1].apply(this,arguments));for(var c=e-2;0<=c;c--)b=d[c].call(this,b);return b}},a.qf=function(b){var c=arguments,d=c.length;return function(){for(var b,g=0;g<d;g++)b=c[g].apply(this,arguments);return b}},a.rf=function(b){return function(){return!b.apply(this,arguments)}};a.sf=function(){M.call(this)};y(sf,M);a.tf=function(b,c){this.nr=b;this.fa=c};tf.prototype.execute=function(b){this.nr&&(this.nr.call(this.fa||k,b),this.nr=this.fa=k)};tf.prototype.abort=function(){this.fa=this.nr=k};a.uf=function(b,c){M.call(this);this.SC=b;this.Ad=c;this.Jy=[];this.xy=[];this.eD=[]};y(uf,M);t=uf.prototype;t.jg=k;t.RP=sf;t.ny=k;t.Ud=p("Ad");t.Cw=function(){var b=[];return jQuery.support.cors?this.jg:ma(this.jg)?(z.forEach(this.jg,function(c){b.push(vf(new wf(c)))}),b):vf(new wf(this.jg))};t.Zs=function(b,c){return this.$s(this.Jy,b,c)};t.$s=function(b,c,d){c=new tf(c,d);b.push(c);return c};t.Xd=function(){return!!this.ny};
t.Do=function(b){var c=new this.RP;b();this.ny=c;c=(c=!!xf(this.eD,b()))||!!xf(this.Jy,b());c||(this.xy.length=0);return c};t.bi=function(b){if(b=xf(this.xy,b)){var c="Module errback failures: "+b;window.setTimeout(function(){f(Error(c))},0)}this.eD.length=0;this.Jy.length=0};a.xf=function(b,c){for(var d=[],e=0;e<b.length;e++)try{b[e].execute(c)}catch(g){d.push(g)}b.length=0;return d.length?d:k};t.z=function(){uf.n.z.call(this);Uc(this.ny)};a.yf=function(){M.call(this);this.md={};this.lf=[];this.Wj=[];this.pd=[];this.ui=[];this.xq={};this.KC=this.oq=new uf([],"")};y(yf,M);ia(yf);t=yf.prototype;t.Ea=me("goog.module.ModuleManager");t.SB=m;t.$x=k;t.Gq=0;t.gF=m;t.yI=m;t.QF=k;t.MD=p("QF");t.ac=function(){return 0<this.lf.length};
a.Af=function(b){var c=b.ac();c!=b.gF&&(zf(b,c?"active":"idle"),b.gF=c);c=0<b.ui.length;c!=b.yI&&(zf(b,c?"userActive":"userIdle"),b.yI=c)},a.Cf=function(b,c,d,e,g){d.Zs(g.Mk,g);d.$s(d.xy,function(b){Le(g,Error(b))},i);Bf(b,c)?e&&(b.Ea.info("User initiated module already loading: "+c),z.contains(b.ui,c)||b.ui.push(c),Af(b)):e?(b.Ea.info("User initiated module load: "+c),z.contains(b.ui,c)||b.ui.push(c)):b.Ea.info("Initiating module load: "+c)},a.Ef=function(b,c){z.Ib(b.lf)?Df(b,c):(b.pd.push(c),Af(b))},
a.Df=function(b,c,d,e){d||(b.Gq=0);for(var g=0;g<c.length;g++)b.md[c[g]].Xd()&&f(Error("Module already loaded: "+c[g]));d=[];for(g=0;g<c.length;g++)d=d.concat(Ff(b,c[g]));z.Mo(d);!b.SB&&1<d.length&&(g=d.shift(),b.Ea.info("Must load "+g+" module before "+c),b.pd=z.map(d,function(b){return[b]}).concat(b.pd),d=[g]);b.Ea.info("Loading module(s): "+d);b.lf=d;b.Wj=b.SB?c:z.clone(d);Af(b);c=v(b.$x.yP,b.$x,z.clone(d),b.md,k,v(b.BN,b),v(b.CN,b),!!e);(b=5E3*Math.pow(b.Gq,2))?window.setTimeout(c,b):c()},a.Ff=
function(b,c){for(var d=[c],e=z.clone(b.md[c].SC);e.length;){var g=e.pop();b.md[g].Xd()||(d.unshift(g),Array.prototype.unshift.apply(e,b.md[g].SC))}z.Mo(d);return d},a.Jf=function(b){var c=yf.P();c.Ag?c.Ea.qk("Module loaded after module manager was disposed: "+b):(c.Ea.info("Module loaded: "+b),c.md[b].Do(v(c.MD,c))&&Gf(c,Hf),z.remove(c.ui,b),z.remove(c.lf,b),z.Ib(c.lf)&&If(c),Af(c))},a.Bf=function(b,c){if(z.contains(b.lf,c))return j;for(var d=0;d<b.pd.length;d++)if(z.contains(b.pd[d],c))return j;
return m};t.load=function(b,c){var d=[];z.Mo([b],d);for(var e=[],g={},h=0;h<d.length;h++){var l=d[h],n=this.md[l],q=new Ke;g[l]=q;n.Xd()?q.Mk(this.QF):(Cf(this,l,n,!!c,q),Bf(this,l)||e.push(l))}0<e.length&&Ef(this,e);return g[b]};a.Hf=4;t=yf.prototype;
t.BN=function(b){this.Gq++;401==b?(this.Ea.info("Module loading unauthorized"),Gf(this,0),this.pd.length=0):410==b?(Kf(this,3),If(this)):3<=this.Gq?(this.Ea.info("Aborting after failure to load: "+this.lf),Kf(this,1),If(this)):(this.Ea.info("Retrying after failure to load: "+this.lf),Df(this,this.Wj,j,8001==b))};t.CN=function(){this.Ea.info("Aborting after timeout: "+this.lf);Kf(this,2);If(this)};
a.Kf=function(b,c){1<b.Wj.length?b.pd=z.map(b.Wj,function(b){return[b]}).concat(b.pd):Gf(b,c)},a.Gf=function(b,c){var d=b.Wj;b.lf.length=0;for(var e=[],g=0;g<b.pd.length;g++){var h=z.filter(b.pd[g],function(b){var c=Ff(this,b);return z.some(d,function(b){return z.contains(c,b)})},b);z.extend(e,h)}for(g=0;g<d.length;g++)z.Xr(e,d[g]);for(g=0;g<e.length;g++){for(h=0;h<b.pd.length;h++)z.remove(b.pd[h],e[g]);z.remove(b.ui,e[g])}var l=b.xq.error;if(l)for(g=0;g<l.length;g++)for(var n=l[g],h=0;h<e.length;h++)n("error",
e[h],c);for(g=0;g<d.length;g++)b.md[d[g]]&&b.md[d[g]].bi(c);b.Wj.length=0;Af(b)},a.If=function(b){for(;b.pd.length;){var c=z.filter(b.pd.shift(),function(b){return!this.md[b].Xd()},b);if(0<c.length){Df(b,c);return}}Af(b)};t.Zs=function(b,c){ma(b)||(b=[b]);for(var d=0;d<b.length;d++)this.$s(b[d],c)};t.$s=function(b,c){var d=this.xq;d[b]||(d[b]=[]);d[b].push(c)};a.zf=function(b,c){for(var d=b.xq[c],e=0;d&&e<d.length;e++)d[e](c)};
t.z=function(){yf.n.z.call(this);Tc(F.La(this.md),this.oq);this.xq=this.pd=this.ui=this.Wj=this.lf=this.md=k};a.Lf=function(b){this.Ha=b},a.Mf=/\s*;\s*/;t=Lf.prototype;t.isEnabled=function(){return navigator.cookieEnabled};t.set=function(b,c,d,e,g,h){/[;=\s]/.test(b)&&f(Error('Invalid cookie name "'+b+'"'));/[;\r\n]/.test(c)&&f(Error('Invalid cookie value "'+c+'"'));la(d)||(d=-1);g=g?";domain="+g:"";e=e?";path="+e:"";h=h?";secure":"";d=0>d?"":0==d?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(za()+1E3*d)).toUTCString();this.Ha.cookie=b+"="+c+g+e+d+h};
t.get=function(b,c){for(var d=b+"=",e=(this.Ha.cookie||"").split(Mf),g=0,h;h=e[g];g++){if(0==h.lastIndexOf(d,0))return h.substr(d.length);if(h==b)return""}return c};t.remove=function(b,c,d){var e=this.Ld(b);this.set(b,"",0,c,d);return e};t.Gb=function(){return Nf(this).keys};t.La=function(){return Nf(this).zI};t.Ib=function(){return!this.Ha.cookie};t.Va=function(){return!this.Ha.cookie?0:(this.Ha.cookie||"").split(Mf).length};t.Ld=function(b){return la(this.get(b))};
t.vg=function(b){for(var c=Nf(this).zI,d=0;d<c.length;d++)if(c[d]==b)return j;return m};t.clear=function(){for(var b=Nf(this).keys,c=b.length-1;0<=c;c--)this.remove(b[c])};a.Nf=function(b){for(var b=(b.Ha.cookie||"").split(Mf),c=[],d=[],e,g,h=0;g=b[h];h++)e=g.indexOf("="),-1==e?(c.push(""),d.push(g)):(c.push(g.substring(0,e)),d.push(g.substring(e+1)));return{keys:c,zI:d}},a.Of=new Lf(document);Of.$V=3950;a.Pf=function(b,c,d,e){this.top=b;this.right=c;this.bottom=d;this.left=e};Pf.prototype.clone=function(){return new Pf(this.top,this.right,this.bottom,this.left)};Pf.prototype.contains=function(b){return!this||!b?m:b instanceof Pf?b.left>=this.left&&b.right<=this.right&&b.top>=this.top&&b.bottom<=this.bottom:b.x>=this.left&&b.x<=this.right&&b.y>=this.top&&b.y<=this.bottom};Pf.prototype.expand=u(60);
a.Qf=function(b,c){var d=c.x<b.left?c.x-b.left:c.x>b.right?c.x-b.right:0,e=c.y<b.top?c.y-b.top:c.y>b.bottom?c.y-b.bottom:0;return Math.sqrt(d*d+e*e)};a.Rf=function(b,c,d,e){this.left=b;this.top=c;this.width=d;this.height=e};Rf.prototype.clone=function(){return new Rf(this.left,this.top,this.width,this.height)};a.Sf=function(b){return new Pf(b.top,b.left+b.width,b.top+b.height,b.left)};
Rf.prototype.QE=function(b){var c=Math.max(this.left,b.left),d=Math.min(this.left+this.width,b.left+b.width);if(c<=d){var e=Math.max(this.top,b.top),b=Math.min(this.top+this.height,b.top+b.height);if(e<=b)return this.left=c,this.top=e,this.width=d-c,this.height=b-e,j}return m};
Rf.prototype.contains=function(b){return b instanceof Rf?this.left<=b.left&&this.left+this.width>=b.left+b.width&&this.top<=b.top&&this.top+this.height>=b.top+b.height:b.x>=this.left&&b.x<=this.left+this.width&&b.y>=this.top&&b.y<=this.top+this.height};Rf.prototype.tl=function(){return new Pb(this.width,this.height)};a.Uf=function(b,c,d){oa(c)?Tf(b,d,c):F.forEach(c,xa(Tf,b))},a.Tf=function(b,c,d){(d=Vf(b,d))&&(b.style[d]=c)},a.Vf=function(b,c){var d=eb(c);if(b.style[d]===i){var e=D?"Webkit":B?"Moz":A?"ms":rb?"O":k,g;g=oa(i)?$a(i):"\\s";g=c.replace(RegExp("(^"+(g?"|["+g+"]+":"")+")([a-z])","g"),function(b,c,d){return c+d.toUpperCase()});e+=g;if(b.style[e]!==i)return e}return d},a.Wf=function(b,c){var d=Sb(b);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(b,k))?d[c]||d.getPropertyValue(c)||
"":""},a.Xf=function(b,c){return b.currentStyle?b.currentStyle[c]:k},a.Yf=function(b,c){return Wf(b,c)||Xf(b,c)||b.style&&b.style[c]},a.Zf=function(b){return Yf(b,"position")},a.ag=function(b,c,d){var e,g=B&&(kb||vb)&&Eb("1.9");c instanceof Nb?(e=c.x,c=c.y):(e=c,c=d);b.style.left=$f(e,g);b.style.top=$f(c,g)},a.bg=function(b){b=b?Sb(b):document;return A&&!Gb(9)&&!Lc(Tb(b))?b.body:b.documentElement},a.cg=function(b){var c=b.getBoundingClientRect();A&&(b=b.ownerDocument,c.left-=b.documentElement.clientLeft+
b.body.clientLeft,c.top-=b.documentElement.clientTop+b.body.clientTop);return c},a.dg=function(b){if(A&&!Gb(8))return b.offsetParent;for(var c=Sb(b),d=Yf(b,"position"),e="fixed"==d||"absolute"==d,b=b.parentNode;b&&b!=c;b=b.parentNode)if(d=Yf(b,"position"),e=e&&"static"==d&&b!=c.documentElement&&b!=c.body,!e&&(b.scrollWidth>b.clientWidth||b.scrollHeight>b.clientHeight||"fixed"==d||"absolute"==d||"relative"==d))return b;return k},a.gg=function(b){for(var c=new Pf(0,Infinity,Infinity,0),d=Tb(b),e=d.Da().body,
g=d.Da().documentElement,h=$b(d.Ha);b=dg(b);)if((!A||0!=b.clientWidth)&&(!D||0!=b.clientHeight||b!=e)&&b!=e&&b!=g&&"visible"!=Yf(b,"overflow")){var l=eg(b),n;n=b;if(B&&!Eb("1.9")){var q=parseFloat(Wf(n,"borderLeftWidth"));if(fg(n))var r=n.offsetWidth-n.clientWidth-q-parseFloat(Wf(n,"borderRightWidth")),q=q+r;n=new Nb(q,parseFloat(Wf(n,"borderTopWidth")))}else n=new Nb(n.clientLeft,n.clientTop);l.x+=n.x;l.y+=n.y;c.top=Math.max(c.top,l.y);c.right=Math.min(c.right,l.x+b.clientWidth);c.bottom=Math.min(c.bottom,
l.y+b.clientHeight);c.left=Math.max(c.left,l.x)}e=h.scrollLeft;h=h.scrollTop;c.left=Math.max(c.left,e);c.top=Math.max(c.top,h);d=Zb(d.Sa());c.right=Math.min(c.right,e+d.width);c.bottom=Math.min(c.bottom,h+d.height);return 0<=c.top&&0<=c.left&&c.bottom>c.top&&c.right>c.left?c:k},a.ig=function(b,c){var d,e=eg(b),g=eg(c),h=hg(c);d=e.x-g.x-h.left;var e=e.y-g.y-h.top,g=c.clientHeight-b.offsetHeight,h=c.scrollLeft,l=c.scrollTop,h=h+Math.min(d,Math.max(d-(c.clientWidth-b.offsetWidth),0)),l=l+Math.min(e,
Math.max(e-g,0));d=new Nb(h,l);c.scrollLeft=d.x;c.scrollTop=d.y},a.eg=function(b){var c,d=Sb(b),e=Yf(b,"position"),g=B&&d.getBoxObjectFor&&!b.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(b))&&(0>c.screenX||0>c.screenY),h=new Nb(0,0),l=bg(d);if(b==l)return h;if(b.getBoundingClientRect)c=cg(b),b=Mc(Tb(d)),h.x=c.left+b.x,h.y=c.top+b.y;else if(d.getBoxObjectFor&&!g)c=d.getBoxObjectFor(b),b=d.getBoxObjectFor(l),h.x=c.screenX-b.screenX,h.y=c.screenY-b.screenY;else{c=b;do{h.x+=c.offsetLeft;
h.y+=c.offsetTop;c!=b&&(h.x+=c.clientLeft||0,h.y+=c.clientTop||0);if(D&&"fixed"==Zf(c)){h.x+=d.body.scrollLeft;h.y+=d.body.scrollTop;break}c=c.offsetParent}while(c&&c!=b);if(rb||D&&"absolute"==e)h.y-=d.body.offsetTop;for(c=b;(c=dg(c))&&c!=d.body&&c!=l;)if(h.x-=c.scrollLeft,!rb||"TR"!=c.tagName)h.y-=c.scrollTop}return h},a.kg=function(b,c){var d=jg(b),e=jg(c);return new Nb(d.x-e.x,d.y-e.y)},a.jg=function(b){var c=new Nb;if(1==b.nodeType){if(b.getBoundingClientRect){var d=cg(b);c.x=d.left;c.y=d.top}else{var d=
Mc(Tb(b)),e=eg(b);c.x=e.x-d.x;c.y=e.y-d.y}if(B&&!Eb(12)){var g;A?g="-ms-transform":D?g="-webkit-transform":rb?g="-o-transform":B&&(g="-moz-transform");var h;g&&(h=Yf(b,g));h||(h=Yf(b,"transform"));h?(b=h.match(lg),b=!b?new Nb(0,0):new Nb(parseFloat(b[1]),parseFloat(b[2]))):b=new Nb(0,0);c=new Nb(c.x+b.x,c.y+b.y)}}else g=qa(b.ED),h=b,b.targetTouches?h=b.targetTouches[0]:g&&b.Yb.targetTouches&&(h=b.Yb.targetTouches[0]),c.x=h.clientX,c.y=h.clientY;return c},a.mg=function(b,c,d){var e=eg(b);c instanceof
Nb&&(d=c.y,c=c.x);ag(b,b.offsetLeft+(c-e.x),b.offsetTop+(d-e.y))},a.ng=function(b,c,d){c instanceof Pb?(d=c.height,c=c.width):d==i&&f(Error("missing height argument"));b.style.width=$f(c,j);b.style.height=$f(d,j)},a.$f=function(b,c){"number"==typeof b&&(b=(c?Math.round(b):b)+"px");return b},a.pg=function(b){if("none"!=Yf(b,"display"))return og(b);var c=b.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";b=og(b);c.display=d;c.position=g;c.visibility=
e;return b},a.og=function(b){var c=b.offsetWidth,d=b.offsetHeight,e=D&&!c&&!d;return(!la(c)||e)&&b.getBoundingClientRect?(b=cg(b),new Pb(b.right-b.left,b.bottom-b.top)):new Pb(c,d)},a.qg=function(b){var c=eg(b),b=pg(b);return new Rf(c.x,c.y,b.width,b.height)},a.rg=function(b,c){var d=b.style;"opacity"in d?d.opacity=c:"MozOpacity"in d?d.MozOpacity=c:"filter"in d&&(d.filter=""===c?"":"alpha(opacity="+100*c+")")},a.Q=function(b,c){b.style.display=c?"":"none"},a.sg=function(b){return"none"!=b.style.display},
a.fg=function(b){return"rtl"==Yf(b,"direction")},a.tg=B?"MozUserSelect":D?"WebkitUserSelect":k,a.ug=function(b,c,d){d=!d?b.getElementsByTagName("*"):k;if(tg){if(c=c?"none":"",b.style[tg]=c,d)for(var b=0,e;e=d[b];b++)e.style[tg]=c}else if(A||rb)if(c=c?"on":"",b.setAttribute("unselectable",c),d)for(b=0;e=d[b];b++)e.setAttribute("unselectable",c)},a.vg=function(b){return new Pb(b.offsetWidth,b.offsetHeight)},a.wg=function(b,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var g=b.style[d],h=b.runtimeStyle[d];
b.runtimeStyle[d]=b.currentStyle[d];b.style[d]=c;c=b.style[e];b.style[d]=g;b.runtimeStyle[d]=h;return c},a.xg=function(b,c){var d=Xf(b,c);return d?wg(b,d,"left","pixelLeft"):0},a.yg=function(b){if(A){var c=xg(b,"paddingLeft"),d=xg(b,"paddingRight"),e=xg(b,"paddingTop"),b=xg(b,"paddingBottom");return new Pf(e,d,b,c)}c=Wf(b,"paddingLeft");d=Wf(b,"paddingRight");e=Wf(b,"paddingTop");b=Wf(b,"paddingBottom");return new Pf(parseFloat(e),parseFloat(d),parseFloat(b),parseFloat(c))},a.zg={thin:2,medium:4,
thick:6},a.Ag=function(b,c){if("none"==Xf(b,c+"Style"))return 0;var d=Xf(b,c+"Width");return d in zg?zg[d]:wg(b,d,"left","pixelLeft")},a.hg=function(b){if(A){var c=Ag(b,"borderLeft"),d=Ag(b,"borderRight"),e=Ag(b,"borderTop"),b=Ag(b,"borderBottom");return new Pf(e,d,b,c)}c=Wf(b,"borderLeftWidth");d=Wf(b,"borderRightWidth");e=Wf(b,"borderTopWidth");b=Wf(b,"borderBottomWidth");return new Pf(parseFloat(e),parseFloat(d),parseFloat(b),parseFloat(c))},a.lg=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;a.Bg="/update",a.Cg=m;a.Dg=void 0,a.Eg=void 0,a.Fg=void 0,a.Gg=void 0,a.Hg=void 0,a.Ig=void 0,a.Jg=void 0;Jg=Ig=Hg=Gg=Fg=Eg=Dg=m;a.Kg=nb();Kg&&(-1!=Kg.indexOf("Firefox")?Dg=j:-1!=Kg.indexOf("Camino")?Eg=j:-1!=Kg.indexOf("iPhone")||-1!=Kg.indexOf("iPod")?Fg=j:-1!=Kg.indexOf("iPad")?Gg=j:-1!=Kg.indexOf("Android")?Hg=j:-1!=Kg.indexOf("Chrome")?Ig=j:-1!=Kg.indexOf("Safari")&&(Jg=j));a.Lg=Dg,a.Mg=Eg,a.Ng=Fg,a.Og=Gg,a.Pg=Hg,a.Qg=Ig,a.Rg=Jg;a.Sg=void 0,a.Tg=void 0,a.Ug=void 0,a.Vg=void 0,a.Wg=Ng||Og,a.Xg=Wg&&navigator.userAgent.match(/OS\s(\w+)/)[1].slice(0,3).replace(/_/g,".");Sg="contentEditable"in document.documentElement&&!(Wg&&5>Xg)&&!(Pg&&3>navigator.userAgent.match(/Android (\d)/)[1]);a.Yg=$(document.documentElement);Tg="ontouchstart"in window;Yg.addClass(sb?"mobile":"no-mobile");Ug=Wg&&6<=Xg||!sb;document.createElement("input");Vg=1.5<=window.devicePixelRatio;window.JSON||(window.JSON={parse:Xc,stringify:$c});a.Zg=void 0;
"orientation"in window&&(Zg=function(){var b={"0":"portrait",90:"landscape landscape-left","-90":"landscape landscape-right"},c=b[window.orientation]||"";Yg.removeClass(F.La(b).join(" ")).addClass(c)},$(window).on("orientationchange",Zg),Zg());$.support.fixedPosition=j;a:{var $g=document.createElement("bootstrap"),ah={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"},bh;for(bh in ah)if($g.style[bh]!==i)break a};a.ch={},a.dh=void 0,a.eh=void 0,a.S=void 0,a.fh=void 0,a.gh=void 0,a.hh=void 0,a.ih=void 0,a.jh=void 0,a.kh=void 0,a.lh=void 0,a.mh=void 0,a.nh=void 0,a.oh=void 0,a.ph=void 0,a.qh=void 0,a.rh=void 0,a.sh=void 0,a.th={},a.uh=z.reduce($("script.json-inline"),function(b,c){var d=$(c).data("name");b[d]=JSON.parse(c.text);return b},{});dh={};
F.forEach(uh,function(b,c){switch(c){case "redirect_to":eh=b;break;case "current_user":S=b;S.kw=b[0];S.wa=function(){return"-1"!==S.Fd};S.Fd=b[3];S.zi=1===b[7];S.dl=b[8];S.mo=b[9];S.mY=b[10];S.qy=b[11];S.Fr=b[12];S.DM=function(){return S[2].replace("_s","_is")};break;case "env":F.extend(dh,{Po:b[0],ev:b[1],Ac:b[2],TE:b[3],uZ:"http://static."+b[0],cF:m});break;case "current_question":fh={la:b[0],pe:b[1],Dq:b[2],xA:b[3],DX:b[4],Jm:b[5],kb:b[6],Gx:b[7],wY:b[8],xZ:b[9],PX:b[10],zb:b[11],GT:b[12],Sj:b[13],
oX:b[14],status:b[15]};break;case "my_answer":gh=b;break;case "current_question_owner":S.Sj=b;break;case "need_first_answer_guide":S.lM=b;break;case "bio":hh=b;break;case "current_topic":ih=b;break;case "current_people":jh=b;jh.kw=b[0];jh.id=b[3];break;case "current_list":kh=b;break;case "block_topic":lh=b;break;case "draft":mh=b.length?b:k;break;case "editing_queue":nh=b;break;case "sina_bind_info":b.length&&(th.id=b[0],th.name=b[1]);break;case "disabled_components":oh=b;break;case "comet_path":Bg=
b;break;case "enforce_realname":ph=b;break;case "action_ban":qh=b;break;case "permissions":rh=b,sh=function(b){return z.contains(rh,b)}}});fh&&(fh.ZE=m);oh||(oh=[]);navigator.userAgent.match(/iPad/i)&&(dh.cF=j,dh.Ac=j);dh.Po&&(document.domain=dh.Po);dh.ev&&(Bg="http://"+dh.ev+Bg);dh.Ac&&window.scrollTo(0,1);a.wh=function(b,c,d,e,g){if(!A&&(!D||!Eb("525")))return j;if(kb&&g)return vh(b);if(g&&!e||!d&&(17==c||18==c||kb&&91==c))return m;if(D&&e&&d)switch(b){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return m}if(A&&e&&c==b)return m;switch(b){case 13:return!(A&&Gb(9));case 27:return!D}return vh(b)},a.vh=function(b){if(48<=b&&57>=b||96<=b&&106>=b||65<=b&&90>=b||D&&0==b)return j;switch(b){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;
default:return m}},a.xh=function(b){switch(b){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return b}};a.yh=function(b){var c=b.offsetLeft,d=b.offsetParent;!d&&"fixed"==Zf(b)&&(d=Sb(b).documentElement);if(!d)return c;if(B)var e=hg(d),c=c+e.left;else Gb(8)&&(e=hg(d),c-=e.left);return fg(d)?d.clientWidth-(c+b.offsetWidth):c};a.zh=function(b,c,d){M.call(this);this.target=b;this.handle=c||b;this.ps=d||new Rf(NaN,NaN,NaN,NaN);this.Ha=Sb(b);this.Q=new ne(this);N(this.handle,["touchstart","mousedown"],this.wm,m,this)};y(zh,Hd);a.Ah=A||B&&Eb("1.9.3");t=zh.prototype;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.Bt=0;t.Ct=0;t.Pi=0;t.Qi=0;t.ic=j;t.Ui=m;t.bx=0;t.SP=0;t.uO=m;t.ti=m;t.Gh=ca("ti");t.h=p("Q");t.CH=function(b){this.bx=Math.pow(b,2)};t.$a=ca("ic");
t.z=function(){zh.n.z.call(this);yd(this.handle,["touchstart","mousedown"],this.wm,m,this);this.Q.removeAll();Ah&&this.Ha.releaseCapture();this.Q=this.handle=this.target=k};a.Bh=function(b){la(b.pf)||(b.pf=fg(b.target));return b.pf};
t.wm=function(b){var c="mousedown"==b.type;if(this.ic&&!this.Ui&&(!c||od(b))){Ch(b);if(0==this.bx)if(this.dispatchEvent(new Dh("start",this,b.clientX,b.clientY,b)))this.Ui=j,b.preventDefault();else return;else b.preventDefault();var c=this.Ha,d=c.documentElement,e=!Ah;this.Q.e(c,["touchmove","mousemove"],this.FN,e);this.Q.e(c,["touchend","mouseup"],this.cr,e);Ah?(d.setCapture(m),this.Q.e(d,"losecapture",this.cr)):this.Q.e(bc(c),"blur",this.cr);A&&this.uO&&this.Q.e(c,"dragstart",id);this.PS&&this.Q.e(this.PS,
"scroll",this.Dy,e);this.clientX=this.Bt=b.clientX;this.clientY=this.Ct=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;this.Pi=this.ti?yh(this.target):this.target.offsetLeft;this.Qi=this.target.offsetTop;this.Ry=Mc(Tb(this.Ha));this.SP=za()}else this.dispatchEvent("earlycancel")};
t.cr=function(b,c){this.Q.removeAll();Ah&&this.Ha.releaseCapture();if(this.Ui){Ch(b);this.Ui=m;var d=Eh(this,this.Pi),e=Fh(this,this.Qi);this.dispatchEvent(new Dh("end",this,b.clientX,b.clientY,b,d,e,c||"touchcancel"==b.type))}else this.dispatchEvent("earlycancel");("touchend"==b.type||"touchcancel"==b.type)&&b.preventDefault()};a.Ch=function(b){var c=b.type;"touchstart"==c||"touchmove"==c?b.B(b.Yb.targetTouches[0],b.currentTarget):("touchend"==c||"touchcancel"==c)&&b.B(b.Yb.changedTouches[0],b.currentTarget)};
t.FN=function(b){if(this.ic){Ch(b);var c=(this.ti&&Bh(this)?-1:1)*(b.clientX-this.clientX),d=b.clientY-this.clientY;this.clientX=b.clientX;this.clientY=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;if(!this.Ui){var e=this.Bt-this.clientX,g=this.Ct-this.clientY;if(e*e+g*g>this.bx)if(this.dispatchEvent(new Dh("start",this,b.clientX,b.clientY,b)))this.Ui=j;else{this.Ag||this.cr(b);return}}d=Gh(this,c,d);c=d.x;d=d.y;this.Ui&&this.dispatchEvent(new Dh("beforedrag",this,b.clientX,b.clientY,b,
c,d))&&(Hh(this,b,c,d),b.preventDefault())}};a.Gh=function(b,c,d){var e=Mc(Tb(b.Ha)),c=c+(e.x-b.Ry.x),d=d+(e.y-b.Ry.y);b.Ry=e;b.Pi+=c;b.Qi+=d;c=Eh(b,b.Pi);b=Fh(b,b.Qi);return new Nb(c,b)};t.Dy=function(b){var c=Gh(this,0,0);b.clientX=this.clientX;b.clientY=this.clientY;Hh(this,b,c.x,c.y)};
a.Hh=function(b,c,d,e){b.uv(d,e);b.dispatchEvent(new Dh("drag",b,c.clientX,c.clientY,c,d,e))},a.Eh=function(b,c){var d=b.ps,e=!isNaN(d.left)?d.left:k,d=!isNaN(d.width)?d.width:0;return Math.min(e!=k?e+d:Infinity,Math.max(e!=k?e:-Infinity,c))},a.Fh=function(b,c){var d=b.ps,e=!isNaN(d.top)?d.top:k,d=!isNaN(d.height)?d.height:0;return Math.min(e!=k?e+d:Infinity,Math.max(e!=k?e:-Infinity,c))};
t.uv=function(b,c){this.ti&&Bh(this)?this.target.style.right=b+"px":this.target.style.left=b+"px";this.target.style.top=c+"px"};a.Dh=function(b,c,d,e,g,h,l,n){hd.call(this,b);this.clientX=d;this.clientY=e;this.ZB=g;this.left=la(h)?h:c.Pi;this.top=la(l)?l:c.Qi;this.Yq=c;this.RX=!!n};y(Dh,hd);a.Ih=function(b){M.call(this);this.g=b;b=A?"focusout":"blur";this.wP=N(this.g,A?"focusin":"focus",this,!A);this.xP=N(this.g,b,this,!A)};y(Ih,Hd);Ih.prototype.handleEvent=function(b){var c=new ld(b.Yb);c.type="focusin"==b.type||"focus"==b.type?"focusin":"focusout";this.dispatchEvent(c)};Ih.prototype.z=function(){Ih.n.z.call(this);Ad(this.wP);Ad(this.xP);delete this.g};a.Jh=function(){};ia(Jh);Jh.prototype.ry=0;a.Kh=function(b){return":"+(b.ry++).toString(36)};Jh.P();a.T=function(b){M.call(this);this.ca=b||Tb();this.pf=Lh};y(T,Hd);T.prototype.tO=Jh.P();a.Lh=k,a.Mh=function(b,c){switch(b){case 1:return c?"disable":"enable";case 2:return c?"highlight":"unhighlight";case 4:return c?"activate":"deactivate";case 8:return c?"select":"unselect";case 16:return c?"check":"uncheck";case 32:return c?"focus":"blur";case 64:return c?"open":"close"}f(Error("Invalid component state"))};t=T.prototype;t.Ad=k;t.Aa=m;t.g=k;t.pf=k;t.my=k;t.Wa=k;t.Wb=k;t.We=k;t.EI=m;
t.Ud=function(){return this.Ad||(this.Ad=Kh(this.tO))};a.Nh=function(b,c){b.Wa&&b.Wa.We&&(F.remove(b.Wa.We,b.Ad),F.add(b.Wa.We,c,b));b.Ad=c};t.m=p("g");t.aj=function(b){return this.g?this.ca.aj(b,this.g):k};t.h=function(){return this.ul||(this.ul=new ne(this))};a.Ph=function(b,c){b==c&&f(Error("Unable to set parent component"));c&&(b.Wa&&b.Ad&&Oh(b.Wa,b.Ad)&&b.Wa!=c)&&f(Error("Unable to set parent component"));b.Wa=c;T.n.rt.call(b,c)};t.getParent=p("Wa");
t.rt=function(b){this.Wa&&this.Wa!=b&&f(Error("Method not supported"));T.n.rt.call(this,b)};t.L=p("ca");t.w=function(){this.g=this.ca.createElement("div")};t.Y=function(b){this.dt(b)};t.dt=function(b,c){this.Aa&&f(Error("Component already rendered"));this.g||this.w();b?b.insertBefore(this.g,c||k):this.ca.Da().body.appendChild(this.g);(!this.Wa||this.Wa.Aa)&&this.C()};
t.o=function(b){this.Aa&&f(Error("Component already rendered"));if(b&&this.vc(b)){this.EI=j;if(!this.ca||this.ca.Da()!=Sb(b))this.ca=Tb(b);this.ea(b);this.C()}else f(Error("Invalid element to decorate"))};t.vc=s(j);t.ea=ca("g");t.C=function(){this.Aa=j;Qh(this,function(b){!b.Aa&&b.m()&&b.C()})};t.jb=function(){Qh(this,function(b){b.Aa&&b.jb()});this.ul&&this.ul.removeAll();this.Aa=m};
t.z=function(){T.n.z.call(this);this.Aa&&this.jb();this.ul&&(this.ul.H(),delete this.ul);Qh(this,function(b){b.H()});!this.EI&&this.g&&L(this.g);this.Wa=this.my=this.g=this.We=this.Wb=k};t.J=function(b,c){this.Dk(b,Rh(this),c)};
t.Dk=function(b,c,d){b.Aa&&(d||!this.Aa)&&f(Error("Component already rendered"));(0>c||c>Rh(this))&&f(Error("Child component index out of bounds"));if(!this.We||!this.Wb)this.We={},this.Wb=[];b.getParent()==this?(F.set(this.We,b.Ud(),b),z.remove(this.Wb,b)):F.add(this.We,b.Ud(),b);Ph(b,this);z.Tn(this.Wb,b,c);b.Aa&&this.Aa&&b.getParent()==this?(d=this.Z(),d.insertBefore(b.m(),d.childNodes[c]||k)):d?(this.g||this.w(),c=Sh(this,c+1),b.dt(this.Z(),c?c.g:k)):this.Aa&&(!b.Aa&&b.g&&b.g.parentNode&&1==b.g.parentNode.nodeType)&&
b.C()};t.Z=p("g");t.Cd=function(){this.pf==k&&(this.pf=fg(this.Aa?this.g:this.ca.Da().body));return this.pf};t.li=function(b){this.Aa&&f(Error("Component already rendered"));this.pf=b};a.Rh=function(b){return b.Wb?b.Wb.length:0},a.Oh=function(b,c){return b.We&&c?F.get(b.We,c)||k:k},a.Sh=function(b,c){return b.Wb?b.Wb[c]||k:k},a.Qh=function(b,c,d){b.Wb&&z.forEach(b.Wb,c,d)};
t.removeChild=function(b,c){if(b){var d=oa(b)?b:b.Ud(),b=Oh(this,d);d&&b&&(F.remove(this.We,d),z.remove(this.Wb,b),c&&(b.jb(),b.g&&L(b.g)),Ph(b,k))}b||f(Error("Child is not in parent component"));return b};t.bt=function(b){for(var c=[];this.Wb&&0!=this.Wb.length;)c.push(this.removeChild(Sh(this,0),b));return c};a.Th=function(b,c){M.call(this);this.fa=new ne(this);this.Yg(b||k);c&&(this.qi=c)};y(Th,Hd);t=Th.prototype;t.g=k;t.Jk=j;t.NB=k;t.wj=m;t.eT=m;t.Rx=-1;t.Px=-1;t.wE=m;t.cM=j;t.qi="toggle_display";t.Oh=p("qi");t.m=p("g");t.Yg=function(b){Uh(this);this.g=b};t.Vo=u(58);a.Uh=function(b){b.wj&&f(Error("Can not change this state of the popup while showing."))};t.T=p("wj");t.Hx=u(51);t.F=function(b){this.gp&&this.gp.stop();this.Ln&&this.Ln.stop();b?this.Sz():this.Cl()};t.ma=ha;
t.Sz=function(){if(!this.wj&&this.wo()){this.g||f(Error("Caller must call setElement before trying to show the popup"));this.ma();var b=Sb(this.g);this.wE&&this.fa.e(b,"keydown",this.sQ,j);if(this.Jk)if(this.fa.e(b,"mousedown",this.iG,j),A){var c;try{c=b.activeElement}catch(d){}for(;c&&"IFRAME"==c.nodeName;){try{var e=c.contentDocument||c.contentWindow.document}catch(g){break}b=e;c=b.activeElement}this.fa.e(b,"mousedown",this.iG,j);this.fa.e(b,"deactivate",this.gG)}else this.fa.e(b,"blur",this.gG);
"toggle_display"==this.qi?(this.g.style.visibility="visible",Q(this.g,j)):"move_offscreen"==this.qi&&this.ma();this.wj=j;this.gp?(xd(this.gp,"end",this.Kj,m,this),this.gp.play()):this.Kj()}};t.Cl=function(b){if(!this.wj||!this.dispatchEvent({type:"beforehide",target:b}))return m;this.fa&&this.fa.removeAll();this.wj=m;this.Px=za();this.Ln?(xd(this.Ln,"end",xa(this.wC,b),m,this),this.Ln.play()):this.wC(b);return j};
t.wC=function(b){"toggle_display"==this.qi?this.eT?Ld(this.xE,0,this):this.xE():"move_offscreen"==this.qi&&(this.g.style.top="-10000px");this.Ij(b)};t.xE=function(){this.g.style.visibility="hidden";Q(this.g,m)};t.wo=function(){return this.dispatchEvent("beforeshow")};t.Kj=function(){this.Rx=za();this.Px=-1;this.dispatchEvent("show")};t.Ij=function(b){this.dispatchEvent({type:"hide",target:b})};t.iG=function(b){b=b.target;!tc(this.g,b)&&((!this.NB||tc(this.NB,b))&&!(150>za()-this.Rx))&&this.Cl(b)};
t.sQ=function(b){27==b.keyCode&&this.Cl(b.target)&&(b.preventDefault(),b.stopPropagation())};t.gG=function(b){if(this.cM){var c=Sb(this.g);if(A||rb){if(b=c.activeElement,!b||tc(this.g,b)||"BODY"==b.tagName)return}else if(b.target!=c)return;150>za()-this.Rx||this.Cl()}};t.z=function(){Th.n.z.call(this);this.fa.H();Uc(this.gp);Uc(this.Ln);delete this.g;delete this.fa};a.Vh=function(b,c){T.call(this,c);this.wU=!!b};y(Vh,T);t=Vh.prototype;t.cw=k;t.lb=m;t.Rc=k;t.Fc=k;t.uf=k;t.M=s("goog-modalpopup");t.yn=p("Rc");t.w=function(){Vh.n.w.call(this);var b=this.m();E.add(b,this.M());Ec(b,j);Q(b,m);this.cy();Wh(this)};
t.cy=function(){this.wU&&!this.Fc&&(this.Fc=this.L().w("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'}),this.Fc.className=this.M()+"-bg",Q(this.Fc,m),rg(this.Fc,0));this.Rc||(this.Rc=this.L().w("div",this.M()+"-bg"),Q(this.Rc,m))};a.Wh=function(b){b.uf||(b.uf=b.L().createElement("span"),Q(b.uf,m),Ec(b.uf,j),b.uf.style.position="absolute")};t.vc=function(b){return!!b&&"DIV"==b.tagName};
t.ea=function(b){Vh.n.ea.call(this,b);E.add(this.m(),this.M());this.cy();Wh(this);Q(this.m(),m)};t.C=function(){this.Fc&&kc(this.Fc,this.m());kc(this.Rc,this.m());Vh.n.C.call(this);lc(this.uf,this.m());this.cw=new Ih(this.L().Da());this.h().e(this.cw,"focusin",this.xQ)};t.jb=function(){this.T()&&this.F(m);Uc(this.cw);Vh.n.jb.call(this);L(this.Fc);L(this.Rc);L(this.uf)};
t.F=function(b){b!=this.lb&&(this.Xl&&this.Xl.stop(),this.Qm&&this.Qm.stop(),this.Wl&&this.Wl.stop(),this.Pm&&this.Pm.stop(),b?this.Sz():this.Cl())};t.Sz=function(){this.dispatchEvent("beforeshow")&&(this.oz(),this.ma(),this.h().e(this.L().Sa(),"resize",this.oz),Xh(this,j),this.focus(),this.lb=j,this.Xl&&this.Qm?(xd(this.Xl,"end",this.ci,m,this),this.Qm.play(),this.Xl.play()):this.ci())};
t.Cl=function(){this.dispatchEvent("beforehide")&&(this.h().Fa(this.L().Sa(),"resize",this.oz),this.lb=m,this.Wl&&this.Pm?(xd(this.Wl,"end",this.Pl,m,this),this.Pm.play(),this.Wl.play()):this.Pl())};a.Xh=function(b,c){b.Fc&&Q(b.Fc,c);b.Rc&&Q(b.Rc,c);Q(b.m(),c);Q(b.uf,c)};t.ci=function(){this.dispatchEvent("show")};t.Pl=function(){Xh(this,m);this.dispatchEvent("hide")};t.T=p("lb");t.focus=function(){this.vD()};
t.oz=function(){this.Fc&&Q(this.Fc,m);this.Rc&&Q(this.Rc,m);var b=this.L().Da(),c=Zb(bc(b)||window),d=Math.max(c.width,Math.max(b.body.scrollWidth,b.documentElement.scrollWidth)),b=Math.max(c.height,Math.max(b.body.scrollHeight,b.documentElement.scrollHeight));this.Fc&&(Q(this.Fc,j),ng(this.Fc,d,b));this.Rc&&(Q(this.Rc,j),ng(this.Rc,d,b))};
t.ma=function(){var b=this.L().Da(),c=bc(b)||window;if("fixed"==Zf(this.m()))var d=b=0;else d=Mc(this.L()),b=d.x,d=d.y;var e=pg(this.m()),c=Zb(c),b=Math.max(b+c.width/2-e.width/2,0),d=Math.max(d+c.height/2-e.height/2,0);ag(this.m(),b,d);ag(this.uf,b,d)};t.xQ=function(b){b.target==this.uf&&Ld(this.vD,0,this)};t.vD=function(){try{A&&this.L().Da().body.focus(),this.m().focus()}catch(b){}};t.z=function(){Uc(this.Xl);this.Xl=k;Uc(this.Wl);this.Wl=k;Uc(this.Qm);this.Qm=k;Uc(this.Pm);this.Pm=k;Vh.n.z.call(this)};a.Yh=function(b,c,d){Vh.call(this,c,d);this.Gc=b||"modal-dialog"};y(Yh,Vh);t=Yh.prototype;t.hM=j;t.Kn=j;t.ly=j;t.dD=j;t.lq=0.5;t.Nt="";t.wc="";t.Eb=k;t.nn=m;t.Dc=k;t.yf=k;t.Mt=k;t.xf=k;t.ve=k;t.fc=k;t.Pj=Wc.ZI;t.M=p("Gc");t.ab=function(b){this.Nt=b;this.yf&&yc(this.yf,b)};t.Ja=function(b){this.wc=b;this.ve&&(this.ve.innerHTML=b)};t.eb=p("wc");t.ap=u(18);a.Zh=function(b){b.m()||b.Y()};t.Z=function(){Zh(this);return this.ve};a.$h=function(b){Zh(b);return b.Dc};t.nw=function(){Zh(this);return this.fc};
a.ai=function(b){Zh(b);return b.m()};t.yn=function(){Zh(this);return Yh.n.yn.call(this)};
a.bi=function(b,c){b.lq=c;if(b.m()){var d=b.yn();d&&rg(d,b.lq)}},a.di=function(b,c){c!=b.ly&&ci(b,c)},a.ci=function(b,c){b.ly=c;if(b.Aa){var d=b.L(),e=b.yn(),g=b.Fc;c?(g&&d.Un(g,b.m()),d.Un(e,b.m())):(d.removeNode(g),d.removeNode(e))}},a.ei=function(b,c){b.m()&&E.enable(b.Dc,b.Gc+"-title-draggable",c);c&&!b.Eb?(b.Eb=new zh(b.m(),b.Dc),E.add(b.Dc,b.Gc+"-title-draggable"),N(b.Eb,"start",b.XS,m,b)):!c&&b.Eb&&(b.Eb.H(),b.Eb=k)};
t.w=function(){Yh.n.w.call(this);var b=this.m(),c=this.L();this.Dc=c.w("div",{className:this.Gc+"-title",id:this.Ud()},this.yf=c.w("span",this.Gc+"-title-text",this.Nt),this.xf=c.w("span",this.Gc+"-title-close"));ic(b,this.Dc,this.ve=c.w("div",this.Gc+"-content"),this.fc=c.w("div",this.Gc+"-buttons"));this.Mt=this.Dc.id;Nc(b,this.Pj);Oc(b,"labelledby",this.Mt||"");this.wc&&(this.ve.innerHTML=this.wc);Q(this.xf,this.Kn);this.uc&&(b=this.uc,b.g=this.fc,b.Y());Q(this.fc,!!this.uc);bi(this,this.lq)};
t.ea=function(b){Yh.n.ea.call(this,b);b=this.Gc+"-content";(this.ve=Vb(k,b,this.m())[0])?this.wc=this.ve.innerHTML:(this.ve=this.L().w("div",b),this.wc&&(this.ve.innerHTML=this.wc),this.m().appendChild(this.ve));var b=this.Gc+"-title",c=this.Gc+"-title-text",d=this.Gc+"-title-close";(this.Dc=Vb(k,b,this.m())[0])?(this.yf=Vb(k,c,this.Dc)[0],this.xf=Vb(k,d,this.Dc)[0],this.Dc.id||(this.Dc.id=this.Ud())):(this.Dc=this.L().w("div",{className:b,id:this.Ud()}),this.m().insertBefore(this.Dc,this.ve));this.Mt=
this.Dc.id;this.yf?this.Nt=Gc(this.yf):(this.yf=this.L().w("span",c,this.Nt),this.Dc.appendChild(this.yf));Oc(this.m(),"labelledby",this.Mt||"");this.xf||(this.xf=this.L().w("span",d),this.Dc.appendChild(this.xf));Q(this.xf,this.Kn);b=this.Gc+"-buttons";(this.fc=Vb(k,b,this.m())[0])?(this.uc=new fi(this.L()),this.uc.o(this.fc)):(this.fc=this.L().w("div",b),this.m().appendChild(this.fc),this.uc&&(b=this.uc,b.g=this.fc,b.Y()),Q(this.fc,!!this.uc));bi(this,this.lq)};
t.C=function(){Yh.n.C.call(this);this.h().e(this.m(),"keydown",this.Co).e(this.m(),"keypress",this.Co);this.h().e(this.fc,"click",this.kQ);ei(this,this.dD);this.h().e(this.xf,"click",this.hR);Nc(this.m(),this.Pj);""!==this.yf.id&&Oc(this.m(),"labelledby",this.yf.id);this.ly||ci(this,m)};t.jb=function(){this.T()&&this.F(m);ei(this,m);Yh.n.jb.call(this)};t.F=function(b){b!=this.T()&&(this.Aa||this.Y(),Yh.n.F.call(this,b))};t.ci=function(){Yh.n.ci.call(this);this.dispatchEvent(gi)};
t.Pl=function(){Yh.n.Pl.call(this);this.dispatchEvent(hi);this.nn&&this.H()};t.focus=function(){Yh.n.focus.call(this);if(this.uc){var b=this.uc.Rq;if(b)for(var c=this.L().Da(),d=this.fc.getElementsByTagName("button"),e=0,g;g=d[e];e++)if(g.name==b){try{if(D||rb){var h=c.createElement("input");h.style.cssText="position:fixed;width:0;height:0;left:0;top:0;";this.m().appendChild(h);h.focus();this.m().removeChild(h)}g.focus()}catch(l){}break}}};
t.XS=function(){var b=this.L().Da(),c=Zb(bc(b)||window),d=Math.max(b.body.scrollWidth,c.width),b=Math.max(b.body.scrollHeight,c.height),e=pg(this.m());"fixed"==Zf(this.m())?(c=new Rf(0,0,Math.max(0,c.width-e.width),Math.max(0,c.height-e.height)),this.Eb.ps=c||new Rf(NaN,NaN,NaN,NaN)):this.Eb.ps=new Rf(0,0,d-e.width,b-e.height)||new Rf(NaN,NaN,NaN,NaN)};t.hR=function(){if(this.Kn){var b=this.uc,c=b&&b.Wu;c?(b=b.get(c),this.dispatchEvent(new ii(c,b))&&this.F(m)):this.F(m)}};
t.qt=function(b){this.Kn=b;this.xf&&Q(this.xf,this.Kn)};t.z=function(){this.fc=this.xf=k;Yh.n.z.call(this)};a.ji=function(b,c){b.uc=c;if(b.fc){if(b.uc){var d=b.uc;d.g=b.fc;d.Y()}else b.fc.innerHTML="";Q(b.fc,!!b.uc)}};t.kQ=function(b){a:{for(b=b.target;b!=k&&b!=this.fc;){if("BUTTON"==b.tagName)break a;b=b.parentNode}b=k}if(b&&!b.disabled){var b=b.name,c=this.uc.get(b);this.dispatchEvent(new ii(b,c))&&this.F(m)}};
t.Co=function(b){var c=m,d=m,e=this.uc,g=b.target;if("keydown"==b.type)if(this.hM&&27==b.keyCode){var h=e&&e.Wu,g="SELECT"==g.tagName&&!g.disabled;h&&!g?(d=j,c=e.get(h),c=this.dispatchEvent(new ii(h,c))):g||(c=j)}else 9==b.keyCode&&(b.shiftKey&&g==this.m())&&(d=j);else if(13==b.keyCode){if("BUTTON"==g.tagName)h=g.name;else if(e){var l=e.Rq,n=l&&e.jd(l),g=("TEXTAREA"==g.tagName||"SELECT"==g.tagName||"A"==g.tagName)&&!g.disabled;n&&(!n.disabled&&!g)&&(h=l)}h&&e&&(d=j,c=this.dispatchEvent(new ii(h,String(e.get(h)))))}if(c||
d)b.stopPropagation(),b.preventDefault();c&&this.F(m)};a.ii=function(b,c){this.type=ki;this.key=b;this.caption=c};y(ii,hd);a.ki="dialogselect",a.hi="afterhide",a.gi="aftershow",a.fi=function(b){this.ca=b||Tb();Od.call(this)},a.li=void 0;y(fi,Od);t=fi.prototype;t.Gc="goog-buttonset";t.Rq=k;t.g=k;t.Wu=k;t.set=function(b,c,d,e){Od.prototype.set.call(this,b,c);d&&(this.Rq=b);e&&(this.Wu=b);return this};t.me=function(b,c,d){return this.set(b.key,b.caption,c,d)};
t.Y=function(){if(this.g){this.g.innerHTML="";var b=Tb(this.g);Md.forEach(this,function(c,d){var e=b.w("button",{name:d},c);d==this.Rq&&(e.className=this.Gc+"-default");this.g.appendChild(e)},this)}};t.o=function(b){if(b&&1==b.nodeType){this.g=b;for(var b=this.g.getElementsByTagName("button"),c=0,d,e,g;d=b[c];c++)if(e=d.name||d.id,g=Gc(d)||d.value,e){var h=0==c;this.set(e,g,h,d.name==mi);h&&E.add(d,this.Gc+"-default")}}};t.m=p("g");t.L=p("ca");
t.jd=function(b){for(var c=this.g.getElementsByTagName("BUTTON"),d=0,e;e=c[d];d++)if(e.name==b||e.id==b)return e;return k};a.mi="cancel",a.ni={iW:"ok",VI:mi,BJ:"yes",gW:"no",GW:"save",hV:"continue"},a.oi=x("确定"),a.pi=x("取消"),a.qi=x("Yes"),a.ri=x("No"),a.si=x("Save"),a.ti=x("Continue"),a.ui={key:"ok",caption:oi},a.vi={key:mi,caption:pi},a.wi={key:"yes",caption:qi},a.xi={key:"no",caption:ri},a.yi={key:"save",caption:si},a.zi={key:"continue",caption:ti};
"undefined"!=typeof document&&((new fi).me(ui,j,j),li=(new fi).me(vi,m,j).me(ui,j),(new fi).me(wi,j).me(xi,m,j),(new fi).me(wi).me(xi,j).me(vi,m,j),(new fi).me(zi).me(yi).me(vi,j,j));a.Ai=function(b,c,d){Yh.call(this,b,c,d)};y(Ai,Yh);t=Ai.prototype;t.GI=k;t.C=function(){var b=!Tg;this.dD=b;ei(this,b&&this.Aa);Ai.n.C.call(this);this.Jk&&Bi(this);this.ah(this.GI)};a.Bi=function(b){b.Jk&&b.h().e(b.Rc||b.Fc,"click",function(){this.Jk&&this.F(m)})};t.Vo=u(57);t.ma=function(){Ai.n.ma.call(this);if(!this.uM){var b=$(this.m()),c=$(window).scrollTop(),c=sb&&!Og?c:"-="+Math.min(b.offset().top-c,60)+"px";b.add(this.uf).css("top",c)}};
t.ah=function(b){if(this.g&&(this.Aa&&pa(b))&&(!sb||Og))this.g.style.width=$f(b,j),this.GI=b;oa(b)&&(this.g.style.width=b);return this};a.Ei=function(b,c,d,e){ra(b)?(e=d,d=c):b={title:b,content:c};qa(d)||(d=ha);var g=$.extend({},Ci,b),h=Di=Di||new Ai;(c=g.Gi.length)?(b=new fi,1<c?b.set(mi,g.Gi[0],m,j).set("yes",g.Gi[1],j):b.set("yes",g.Gi[0],j),ji(h,b),h.nw(),b.jd("yes").className="zg-btn-blue",b.jd(mi)&&(b.jd(mi).className="zg-link-btn zm-command-cancel")):ji(h,k);E.enable(ai(h),"with-button",!!c);Cd(h);h.on(hi,function(){E.remove(h.m(),g.className)}).on(ki,function(b){return d.call(e||h,"yes"===b.key)});E.add(ai(h),g.className);
h.ab(g.title);di(h,g.NF);h.Ja(g.content);h.F(g.open);return h},a.Di=void 0,a.Ci={open:j,NF:m,title:"确认",content:"",className:"",Gi:["取消","确认"]},a.Fi=function(b,c,d){Ei({title:b,content:c,Gi:["确定"],className:d})},a.U=function(b,c){if(b){var d=Ei({title:"提示信息",content:Oa(b),Gi:[],className:"no-close-button"});setTimeout(function(){d.F(m)},c||3E3)}};a.V=function(b){xe.call(this);this.lT=!!b;this.headers.set("AuthToken",ch.cY);this.headers.set("X-Requested-With","XMLHttpRequest");this.on("complete",this.YM,m,this)},a.Gi=void 0;y(V,xe);a.Hi=function(b,c,d,e){var g=new V;if(c)g.on("complete",c);g.ajax(b,e,d)},a.Ii=/#.*$/,a.Ji={"text/html":"html","text/plain":"text","application/json":"json","application/javascript":"script","application/x-javascript":"script"},a.Ki=[];
V.prototype.YM=function(){Q(Li(),m);var b=this.getResponseHeader("content-type");if(b){var c=Ji[b.split(";")[0].toLowerCase()];if(c&&Ki.length){var d=He(this);z.forEach(Ki,function(b){b.GU===c&&b.filter("json"===c?JSON.parse(d):d)},this)}}};V.prototype.ajax=function(b,c,d){b=encodeURI(decodeURI(b));b=b.replace(Ii,"");if(!this.ia){this.lT&&Q(Li(),j);d=d||"POST";if("POST"===d.toUpperCase()){var e=Of.get("_xsrf");e&&(c=(c?c+"&_xsrf=":"_xsrf=")+e)}return this.send(b,d,c,this.headers)}};
a.Li=function(){if(Gi)return Gi;var b=K("div",{id:"zh-global-spinner",style:"display:none",innerHTML:"加载中…"});document.body.appendChild(b);return Gi=b};a.Mi=function(){M.call(this)};y(Mi,Hd);Mi.prototype.h=function(){return this.Qh||(this.Qh=new ne(this))};a.Ni=new Mi;Hd.prototype.on=function(){Hd.prototype.addEventListener.apply(this,arguments);return this};Hd.prototype.off=function(){Hd.prototype.removeEventListener.apply(this,arguments);return this};Hd.prototype.V=Hd.prototype.dispatchEvent;a.Oi=function(){};a.Pi=function(){};y(Pi,Oi);Pi.prototype.Va=function(){var b=0;O.forEach(this.ed(j),function(){b++});return b};Pi.prototype.clear=function(){var b=O.toArray(this.ed(j)),c=this;z.forEach(b,function(b){c.remove(b)})};a.Qi=function(b){this.gg=b};y(Qi,Pi);t=Qi.prototype;t.Zr=function(){try{return!!this.gg&&!!this.gg.getItem}catch(b){}return m};t.set=function(b,c){try{this.gg.setItem(b,c)}catch(d){f("Storage mechanism: Quota exceeded")}};t.get=function(b){b=this.gg.getItem(b);!oa(b)&&b!==k&&f("Storage mechanism: Invalid value was encountered");return b};t.remove=function(b){this.gg.removeItem(b)};t.Va=function(){return this.gg.length};
t.ed=function(b){var c=0,d=this.gg,e=new Nd;e.next=function(){c>=d.length&&f(O.bb);var e=d.key(c++);if(b)return e;e=d.getItem(e);oa(e)||f("Storage mechanism: Invalid value was encountered");return e};return e};t.clear=function(){this.gg.clear()};a.Ri=function(){var b=k;try{b=window.localStorage||k}catch(c){}this.gg=b};y(Ri,Qi);a.Si=function(){var b=k;try{b=window.sessionStorage||k}catch(c){}this.gg=b};y(Si,Qi);a.Ui=function(b,c){if(A&&!Gb(9)){Ti||(Ti=new Od);this.sd=Ti.get(b);this.sd||(c?this.sd=document.getElementById(c):(this.sd=document.createElement("userdata"),this.sd.addBehavior("#default#userData"),document.body.appendChild(this.sd)),Ti.set(b,this.sd));this.fA=b;try{this.sd.load(this.fA)}catch(d){this.sd=k}}};y(Ui,Pi);a.Vi={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},a.Ti=k;t=Ui.prototype;t.sd=k;t.fA=k;
a.Wi=function(b){return"_"+encodeURIComponent(b).replace(/[.!~*'()%]/g,function(b){return Vi[b]})};t.Zr=function(){return!!this.sd};t.set=function(b,c){this.sd.setAttribute(Wi(b),c);Xi(this)};t.get=function(b){b=this.sd.getAttribute(Wi(b));!oa(b)&&b!==k&&f("Storage mechanism: Invalid value was encountered");return b};t.remove=function(b){this.sd.removeAttribute(Wi(b));Xi(this)};t.Va=function(){return Yi(this).attributes.length};
t.ed=function(b){var c=0,d=Yi(this).attributes,e=new Nd;e.next=function(){c>=d.length&&f(O.bb);var e=d[c++];if(b)return decodeURIComponent(e.nodeName.replace(/\./g,"%")).substr(1);e=e.nodeValue;oa(e)||f("Storage mechanism: Invalid value was encountered");return e};return e};t.clear=function(){for(var b=Yi(this),c=b.attributes.length;0<c;c--)b.removeAttribute(b.attributes[c-1].nodeName);Xi(this)};a.Xi=function(b){try{b.sd.save(b.fA)}catch(c){f("Storage mechanism: Quota exceeded")}},a.Yi=function(b){return b.sd.XMLDocument.documentElement};a.Zi=function(b,c){this.Ll=b;this.Qj=c+"::"};y(Zi,Pi);t=Zi.prototype;t.Ll=k;t.Qj="";t.set=function(b,c){this.Ll.set(this.Qj+b,c)};t.get=function(b){return this.Ll.get(this.Qj+b)};t.remove=function(b){this.Ll.remove(this.Qj+b)};t.ed=function(b){var c=this.Ll.ed(j),d=this,e=new Nd;e.next=function(){for(var e=c.next();e.substr(0,d.Qj.length)!=d.Qj;)e=c.next();return b?e.substr(d.Qj.length):d.Ll.get(e)};return e};a.$i={wJ:"UserDataSharedStore",create:function(b){return $i.vL(b)||$i.wL(b)},vL:function(b){var c=new Ri;return c.Zr()?b?new Zi(c,b):c:k},KX:function(b){var c=new Si;return c.Zr()?b?new Zi(c,b):c:k},wL:function(b){b=new Ui(b||$i.wJ);return b.Zr()?b:k}};a.aj={};ya(aj,$i);aj.create=function(b){var c=$i.create(b);c.ce=function(b,e){try{c.set(b,e)}catch(g){}};return c};a.bj=aj.create();a.dj=function(){var b=[];$(".shameimaru-placeholder").each(function(){var c=$(this);b.push($.get("/node/"+c.data("class"),{params:c.data("params")},function(b){var e=$(b);c.replaceWith(e);$(".shameimaru-close",e).click(function(b){b.preventDefault();$.post("/shameimaru/close",e.data());cj(e[0],j)})}))});$.when.apply(this,b).then(function(){Ni.dispatchEvent("alladloaded")})};a.wf=function(b,c){var d;b instanceof wf?(this.Ee=la(c)?c:b.Ee,ej(this,b.ii),fj(this,b.Fp),gj(this,b.Ti),hj(this,b.Yl),ij(this,b.$f),jj(this,b.Kc().clone()),kj(this,b.xn)):b&&(d=String(b).match(we))?(this.Ee=!!c,ej(this,d[1]||"",j),fj(this,d[2]||"",j),gj(this,d[3]||"",j),hj(this,d[4]),ij(this,d[5]||"",j),jj(this,d[6]||"",j),kj(this,d[7]||"",j)):(this.Ee=!!c,this.Gd=new lj(k,0,this.Ee))};t=wf.prototype;t.ii="";t.Fp="";t.Ti="";t.Yl=k;t.$f="";t.xn="";t.gP=m;t.Ee=m;
t.toString=function(){var b=[],c=this.ii;c&&b.push(mj(c,nj),":");if(c=this.Ti){b.push("//");var d=this.Fp;d&&b.push(mj(d,nj),"@");b.push(encodeURIComponent(String(c)));c=this.Yl;c!=k&&b.push(":",String(c))}if(c=this.$f)this.Ti&&"/"!=c.charAt(0)&&b.push("/"),b.push(mj(c,"/"==c.charAt(0)?oj:pj));(c=this.Gd.toString())&&b.push("?",c);(c=this.xn)&&b.push("#",mj(c,qj));return b.join("")};
t.resolve=function(b){var c=this.clone(),d=!!b.ii;d?ej(c,b.ii):d=!!b.Fp;d?fj(c,b.Fp):d=!!b.Ti;d?gj(c,b.Ti):d=b.Yl!=k;var e=b.$f;if(d)hj(c,b.Yl);else if(d=!!b.$f){if("/"!=e.charAt(0))if(this.Ti&&!this.$f)e="/"+e;else{var g=c.$f.lastIndexOf("/");-1!=g&&(e=c.$f.substr(0,g+1)+e)}g=e;if(".."==g||"."==g)e="";else if(!Xa(g,"./")&&!Xa(g,"/."))e=g;else{for(var e=Ea(g,"/"),g=g.split("/"),h=[],l=0;l<g.length;){var n=g[l++];"."==n?e&&l==g.length&&h.push(""):".."==n?((1<h.length||1==h.length&&""!=h[0])&&h.pop(),
e&&l==g.length&&h.push("")):(h.push(n),e=j)}e=h.join("/")}}d?ij(c,e):d=""!==b.Gd.toString();d?jj(c,b.Gd.toString()?decodeURIComponent(b.Gd.toString()):""):d=!!b.xn;d&&kj(c,b.xn);return c};t.clone=function(){return new wf(this)};
a.ej=function(b,c,d){rj(b);b.ii=d?c?decodeURIComponent(c):"":c;b.ii&&(b.ii=b.ii.replace(/:$/,""))},a.fj=function(b,c,d){rj(b);b.Fp=d?c?decodeURIComponent(c):"":c},a.gj=function(b,c,d){rj(b);b.Ti=d?c?decodeURIComponent(c):"":c},a.hj=function(b,c){rj(b);c?(c=Number(c),(isNaN(c)||0>c)&&f(Error("Bad port number "+c)),b.Yl=c):b.Yl=k},a.vf=function(b){return b.$f},a.ij=function(b,c,d){rj(b);b.$f=d?c?decodeURIComponent(c):"":c},a.jj=function(b,c,d){rj(b);c instanceof lj?(b.Gd=c,b.Gd.Fz(b.Ee)):(d||(c=mj(c,
sj)),b.Gd=new lj(c,0,b.Ee))};t.Kc=p("Gd");a.kj=function(b,c,d){rj(b);b.xn=d?c?decodeURIComponent(c):"":c},a.rj=function(b){b.gP&&f(Error("Tried to modify a read-only Uri"))};t.Fz=function(b){this.Ee=b;this.Gd&&this.Gd.Fz(b);return this};
a.mj=function(b,c){return oa(b)?encodeURI(b).replace(c,tj):k},a.tj=function(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)},a.nj=/[#\/\?@]/g,a.pj=/[\#\?:]/g,a.oj=/[\#\?]/g,a.sj=/[\#\?@]/g,a.qj=/#/g,a.lj=function(b,c,d){this.Qd=b||k;this.Ee=!!d},a.vj=function(b){if(!b.Jb&&(b.Jb=new Od,b.ga=0,b.Qd))for(var c=b.Qd.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),g=k,h=k;0<=e?(g=c[d].substring(0,e),h=c[d].substring(e+1)):g=c[d];g=decodeURIComponent(g.replace(/\+/g," "));
g=uj(b,g);b.add(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}};t=lj.prototype;t.Jb=k;t.ga=k;t.Va=function(){vj(this);return this.ga};t.add=function(b,c){vj(this);this.Qd=k;var b=uj(this,b),d=this.Jb.get(b);d||this.Jb.set(b,d=[]);d.push(c);this.ga++;return this};t.remove=function(b){vj(this);b=uj(this,b);return this.Jb.Ld(b)?(this.Qd=k,this.ga-=this.Jb.get(b).length,this.Jb.remove(b)):m};t.clear=function(){this.Jb=this.Qd=k;this.ga=0};t.Ib=function(){vj(this);return 0==this.ga};
t.Ld=function(b){vj(this);b=uj(this,b);return this.Jb.Ld(b)};t.vg=function(b){var c=this.La();return z.contains(c,b)};t.Gb=function(){vj(this);for(var b=this.Jb.La(),c=this.Jb.Gb(),d=[],e=0;e<c.length;e++)for(var g=b[e],h=0;h<g.length;h++)d.push(c[e]);return d};t.La=function(b){vj(this);var c=[];if(b)this.Ld(b)&&(c=z.concat(c,this.Jb.get(uj(this,b))));else for(var b=this.Jb.La(),d=0;d<b.length;d++)c=z.concat(c,b[d]);return c};
t.set=function(b,c){vj(this);this.Qd=k;b=uj(this,b);this.Ld(b)&&(this.ga-=this.Jb.get(b).length);this.Jb.set(b,[c]);this.ga++;return this};t.get=function(b,c){var d=b?this.La(b):[];return 0<d.length?String(d[0]):c};t.toString=function(){if(this.Qd)return this.Qd;if(!this.Jb)return"";for(var b=[],c=this.Jb.Gb(),d=0;d<c.length;d++)for(var e=c[d],g=encodeURIComponent(String(e)),e=this.La(e),h=0;h<e.length;h++){var l=g;""!==e[h]&&(l+="="+encodeURIComponent(String(e[h])));b.push(l)}return this.Qd=b.join("&")};
t.clone=function(){var b=new lj;b.Qd=this.Qd;this.Jb&&(b.Jb=this.Jb.clone(),b.ga=this.ga);return b};a.uj=function(b,c){var d=String(c);b.Ee&&(d=d.toLowerCase());return d};t.Fz=function(b){b&&!this.Ee&&(vj(this),this.Qd=k,Md.forEach(this.Jb,function(b,d){var e=d.toLowerCase();d!=e&&(this.remove(d),this.remove(e),0<b.length&&(this.Qd=k,this.Jb.set(uj(this,e),z.clone(b)),this.ga+=b.length))},this));this.Ee=b};
t.extend=function(b){for(var c=0;c<arguments.length;c++)Md.forEach(arguments[c],function(b,c){this.add(c,b)},this)};a.wj=function(b){var c=b.Qc;c.category&&c.action&&W(c.category,b.type.replace("!","")+"_"+c.action,c.label,c.value)},a.W=function(b,c,d,e,g){window._gaq||(window._gaq=[]);"feed"===b&&Xa(window.location.href,"topstory")&&(b="topstory");var h=$("#zh-question-list");"feed"===b&&h.length&&"topstory"===h.attr("data-feedtype")&&(b="topstory");d&&(d=""+d);e&&(e=parseInt(e,10));window._gaq.push(["_trackEvent",b,c,d,e,!!g]);Cg&&window.console&&console.log("trackEvent(new)",z.toArray(arguments))};a.yj=function(){M.call(this);this.aa=xj;this.sn=this.startTime=k};y(yj,Hd);a.xj=0;yj.prototype.Zh=function(){this.Nd("begin")};yj.prototype.ai=function(){this.Nd("end")};yj.prototype.Nd=function(b){this.dispatchEvent(b)};a.zj=function(b,c,d){M.call(this);this.Bj=b;this.Lg=c||0;this.fa=d;this.Nk=v(this.Bg,this)};y(zj,M);t=zj.prototype;t.Ad=0;t.z=function(){zj.n.z.call(this);this.stop();delete this.Bj;delete this.fa};t.start=function(b){this.stop();this.Ad=Ld(this.Nk,la(b)?b:this.Lg)};t.stop=function(){this.ac()&&Id.clearTimeout(this.Ad);this.Ad=0};t.fire=function(){this.stop();this.Bg()};t.ac=function(){return 0!=this.Ad};t.Bg=function(){this.Ad=0;this.Bj&&this.Bj.call(this.fa)};a.Aj={},a.Bj=k,a.Cj=function(b){b=ua(b);delete Aj[b];F.Ib(Aj)&&Bj&&Bj.stop()},a.Dj=function(){Bj||(Bj=new zj(function(){var b=za();F.forEach(Aj,function(d){d.rv(b)});F.Ib(Aj)||Dj()},20));var b=Bj;b.ac()||b.start()};a.Ej=function(b,c,d,e){yj.call(this);(!ma(b)||!ma(c))&&f(Error("Start and end parameters must be arrays"));b.length!=c.length&&f(Error("Start and end points must be the same length"));this.kp=b;this.eM=c;this.duration=d;this.mB=e;this.coords=[];this.ti=m};y(Ej,yj);t=Ej.prototype;t.Gh=ca("ti");t.BD=0;t.progress=0;t.Ox=k;
t.play=function(b){if(b||this.aa==xj)this.progress=0,this.coords=this.kp;else if(1==this.aa)return m;Cj(this);this.startTime=b=za();-1==this.aa&&(this.startTime-=this.duration*this.progress);this.sn=this.startTime+this.duration;this.Ox=this.startTime;this.progress||this.Zh();this.Nd("play");-1==this.aa&&this.Nd("resume");this.aa=1;var c=ua(this);c in Aj||(Aj[c]=this);Dj();this.rv(b);return j};t.stop=function(b){Cj(this);this.aa=xj;b&&(this.progress=1);Fj(this,this.progress);this.Nd("stop");this.ai()};
t.z=function(){this.aa==xj||this.stop(m);this.Nd("destroy");Ej.n.z.call(this)};t.rv=function(b){this.progress=(b-this.startTime)/(this.sn-this.startTime);1<=this.progress&&(this.progress=1);this.BD=1E3/(b-this.Ox);this.Ox=b;Fj(this,this.progress);1==this.progress?(this.aa=xj,Cj(this),this.Nd("finish"),this.ai()):1==this.aa&&this.uy()};a.Fj=function(b,c){qa(b.mB)&&(c=b.mB(c));b.coords=Array(b.kp.length);for(var d=0;d<b.kp.length;d++)b.coords[d]=(b.eM[d]-b.kp[d])*c+b.kp[d]};t.uy=function(){this.Nd("animate")};
t.Nd=function(b){this.dispatchEvent(new Gj(b,this))};a.Gj=function(b,c){hd.call(this,b);this.coords=c.coords;this.x=c.coords[0];this.y=c.coords[1];this.GZ=c.coords[2];this.duration=c.duration;this.progress=c.progress;this.dY=c.BD;this.state=c.aa;this.mX=c};y(Gj,hd);a.Hj=function(b,c,d,e,g){Ej.call(this,c,d,e,g);this.element=b};y(Hj,Ej);t=Hj.prototype;t.oh=ha;t.Cd=function(){la(this.pf)||(this.pf=fg(this.element));return this.pf};t.uy=function(){this.oh();Hj.n.uy.call(this)};t.ai=function(){this.oh();Hj.n.ai.call(this)};t.Zh=function(){this.oh();Hj.n.Zh.call(this)};a.Ij=function(b,c,d,e,g){(2!=c.length||2!=d.length)&&f(Error("Start and end points must be 2D"));Hj.apply(this,arguments)};y(Ij,Hj);
Ij.prototype.oh=function(){var b=this.ti&&this.Cd()?"right":"left";this.element.style[b]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};a.Jj=function(b,c,d,e,g){(2!=c.length||2!=d.length)&&f(Error("Start and end points must be 2D"));Hj.apply(this,arguments)};y(Jj,Hj);
Jj.prototype.oh=function(){if(this.ti){var b=this.element,c=Math.round(this.coords[0]),c=Math.max(c,0);b.scrollLeft=fg(b)?B?-c:!A||!Eb("8")?b.scrollWidth-c-b.clientWidth:c:c}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};a.Kj=function(b,c,d,e,g){Hj.call(this,b,[c],[d],e,g)};y(Kj,Hj);Kj.prototype.oh=function(){this.element.style.width=Math.round(this.coords[0])+"px"};a.Lj=function(b,c,d,e,g){Hj.call(this,b,[c],[d],e,g)};y(Lj,Hj);
Lj.prototype.oh=function(){this.element.style.height=Math.round(this.coords[0])+"px"};a.Mj=function(b,c,d,e,g){pa(c)&&(c=[c]);pa(d)&&(d=[d]);Hj.call(this,b,c,d,e,g);(1!=c.length||1!=d.length)&&f(Error("Start and end points must be 1D"))};y(Mj,Hj);Mj.prototype.oh=function(){rg(this.element,this.coords[0])};Mj.prototype.show=function(){this.element.style.display=""};Mj.prototype.hide=function(){this.element.style.display="none"};a.Nj=function(b,c,d){Mj.call(this,b,1,0,c,d)};y(Nj,Mj);
Nj.prototype.Zh=function(){this.show();Nj.n.Zh.call(this)};Nj.prototype.ai=function(){this.hide();Nj.n.ai.call(this)};a.Oj=function(b,c,d){Mj.call(this,b,0,1,c,d)};y(Oj,Mj);Oj.prototype.Zh=function(){this.show();Oj.n.Zh.call(this)};a.Pj=function(b,c,d,e,g){(3!=c.length||3!=d.length)&&f(Error("Start and end points must be 3D"));Hj.apply(this,arguments)};y(Pj,Hj);
Pj.prototype.oh=function(){for(var b=[],c=0;c<this.coords.length;c++)b[c]=Math.round(this.coords[c]);b="rgb("+b.join(",")+")";this.element.style.backgroundColor=b};a.Qj=function(b){return b*b*b},a.Rj=function(b){return 1-Math.pow(1-b,3)},a.Sj=function(b){return 3*b*b-2*b*b*b};a.Wj=function(b){var c=ua(b),d=Tj;return function(){var e=this||fa,e=e[Uj]||(e[Uj]={}),g=d(c,arguments);return e.hasOwnProperty(g)?e[g]:e[g]=b.apply(this,arguments)}},a.Uj="closure_memoize_cache_",a.Tj=function(b,c){for(var d=[b],e=c.length-1;0<=e;--e)d.push(typeof c[e],c[e]);return d.join("\x0B")};a.Xj=/^\/node\//;$.ajaxPrefilter(function(b,c){var d=c.data,e;if(d&&(e=d.params)&&"object"===$.type(e)&&Xj.test(c.url))d.params=$c(e),b.data=$.param(d)});
a.Yj=function(b,c){return $.post("/node/MemberFollowBaseV2",{method:c?"follow_member":"unfollow_member",params:{hash_id:b}})},a.Zj=function(b,c){return $.post("/node/QuestionFollowBaseV2",{method:c?"follow_question":"unfollow_question",params:{question_id:b}})},a.$j=function(b,c){return $.post(c?"/collection/follow":"/collection/unfollow",{favlist_id:b})},a.ak=function(b,c){return $.post("/node/TopicFollowBaseV2",{method:c?"follow_topic":"unfollow_topic",params:{topic_id:b}})},a.bk=function(b,c,d,
e){var g=k;e&&(d&&(d=$.proxy(d,e)),g&&(g=$.proxy(g,e)));$.get("/node/"+b,{params:c},function(b){b&&b.r?g&&g(b):d&&d(b)})};a.ck=function(b,c){return $.post("/node/ColumnFollowBaseV2",{method:c?"follow_column":"unfollow_column",params:{column_id:b}})};a.dk=function(b,c){return $.post("/roundtable/"+b,{action:c?"follow":"unfollow"})};a.ek=function(){this.Or=[];this.loaded=[];this.MG=[];this.Dr=m};ek.prototype.add=function(b){b&&!z.find(this.Or,function(c){return c===b})&&(this.Dr?b.src=b.getAttribute("data-source"):(this.Or.push(b),this.loaded.push(0)))};ek.prototype.B=function(){z.forEach(this.Or,function(b){this.MG.push(eg(b).y)},this);this.gC();N(window,"scroll",this.gC,m,this);this.Dr=j};
ek.prototype.TK=function(){var b=ac(document).y+1200;z.forEach(this.Or,function(c,d){!this.loaded[d]&&b>this.MG[d]&&(this.loaded[d]=1,c.src=c.getAttribute("data-source"))},this)};ek.prototype.gC=function(){this.hC&&clearTimeout(this.hC);this.hC=setTimeout(v(this.TK,this),100)};a.fk=new ek;fk.B();a.gk={hidden:"visibilitychange",msHidden:"msvisibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange"},a.hk=F.sD(gk,function(b,c){return c in document}),a.ik=gk[hk],a.jk=la(hk);a.kk={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"~",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"};a.nk=function(b){M.call(this);this.rm={};this.Pg={ik:[],time:0};this.KM=F.Bh(lk);this.OT=F.Bh(mk);this.CB=j;this.eK=this.hK=m;this.QP=j;this.Og=b;N(this.Og,"keydown",this.ff,m,this);kb&&(B&&Eb("1.8"))&&N(this.Og,"keyup",this.XD,m,this);lb&&!B&&(N(this.Og,"keypress",this.qE,m,this),N(this.Og,"keyup",this.rE,m,this))},a.ok=void 0;y(nk,Hd);
a.lk=[27,112,113,114,115,116,117,118,119,120,121,122,123,19],a.mk="color date datetime datetime-local email month number password search tel text time url week".split(" "),a.pk={pJ:"shortcut",oJ:"shortcut_"};t=nk.prototype;t.hS=function(b,c){qk(this.rm,rk(1,arguments),b)};t.nU=function(b){qk(this.rm,rk(0,arguments),k)};
a.rk=function(b,c){var d;if(oa(c[b])){d=c[b];d=d.replace(/[ +]*\+[ +]*/g,"+").replace(/[ ]+/g," ").toLowerCase();d=d.split(" ");for(var e=[],g,h=0;g=d[h];h++){var l=g.split("+"),n;g=0;for(var q,r=0;q=l[r];r++){switch(q){case "shift":g|=1;continue;case "ctrl":g|=2;continue;case "alt":g|=4;continue;case "meta":g|=8;continue}n=q;if(!ok){l={};q=i;for(q in kk)l[kk[q]]=q;ok=l}n=ok[n];break}e.push({keyCode:n,PF:g})}d=e}else{e=c;h=b;ma(c[b])&&(e=c[b],h=0);for(d=[];h<e.length;h+=2)d.push({keyCode:e[h],PF:e[h+
1]})}return d};t.CA=function(){this.rm={}};t.z=function(){nk.n.z.call(this);this.CA();yd(this.Og,"keydown",this.ff,m,this);kb&&(B&&Eb("1.8"))&&yd(this.Og,"keyup",this.XD,m,this);lb&&!B&&(yd(this.Og,"keypress",this.qE,m,this),yd(this.Og,"keyup",this.rE,m,this));this.Og=k};t.XD=function(b){if(224==b.keyCode)this.KF=j,Ld(function(){this.KF=m},400,this);else{var c=b.metaKey||this.KF;if((67==b.keyCode||88==b.keyCode||86==b.keyCode)&&c)b.metaKey=c,this.ff(b)}};
a.sk=function(b){return lb&&!B&&b.ctrlKey&&b.altKey&&!b.shiftKey};t.qE=function(b){32<b.keyCode&&sk(b)&&(this.aF=j)};t.rE=function(b){!this.aF&&sk(b)&&this.ff(b)};a.qk=function(b,c,d){var e=c.shift(),e=e.keyCode&255|e.PF<<8,g=b[e];g&&(d&&(0==c.length||oa(g)))&&f(Error("Keyboard shortcut conflicts with existing shortcut"));c.length?(g||(g=b[e]={}),qk(g,c,d)):b[e]=d},a.tk=function(b,c,d,e){d=d||0;return(e=(e||b.rm)[c[d]])&&!oa(e)&&1<c.length-d?tk(b,c,d+1,e):e};
t.ff=function(b){var c;c=b.keyCode;if(16==c||17==c||18==c)c=m;else{var d=b.target,e="TEXTAREA"==d.tagName||"INPUT"==d.tagName||"BUTTON"==d.tagName||"SELECT"==d.tagName,g=!e&&(d.isContentEditable||d.ownerDocument&&"on"==d.ownerDocument.designMode);c=!e&&!g||this.KM[c]||this.eK?j:g?m:this.QP&&(b.altKey||b.ctrlKey||b.metaKey)?j:"INPUT"==d.tagName&&this.OT[d.type]?13==c:"INPUT"==d.tagName||"BUTTON"==d.tagName?32!=c:m}if(c)if("keydown"==b.type&&sk(b))this.aF=m;else{c=(B?xh(b.keyCode):b.keyCode)&255|((b.shiftKey?
1:0)|(b.ctrlKey?2:0)|(b.altKey?4:0)|(b.metaKey?8:0))<<8;var h,l,d=za();this.Pg.ik.length&&1500>=d-this.Pg.time?h=tk(this,this.Pg.ik):this.Pg.ik.length=0;h=h?h[c]:this.rm[c];h||(h=this.rm[c],this.Pg.ik=[]);h&&oa(h)?l=h:h?(this.Pg.ik.push(c),this.Pg.time=d,B&&b.preventDefault()):this.Pg.ik.length=0;l&&(this.CB&&b.preventDefault(),this.hK&&b.stopPropagation(),h=b.target,c=this.dispatchEvent(new uk(pk.pJ,l,h)),(c&=this.dispatchEvent(new uk(pk.oJ+l,l,h)))||b.preventDefault(),this.Pg.ik.length=0)}};
a.uk=function(b,c,d){hd.call(this,b,d);this.identifier=c};y(uk,hd);a.vk=function(b){M.call(this);this.Kg(b)};y(vk,M);a.wk=[];t=vk.prototype;t.Kg=function(b){wk.push(this);this.Lk=new Od;this.fa=new nk(b);this.fa.CB=m;this.fa.addEventListener("shortcut",this.kR,m,this)};t.register=function(b,c,d){this.Sm={key:b,action:c,context:d};this.fa.hS(b,b);this.Lk.set(b,this.Sm);return this};t.oU=function(b){this.Sm=k;this.fa.nU(b,b);this.Lk.remove(b);return this};t.CA=function(){this.Sm=k;this.fa.CA();this.Lk.clear();return this};a.xk=function(b,c){b.Sm.yb=c;return b};
t.kR=function(b){var c=this.Lk.get(b.identifier);c&&c.action.call(c.context,b)};t.z=function(){vk.n.z.call(this);z.remove(wk,this);this.fa.H();this.Lk=this.Sm=this.fa=k};a.yk=new vk(document);yk.II=function(b){return new vk(b)};a.zk=function(b){var c=m,d;return function(){if(c)return d;c=j;return d=b.apply(this,arguments)}},a.Ak=function(b,c){var d=Ac(b,function(b){return 3===b.nodeType&&!Ha(b.nodeValue)})[0];d&&(d.nodeValue=c)},a.cj=function(b,c){var d=new Nj(b,500);c&&N(d,"finish",v(function(){L(this)},b));d.play()},a.Bk=function(b,c,d,e){"bottom"===e&&(e="b");var g="";(d===m?m:j)&&(g='data-tip="t$'+(e||"t")+"$"+b[1]+'"');return["<a ",g,' class="',c||"zm-item-tag",'" href="/topic/',b[1],'">',b[0],"</a>"].join("")},a.Ck=
function(b){return!b?"":b.replace(/^\s+/,"").replace(/\s+$/,"")},a.Dk=void 0,a.Ek=RegExp("^⁠+|⁠+$");Dk=function(b){return b.replace(Ek,"")};
a.Fk=function(){return'<a href="javascript:;" class="zu-edit-button" name="edit"><i class="zu-edit-button-icon"></i>修改</a>'},a.Gk=function(b,c,d){var e;b&&(c=$(b).data("animation")||new Pj(b,[255,255,150],c||[255,255,255],d||2E3),$(b).data("animation",c),1==c.aa&&c.stop(j),e=b.style.backgroundColor,xd(c,"end",function(){Uf(this.element,"background-color",e)},m,c),c.play())},a.Hk=function(b,c,d){b&&(jk&&document[hk]?N(document,ik,function g(){document[hk]||(Gk(b,c,d),yd(document,ik,g))}):Gk(b,c,d))},
a.Ik=function(b){var c=0,d=0;do d=b.indexOf("?",d),-1!==d&&(c++,d+=1);while(-1!==d);return c},a.Jk=function(b,c,d){c=z.slice(b.data,1);if("topic"===b.data[0]){var b=(c[2]?'<img class="zm-item-img-avatar zg-left" src="'+c[2]+'">':"")+'<span class="zu-autocomplete-row-name'+(c[3]?"":" zu-autocomplete-row-name-info")+'" title="'+c[0]+'">'+c[0]+"</span>",e=5<c.length&&c[5];4<=c.length&&(b+='<span class="zg-gray-normal zu-autocomplete-row-description">',c[4]||e?(e&&(b+="又称 "+c[5]),c[4]&&e&&(b+="，"),c[4]&&
(b+=c[4]+" 人关注")):b+="&nbsp;",b+="</span>");d.innerHTML=b}else"people"===b.data[0]?d.innerHTML='<img class="zm-item-img-avatar zg-left" src="'+c[2]+'"><span class="zu-autocomplete-row-name" title="'+c[0]+'">'+c[0]+'</span><span class="zg-gray-normal zu-autocomplete-row-description">'+(c[4]||"&nbsp;")+"</span>":"question"===b.data[0]?d.innerHTML=c[0]+'<span class="zm-ac-gray">问题</span>':"plain_text"===b.data[0]?(d.innerHTML=b.data[1],E.add(d,c[1])):"sina"===b.data[0]&&(d.innerHTML=c[0])},a.Kk=function(b,
c,d){var e,c=z.slice(b.data,1);if("topic"===b.data[0]){b=["<a ",' style="display:block" href="/topic/'+c[1]+'"><span class="zm-item-tag">',c[0],"</span>"].join("");e=6<c.length&&c[6];if(c[5]||e){var b=b+'<span class="zm-ac-gray">',g=[];e&&g.push("又称 "+c[6]);(e=parseInt(c[5],10))&&g.push(e+" 个精华问答");b+=g.join("，");b+="</span>"}else b+='<span class="zm-ac-gray" >&nbsp;</span>';d.innerHTML=b+"</a>"}else"people"===b.data[0]?d.innerHTML='<a href="/people/'+c[1]+'" title="'+c[0]+'" class="zm-ac-link zm-ac-link-people"><img class="zm-item-img-avatar zg-left" src="'+
c[2]+'"><span class="zu-autocomplete-row-name" title="'+c[0]+'">'+c[0]+'</span><span class="zg-gray-normal  zu-autocomplete-row-description">'+(c[4]||"&nbsp;")+"</span></a>":"question"===b.data[0]?(e=parseInt(c[3],10),d.innerHTML=(c[4]?'<a class="zg-star" data-tip="s$b$优质问答" href="/question/'+c[2]+'"></a>':"")+['<a class="zm-ac-link"','href="/question/'+c[2]+'">',c[0]].join("")+('<span class="zm-ac-gray">'+(e?e+" 个回答":"还没有回答")+"</span></a>")):"search_link"===b.data[0]?(d.innerHTML='<a href="/search?q='+
c[0]+'&type=question">查看全部搜索结果<i class="zg-icon arrow"></i></a>',E.add(d,"zu-autocomplete-row-search-link")):"plain_text"===b.data[0]?d.innerHTML=c[0]:"sina"===b.data[0]&&(c=['<a href="javascript:;" title="'+c[0]+'">','<img class="zm-item-img-avatar" src="'+c[2]+'" />',c[0],"</a>"].join(""),d.innerHTML=c);$("a",d).click(function(b){b.preventDefault()})},a.Lk=function(b,c,d){for(d=d||"A";c!=k&&c!==b;){if(c.tagName===d)return c;c=c.parentNode}return k},a.Mk=function(b){this.ZO=b;this.data=new Od};
Mk.prototype.add=function(b,c){this.ZO===m?this.data.set(b,c):this.data.set(encodeURIComponent(b),encodeURIComponent(c))};Mk.prototype.Kc=function(){var b=[];z.forEach(this.data.Gb(),function(c){b.push(c+"="+this.data.get(c))},this);return b.join("&")};
a.Nk=function(b){b=Ck(b);return!b?0:Math.ceil(b.replace(/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,"aaaaaaaaaaaaaaaaaaaa").replace(/\n/g,"a").replace(/\s/g,"a").replace(/[\u3000-\u303F\u4E00-\u9FA5\uf900-\ufa2d\uFF00-\uFFEF]/g,"aa").length/2)},a.Pk=function(b,c,d,e){window._gaq||(window._gaq=[]);d&&(d=""+d);e&&(e=parseInt(e,10));window._gaq.push(["_trackEvent",b,c,d,e]);Cg&&Ok("trackEvent(deprecated)",z.toArray(arguments))},a.Qk=function(b){b=(Xc(bj.get("zhga"))||[]).concat([b]);bj.ce("zhga",
$c(b))},a.Rk=function(b){window._gaq||(window._gaq=[]);window._gaq.push(["_trackPageview",b])},a.Sk=void 0,a.Tk={MT:{evaluate:/<%([\s\S]+?)%>/g,TO:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},escape:function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}},a.Uk=/.^/,a.Vk=function(b){return b.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};
Sk=function(b,c){var d=Tk.MT,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(data||{}){__p.push('"+b.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.escape||Uk,function(b,c){return"',_.escape("+Vk(c)+"),'"}).replace(d.TO||Uk,function(b,c){return"',"+Vk(c)+",'"}).replace(d.evaluate||Uk,function(b,c){return"');"+Vk(c).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("data","_",d);
return c?e(c,Tk):function(b){return e.call(this,b,Tk)}};$(function(){var b=yg(document.body).top;Wk.paddingTop=b});a.Wk={offsetTop:0,paddingTop:0,FB:m},a.Xk=function(b){$(b.target.N.g).off("click.disable-a").on("click.disable-a","a",function(b){b.preventDefault()})},a.Yk=function(b,c){var d=k;return function(){var e=this,g=arguments;clearTimeout(d);d=setTimeout(function(){c.apply(e,g)},b)}},a.Zk=zk(function(){return(+new Date).toString(32).slice(-5)+Math.random().toString(32).slice(-3)});a.$k=function(){Yh.call(this,i,i,i);this.yL=S.dl;this.mo=S.mo;this.IH=""!==this.mo;this.h().e(Ni,"/activation/resend-email",xa(this.EH,j))};ia($k);y($k,Ai);t=$k.prototype;t.lk=Sk('    <% if (showTopTip) { %>       <div class="top-tip well-blue"><%= topTip %></div>    <% } %>    <% if (showForm) { %>    <form class="js-email-form">    <dl class="zm-form-table zm-form-table-wide" style="">      <dt class="zm-form-table-head zm-form-table-head-align-middle">        <label class="" for="cur-login-passwd">您的注册邮箱：</label>      </dt>      <dd class="zm-form-table-field zg-form-table-count">        <label class=""><%= curEmail %></label></dd>      <dt class="zm-form-table-head zm-form-table-head-align-middle">        <label class="" for="new-email">新的登录邮箱：</label>      </dt>      <dd class="zm-form-table-field">        <input class="zg-form-text-input" type="text" name="newemail"></dd>      <dd class="zm-form-table-field">        <button class="js-update-email zg-btn-blue">更新邮箱</button>        <a class="js-cancel zm-form-btn-collapse" href="javascript:;">取消</a>      </dd>    </dl>    </form>    <% } %>    <% if (showMiddleTip) { %>    <div class="middle-tip"><%= middleTip %></div>    <% } %>    <% if (showSendEmail) { %>    <div class="">      <dl class="zm-form-table zm-form-table-wide" >        <dt class="zm-form-table-head zm-form-table-head-align-middle">          <label class="">您的<%= isMobile ? "" : "注册" %>邮箱：</label>        </dt>        <dd class="zm-form-table-field zg-form-table-count">          <label class="login-email"><%= curEmail %></label>          <a class="js-change-email" href="javascript:;">修改</a>          <br>        </dd>      </dl>    <% if (sent) { %>    <div style="text-align:center;clear:both;"><span class="zg-medium-gray">已发送</span></div>    <% } else { %>    <div style="text-align:center;margin-bottom:15px;clear:both;"><a class="js-resend" href="javascript:;">重新发送激活邮件</a></div>    <% } %>    </div>    <% } %>    <% if (showEmailUrl) { %>    <div class="email-url">      <a class="zg-btn-blue" target="_blank" href="<%= emailUrl %>">进入我的邮箱 »</a>    </div>    <% } %>    <% if (showBottomTip) { %>    <div class="bottom-tip"><%= bottomTip %></div>    <% } %>    ');
t.Dt={showTopTip:j,showSendEmail:j,showBottomTip:j};t.xT={showTopTip:j,showForm:j,showBottomTip:j,showEmailUrl:m};t.yT={showMiddleTip:j};t.Y=function(){$k.n.Y.call(this);this.ab("请激活帐号");al(this,$k.prototype.Dt);this.K=$(this.Z()).addClass("activate-dialog");$(this.g).css("width","400px");var b=this;$.each({".js-update-email":b.sU,".js-cancel":b.cancel,".js-change-email":b.dC,".js-resend":b.jH},function(c,d){b.K.on("click",c,$.proxy(d,b))})};
a.al=function(b,c){var d=$.extend({showTopTip:m,showMiddleTip:m,showBottomTip:m,showEmailUrl:b.IH,showForm:m,showSendEmail:m,isMobile:sb,sent:b.AH,topTip:"为正常使用知乎提问、回答、评论和编辑功能，请验证您的邮箱、激活帐号。",middleTip:Ga("一封验证邮件已经发到您的新邮箱：<br>%s，请注意查收。",b.XP),bottomTip:"如果您没有收到激活邮件，请注意检查垃圾箱。",curEmail:b.yL,emailUrl:b.mo},c);b.Ja(b.lk(d))};
t.sU=function(){var b=this;$.post("/settings/update_email",b.K.find(".js-email-form").serialize()).done(function(c){c.r?U(c.msg):(b.XP=c.msg[0],b.IH=""!==c.msg[1],b.mo=c.msg[1],al(b,$k.prototype.yT))});return m};t.EH=function(b){this.AH=b;al(this,$k.prototype.Dt)};t.cancel=function(){this.fL?this.F(m):al(this,$k.prototype.Dt)};t.dC=function(b){this.fL=b===j;al(this,$k.prototype.xT)};t.jH=function(b){var c=this;$.post("/reactive").done(function(d){d.r?(U(d.msg),b&&c.F(m)):(c.AH=j,al(c,$k.prototype.Dt))})};a.bl=function(b){var c=navigator.userAgent,b={qq:"/oauth/auth/qqconn?next=",sina:"/oauth/auth/sina?next="}[b];!/Mobile/.test(c)||!/CriOS/.test(c)?window.open(b+"/oauth/account_callback","_blank","top=200,left=400,width=600,height=380,directories=no,menubar=no,toolbar=no"):location.href=b+"/oauth/account_callback&from="+encodeURIComponent(location.pathname)};a.cl=function(b,c){M.call(this);b&&this.attach(b,c)};y(cl,Hd);t=cl.prototype;t.g=k;t.fs=k;t.Kx=k;t.gs=k;t.Zd=-1;t.Uh=-1;t.Cu=m;
a.dl={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},a.el={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},a.fl=A||D&&Eb("525"),a.gl=kb&&B;t=cl.prototype;
t.ff=function(b){if(D&&(17==this.Zd&&!b.ctrlKey||18==this.Zd&&!b.altKey||kb&&91==this.Zd&&!b.metaKey))this.Uh=this.Zd=-1;-1==this.Zd&&(b.ctrlKey&&17!=b.keyCode?this.Zd=17:b.altKey&&18!=b.keyCode?this.Zd=18:b.metaKey&&91!=b.keyCode&&(this.Zd=91));fl&&!wh(b.keyCode,this.Zd,b.shiftKey,b.ctrlKey,b.altKey)?this.handleEvent(b):(this.Uh=B?xh(b.keyCode):b.keyCode,gl&&(this.Cu=b.altKey))};t.zN=function(b){this.Uh=this.Zd=-1;this.Cu=b.altKey};
t.handleEvent=function(b){var c=b.Yb,d,e,g=c.altKey;A&&"keypress"==b.type?(d=this.Uh,e=13!=d&&27!=d?c.keyCode:0):D&&"keypress"==b.type?(d=this.Uh,e=0<=c.charCode&&63232>c.charCode&&vh(d)?c.charCode:0):rb?(d=this.Uh,e=vh(d)?c.keyCode:0):(d=c.keyCode||this.Uh,e=c.charCode||0,gl&&(g=this.Cu),kb&&(63==e&&224==d)&&(d=191));var h=d,l=c.keyIdentifier;d?63232<=d&&d in dl?h=dl[d]:25==d&&b.shiftKey&&(h=9):l&&l in el&&(h=el[l]);b=h==this.Zd;this.Zd=h;c=new hl(h,e,b,c);c.altKey=g;this.dispatchEvent(c)};t.m=p("g");
t.attach=function(b,c){this.gs&&this.detach();this.g=b;this.fs=N(this.g,"keypress",this,c);this.Kx=N(this.g,"keydown",this.ff,c,this);this.gs=N(this.g,"keyup",this.zN,c,this)};t.detach=function(){this.fs&&(Ad(this.fs),Ad(this.Kx),Ad(this.gs),this.gs=this.Kx=this.fs=k);this.g=k;this.Uh=this.Zd=-1};t.z=function(){cl.n.z.call(this);this.detach()};a.hl=function(b,c,d,e){e&&this.B(e,i);this.type="key";this.keyCode=b;this.charCode=c;this.repeat=d};y(hl,ld);a.il=function(b){M.call(this);this.g=b;b=ra(this.g)&&1==this.g.nodeType?this.g:this.g?this.g.body:k;this.hP=!!b&&fg(b);this.oF=N(this.g,B?"DOMMouseScroll":"mousewheel",this)};y(il,Hd);
il.prototype.handleEvent=function(b){var c=0,d=0,e=0,b=b.Yb;if("mousewheel"==b.type){d=1;if(A||D&&(lb||Eb("532.0")))d=40;e=jl(-b.wheelDelta,d);la(b.wheelDeltaX)?(c=jl(-b.wheelDeltaX,d),d=jl(-b.wheelDeltaY,d)):d=e}else e=b.detail,100<e?e=3:-100>e&&(e=-3),la(b.axis)&&b.axis===b.HORIZONTAL_AXIS?c=e:d=e;pa(this.DF)&&(c=Mb(c,-this.DF,this.DF));pa(this.EF)&&(d=Mb(d,-this.EF,this.EF));this.hP&&(c=-c);c=new kl(e,b,c,d);this.dispatchEvent(c)};a.jl=function(b,c){return D&&(kb||mb)&&0!=b%c?b:b/c};
il.prototype.z=function(){il.n.z.call(this);Ad(this.oF);delete this.oF};a.kl=function(b,c,d,e){c&&this.B(c,i);this.type="mousewheel";this.detail=b;this.Pi=d;this.Qi=e};y(kl,ld);a.ll=function(){yj.call(this);this.queue=[]};y(ll,yj);ll.prototype.add=function(b){z.contains(this.queue,b)||(this.queue.push(b),N(b,"finish",this.cG,m,this))};ll.prototype.remove=function(b){z.remove(this.queue,b)&&yd(b,"finish",this.cG,m,this)};ll.prototype.z=function(){z.forEach(this.queue,function(b){b.H()});this.queue.length=0;ll.n.z.call(this)};a.ml=function(){ll.call(this);this.aw=0};y(ml,ll);
ml.prototype.play=function(b){if(0==this.queue.length)return m;if(b||this.aa==xj)this.aw=0,this.Zh();else if(1==this.aa)return m;this.Nd("play");-1==this.aa&&this.Nd("resume");var c=-1==this.aa&&!b;this.startTime=za();this.sn=k;this.aa=1;z.forEach(this.queue,function(d){(!c||-1==d.aa)&&d.play(b)});return j};ml.prototype.stop=function(b){z.forEach(this.queue,function(c){c.aa==xj||c.stop(b)});this.aa=xj;this.sn=za();this.Nd("stop");this.ai()};
ml.prototype.cG=function(){this.aw++;this.aw==this.queue.length&&(this.sn=za(),this.aa=xj,this.Nd("finish"),this.ai())};a.nl=function(){M.call(this)};y(nl,Hd);t=nl.prototype;t.fe=0;t.ro=0;t.no=100;t.fl=0;t.gk=1;t.UE=m;t.As=m;t.Ba=function(b){b=ol(this,b);this.fe!=b&&(this.fe=b+this.fl>this.no?this.no-this.fl:b<this.ro?this.ro:b,!this.UE&&!this.As&&this.dispatchEvent("change"))};t.X=function(){return ol(this,this.fe)};t.Xo=function(b){b=ol(this,b);this.fl!=b&&(this.fl=0>b?0:this.fe+b>this.no?this.no-this.fe:b,!this.UE&&!this.As&&this.dispatchEvent("change"))};
t.Mh=function(){return this.gk==k?this.fl:Math.round(this.fl/this.gk)*this.gk};t.Jc=function(){return ol(this,this.ro)};t.Tc=function(){return ol(this,this.no)};t.Bw=p("gk");a.ol=function(b,c){return b.gk==k?c:b.ro+Math.round((c-b.ro)/b.gk)*b.gk};a.pl=function(b){T.call(this,b);this.vB=k;this.Ua=new nl;N(this.Ua,"change",this.eE,m,this)};y(pl,T);a.ql=Gd("dragvaluestart"),a.rl=Gd("dragvalueend"),a.sl=Gd("dragextentstart"),a.tl=Gd("dragextentend"),a.ul=Gd("dragstart"),a.vl=Gd("dragend");t=pl.prototype;t.xb="horizontal";t.Yr=m;t.TP=m;t.Cf=10;t.qo=0;t.XE=j;t.ic=j;t.Sd=m;t.w=function(){pl.n.w.call(this);var b=this.L().w("div",this.M(this.xb));this.ea(b)};
t.ea=function(b){pl.n.ea.call(this,b);E.add(b,this.M(this.xb));var b=this.m(),c=Vb(k,"goog-slider-thumb",b)[0];c||(c=this.L().w("div","goog-slider-thumb"),Nc(c,Wc.Sp),b.appendChild(c));this.Xa=this.yd=c;Nc(this.m(),Wc.qJ);wl(this)};t.C=function(){pl.n.C.call(this);this.ee=new zh(this.Xa);this.Lf=new zh(this.yd);this.ee.Gh(this.Sd);this.Lf.Gh(this.Sd);this.ee.uv=this.Lf.uv=ha;this.nb=new cl(this.m());xl(this,j);this.m().tabIndex=0;yl(this)};
a.xl=function(b,c){c?(b.h().e(b.ee,"beforedrag",b.tr).e(b.Lf,"beforedrag",b.tr).e(b.ee,["start","end"],b.Cr).e(b.Lf,["start","end"],b.Cr).e(b.nb,"key",b.ff).e(b.m(),"mousedown",b.gj),b.XE&&zl(b,j)):(b.h().Fa(b.ee,"beforedrag",b.tr).Fa(b.Lf,"beforedrag",b.tr).Fa(b.ee,["start","end"],b.Cr).Fa(b.Lf,["start","end"],b.Cr).Fa(b.nb,"key",b.ff).Fa(b.m(),"mousedown",b.gj),b.XE&&zl(b,m))};t.jb=function(){pl.n.jb.call(this);Tc(this.ee,this.Lf,this.nb,this.Gj)};
t.tr=function(b){var c=b.Yq==this.ee?this.Xa:this.yd,d;"vertical"==this.xb?(d=this.m().clientHeight-c.offsetHeight,d=(d-b.top)/d*(this.Tc()-this.Jc())+this.Jc()):d=b.left/(this.m().clientWidth-c.offsetWidth)*(this.Tc()-this.Jc())+this.Jc();d=b.Yq==this.ee?Math.min(Math.max(d,this.Jc()),this.X()+this.Mh()):Math.min(Math.max(d,this.X()),this.Tc());Al(this,c,d)};
t.Cr=function(b){var c="start"==b.type;E.enable(this.m(),"goog-slider-dragging",c);E.enable(b.target.handle,"goog-slider-thumb-dragging",c);b=b.Yq==this.ee;c?(this.dispatchEvent(ul),this.dispatchEvent(b?ql:sl)):(this.dispatchEvent(vl),this.dispatchEvent(b?rl:tl))};
t.ff=function(b){var c=j;switch(b.keyCode){case 36:Bl(this,this.Jc());break;case 35:Bl(this,this.Tc());break;case 33:Cl(this,this.Cf);break;case 34:Cl(this,-this.Cf);break;case 37:var d=this.Sd&&this.Cd()?1:-1;Cl(this,b.shiftKey?d*this.Cf:d*this.Cp);break;case 40:Cl(this,b.shiftKey?-this.Cf:-this.Cp);break;case 39:d=this.Sd&&this.Cd()?-1:1;Cl(this,b.shiftKey?d*this.Cf:d*this.Cp);break;case 38:Cl(this,b.shiftKey?this.Cf:this.Cp);break;default:c=m}c&&b.preventDefault()};
t.gj=function(b){this.m().focus&&this.m().focus();var c=b.target;!tc(this.Xa,c)&&!tc(this.yd,c)&&(this.TP?Bl(this,Dl(this,b)):(this.gA(b),this.Re=El(this,Dl(this,b)),this.HE="vertical"==this.xb?this.ks<this.Re.offsetTop:this.ks>Fl(this,this.Re)+this.Re.offsetWidth,b=Sb(this.m()),this.h().e(b,"mouseup",this.eA,j).e(this.m(),"mousemove",this.gA),this.Rh||(this.Rh=new Jd(200),this.h().e(this.Rh,Kd,this.kE)),this.kE(),this.Rh.start()))};t.$D=function(b){Cl(this,(0<b.detail?-1:1)*this.Cp);b.preventDefault()};
t.kE=function(){var b;if("vertical"==this.xb){var c=this.ks,d=this.Re.offsetTop;this.HE?c<d&&(b=Gl(this,this.Re)+this.Cf):c>d+this.Re.offsetHeight&&(b=Gl(this,this.Re)-this.Cf)}else c=this.ks,d=Fl(this,this.Re),this.HE?c>d+this.Re.offsetWidth&&(b=Gl(this,this.Re)+this.Cf):c<d&&(b=Gl(this,this.Re)-this.Cf);la(b)&&Al(this,this.Re,b)};t.eA=function(){this.Rh&&this.Rh.stop();var b=Sb(this.m());this.h().Fa(b,"mouseup",this.eA,j).Fa(this.m(),"mousemove",this.gA)};
a.Hl=function(b,c){var d=kg(c,b.m());return"vertical"==b.xb?d.y:b.Sd&&b.Cd()?b.m().clientWidth-d.x:d.x};t.gA=function(b){this.ks=Hl(this,b)};
a.Dl=function(b,c){var d=b.Jc(),e=b.Tc();if("vertical"==b.xb){var g=b.Xa.offsetHeight,h=b.m().clientHeight-g,g=Hl(b,c)-g/2;return(e-d)*(h-g)/h+d}g=b.Xa.offsetWidth;h=b.m().clientWidth-g;g=Hl(b,c)-g/2;return(e-d)*g/h+d},a.Gl=function(b,c){if(c==b.Xa)return b.Ua.X();if(c==b.yd)return b.Ua.X()+b.Ua.Mh();f(Error("Illegal thumb element. Neither minThumb nor maxThumb"))},a.Cl=function(b,c){var d=Gl(b,b.Xa)+c,e=Gl(b,b.yd)+c,d=Mb(d,b.Jc(),b.Tc()-b.qo),e=Mb(e,b.Jc()+b.qo,b.Tc());Il(b,d,e-d)},a.Al=function(b,
c,d){var e=k;c==b.yd&&(d<=b.Ua.Tc()&&d>=b.Ua.X()+b.qo)&&(e=d-b.Ua.X());var g=e||b.Ua.Mh();c==b.Xa&&(d>=b.Jc()&&d<=b.Ua.X()+g-b.qo)&&(c=g-(d-b.Ua.X()),ol(b.Ua,d)+ol(b.Ua,c)==ol(b.Ua,d+c)&&(Il(b,d,c),e=k));e!=k&&b.Ua.Xo(e)},a.Il=function(b,c,d){b.Jc()<=c&&(c<=b.Tc()-d&&b.qo<=d&&d<=b.Tc()-c)&&!(c==b.X()&&d==b.Mh())&&(b.Ua.As=j,b.Ua.Xo(0),b.Ua.Ba(c),b.Ua.Xo(d),b.Ua.As=m,b.eE())};t.Jc=function(){return this.Ua.Jc()};t.Tc=function(){return this.Ua.Tc()};
a.El=function(b,c){return c<=b.Ua.X()+b.Ua.Mh()/2?b.Xa:b.yd};t.eE=function(){yl(this);wl(this);this.dispatchEvent("change")};
a.yl=function(b){if(b.Xa&&!b.Yr){var c=Jl(b,Gl(b,b.Xa)),d=Jl(b,Gl(b,b.yd));if("vertical"==b.xb)b.Xa.style.top=c.y+"px",b.yd.style.top=d.y+"px",b.Ob&&(c=Kl(d.y,c.y,b.Xa.offsetHeight),b.Ob.style.top=c.offset+"px",b.Ob.style.height=c.size+"px");else{var e=b.Sd&&b.Cd()?"right":"left";b.Xa.style[e]=c.x+"px";b.yd.style[e]=d.x+"px";b.Ob&&(c=Kl(c.x,d.x,b.Xa.offsetWidth),b.Ob.style[e]=c.offset+"px",b.Ob.style.width=c.size+"px")}}},a.Kl=function(b,c,d){var e=Math.ceil(d/2);return{offset:b+e,size:Math.max(c-
b+d-2*e,0)}},a.Jl=function(b,c){var d=new Nb;if(b.Xa){var e=b.Jc(),g=b.Tc(),g=c==e&&e==g?0:(c-e)/(g-e);"vertical"==b.xb?(e=b.m().clientHeight-b.Xa.offsetHeight,g=Math.round(g*e),d.x=Fl(b,b.Xa),d.y=e-g):(e=Math.round(g*(b.m().clientWidth-b.Xa.offsetWidth)),d.x=e,d.y=b.Xa.offsetTop)}return d},a.Bl=function(b,c){c=Mb(c,b.Jc(),b.Tc());b.Yr&&b.Mq.stop(j);var d=new ml,e,g=El(b,c),h=b.X(),l=b.Mh(),n=Gl(b,g),q=Jl(b,n);e=b.Bw();Math.abs(c-n)<e&&(c=Mb(n+(c>n?e:-e),b.Jc(),b.Tc()));Al(b,g,c);n=Jl(b,Gl(b,g));
e="vertical"==b.xb?[Fl(b,g),n.y]:[n.x,g.offsetTop];q=new Ij(g,[q.x,q.y],e,100);q.Gh(b.Sd);d.add(q);if(b.Ob){var q=Jl(b,h),r=Jl(b,h+l),l=q;e=r;g==b.Xa?l=n:e=n;"vertical"==b.xb?(g=Kl(r.y,q.y,b.Xa.offsetHeight),l=Kl(e.y,l.y,b.Xa.offsetHeight),n=new Ij(b.Ob,[Fl(b,b.Ob),g.offset],[Fl(b,b.Ob),l.offset],100),g=new Lj(b.Ob,g.size,l.size,100)):(g=Kl(q.x,r.x,b.Xa.offsetWidth),l=Kl(l.x,e.x,b.Xa.offsetWidth),n=new Ij(b.Ob,[g.offset,b.Ob.offsetTop],[l.offset,b.Ob.offsetTop],100),g=new Kj(b.Ob,g.size,l.size,100));
n.Gh(b.Sd);g.Gh(b.Sd);d.add(n);d.add(g)}b.vB&&(h=b.vB.JX(h,c,100),z.forEach(h,function(b){d.add(b)}));b.Mq=d;b.h().e(d,"end",b.dM);b.Yr=j;d.play(m)};t.dM=function(){this.Yr=m};t.$o=function(b){if(this.xb!=b){var c=this.M(this.xb),d=this.M(b);this.xb=b;this.m()&&(E.VH(this.m(),c,d),b=this.Sd&&this.Cd()?"right":"left",this.Xa.style[b]=this.Xa.style.top="",this.yd.style[b]=this.yd.style.top="",this.Ob&&(this.Ob.style[b]=this.Ob.style.top="",this.Ob.style.width=this.Ob.style.height=""),yl(this))}};
t.z=function(){pl.n.z.call(this);this.Rh&&this.Rh.H();delete this.Rh;this.Mq&&this.Mq.H();delete this.Mq;delete this.Xa;delete this.yd;this.Ob&&delete this.Ob;this.Ua.H();delete this.Ua;this.nb&&(this.nb.H(),delete this.nb);this.Gj&&(this.Gj.H(),delete this.Gj);this.ee&&(this.ee.H(),delete this.ee);this.Lf&&(this.Lf.H(),delete this.Lf)};t.Cp=1;t.Bw=function(){return this.Ua.Bw()};t.X=function(){return this.Ua.X()};t.Ba=function(b){Al(this,this.Xa,b)};t.Mh=function(){return this.Ua.Mh()};
t.Xo=function(b){Al(this,this.yd,this.Ua.X()+b)};t.F=function(b){Q(this.m(),b);b&&yl(this)};a.wl=function(b){var c=b.m();if(c){var d=b.Jc();Oc(c,Vc.zJ,d);d=b.Tc();Oc(c,Vc.yJ,d);b=b.X();Oc(c,Vc.AJ,b)}},a.zl=function(b,c){c?(b.Gj||(b.Gj=new il(b.m())),b.h().e(b.Gj,"mousewheel",b.$D)):b.h().Fa(b.Gj,"mousewheel",b.$D)};t.$a=function(b){if(this.ic!=b&&this.dispatchEvent(b?"enable":"disable"))this.ic=b,xl(this,b),b||this.eA(),E.enable(this.m(),"goog-slider-disabled",!b)};t.isEnabled=p("ic");
a.Fl=function(b,c){return b.Sd?yh(c):c.offsetLeft};a.Ll=function(b){pl.call(this,b);this.Ua.Xo(0)};y(Ll,pl);Ll.prototype.M=function(b){return"vertical"==b?"goog-slider-vertical":"goog-slider-horizontal"};a.Ml=function(b){this.options=$.extend({},this.defaults,b)};y(Ml,T);t=Ml.prototype;t.defaults={qC:310,rC:310,lg:250,mg:250,KP:2,opacity:0.25,FZ:"#eee"};t.ea=function(b){Ml.n.ea.call(this,b);this.src=this.g.src;this.options.src=this.src;this.options.Am=(this.options.qC-this.options.lg)/2;this.options.zm=(this.options.rC-this.options.mg)/2;this.Jq()};
t.Jq=function(){var b=this.options;this.OA=$(Sk('            <div class="avatar-editor-container" style="width:<%=containerWidth%>px">              <div class="avatar-editor-container-inner" style="height:<%=containerHeight%>px;">                <div class="avatar-editor-window" style="height:<%=windowHeight%>px;width:<%=windowWidth%>px;margin:<%=windowMarginTop%>px <%=windowMarginLeft%>px;">                  <div class="avatar-editor-window-shadow" style="height:<%=windowHeight%>px;width:<%=windowWidth%>px;"></div>                  <div class="avatar-editor-window-inner" style="width:<%=containerWidth%>px; height:<%=containerHeight%>px;margin:-<%=windowMarginTop%>px 0 0 -<%=windowMarginLeft%>px;">                    <img class="inner" title="拖动相片"/>                  </div>                </div>                <img class="outer" style="opacity:<%=opacity%>;"/>              </div>              <div class="goog-slider-wrap">                  <i class="zg-icon image-minus"></i>                  <i class="zg-icon image-plus"></i>                  <div class="goog-slider">                      <div class="line"></div>                      <div class="goog-slider-thumb"></div>                  </div>              </div>            </div>',{containerWidth:b.rC,
containerHeight:b.qC,windowHeight:b.lg,windowWidth:b.mg,windowMarginTop:b.Am,windowMarginLeft:b.zm,src:b.src,opacity:b.opacity}));this.Xb=this.OA[0];this.OA.insertBefore(this.g);Q(this.g,m);this.sL=J("avatar-editor-container-inner",this.Xb);this.Nr=J("outer",this.Xb);this.kx=J("inner",this.Xb);this.Cm=$(this.Nr);this.eu=$(this.kx);this.EE=0;this.Cm.load(v(this.mI,this));this.eu.load(v(this.mI,this));this.kx.src=this.Nr.src=this.options.src;this.tT=J("goog-slider",this.Xb)};
t.C=function(){this.Zz=new Ll;this.Zz.o(this.tT);this.h().e(this.sL,["mousedown","touchstart"],function(b){var c=new zh(this.Xb);c.addEventListener("drag",v(function(b){var c=this.zoom;this.Je={Jp:this.options.mg/c,Cn:this.options.lg/c,x:(this.options.zm-(this.ME.left+(b.clientX-this.Bt)))/c,y:(this.options.Am-(this.ME.top+(b.clientY-this.Ct)))/c};Nl(this)},this));c.addEventListener("end",v(function(){c.H()},this));c.wm(b);this.wm(b)});this.h().e(this.Xb,["touchmove"],function(b){b.stopPropagation();
b.preventDefault()});this.h().e(this.Zz,"change",function(){var b=this.Zz.X(),c=this.NI;Ol(this,(this.LU-c)*b/100+c)})};a.Ol=function(b,c){b.EY=b.zoom;b.zoom=c;Pl(b,b.Je.Jp/2+b.Je.x,b.Je.Cn/2+b.Je.y)},a.Pl=function(b,c,d){var e=b.zoom;b.Je={Jp:b.options.mg/e,Cn:b.options.lg/e,x:c-b.options.mg/e/2,y:d-b.options.lg/e/2};Nl(b)};t.mI=function(){this.GO||(this.kx.complete&&this.Nr.complete?this.B():(this.EE++,2<=this.EE&&this.B()))};
t.B=function(){this.Mr=this.Cm.width();this.Lr=this.Cm.height();var b=this.options.mg/this.Mr,c=this.options.lg/this.Lr;this.NI=b=c>b?c:b;this.LU=this.NI*this.options.KP;this.Je={Cn:this.options.mg/b,Jp:this.options.lg/b,x:0,y:0};Ol(this,b);Pl(this,this.Mr/2,this.Lr/2);this.GO=j};t.wm=function(b){this.Bt=b.clientX;this.Ct=b.clientY;this.ME=this.eu.position();this.XY=this.Cm.position()};
a.Nl=function(b){var c=b.zoom,d=Mb(b.options.zm-b.Je.x*c,b.options.mg+b.options.zm-b.Mr*c,b.options.zm),e=Mb(b.options.Am-b.Je.y*c,b.options.lg+b.options.Am-b.Lr*c,b.options.Am),g={width:c*b.Mr,height:c*b.Lr,left:d,top:e};b.Cm.css(g);b.eu.css(g);b.Je.x=(b.options.zm-d)/c;b.Je.y=(b.options.Am-e)/c};t.support=function(){return"getContext"in document.createElement("canvas")&&m};a.Rl=function(b,c,d){T.call(this);this.PB=b||Ql;this.fM=c;this.BS=d||"l"};y(Rl,T);a.Ql=1;t=Rl.prototype;t.ea=function(b){this.g=b;this.w()};
t.w=function(){this.xk=$(Sk('            <form target="av_up_frame" style="display:none;" method="post" enctype="multipart/form-data" action="<%=uploadAction%>">                <label for="avt_file"></label>                <input type="file" accept="image/*" name="picture" id="avt_file" />                <input type="hidden" name="handle_mode" value="server1" />            </form>',{uploadAction:"/upload"}));this.RI=$('<iframe id="av_up_frame" src="about:_blank" name="av_up_frame" style="position: absolute; height: 0px; width: 0px; left: -9000px;"></iframe>');
this.RI.appendTo(document.body);this.input=this.xk.find("input[type=file]")[0];A?(this.xk.find("label").html($(this.g).html()),this.g.innerHTML="",$(this.g).append(this.xk),this.xk.addClass("avatar-editor-form-ie")):(this.xk.insertAfter(this.g),$(this.g).click($.proxy(function(){this.input.click()},this)));this.h().e(this.input,"change",this.$h).e(this.input,"click",function(b){this.dispatchEvent("beforeopen")===m&&b.preventDefault()})};
t.$h=function(b){b=this.input=b.target;this.Fl=this.jx=this.mj="";if(this.Ye)this.Ye.ma();else{this.Ye=new Ai(k,m);this.Ye.ab("修改图片");var c=ni.VI,d=ni.BJ,e=new fi;e.set(c,"取消",m,j).set(d,"确定",j);ji(this.Ye,e);this.h().e(this.Ye,ki,function(b){if(b.key===d){if(this.hn.support()){var c=this.hn,b=$("<canvas>",{width:c.options.mg,height:c.options.lg}),e=b[0];$(document.body).append(e);var n=b[0].getContext("2d"),q=c.Je;n.drawImage(c.Nr,q.x,q.y,q.Jp,q.Cn,0,0,c.options.mg,c.options.lg);c=e.toDataURL("image/png");
b.remove();b=c}else b=this.hn.Je;this.mj=b;Sl(this);this.Ye.F(m);return m}})}e=this.Ye.Z();c=$("<div class='new-avatar-editor-loading'><div><span></span></div><div>正在上传...</div></div>");e=$(e);e.html("");e.append(c);this.Ye.F(j);E.add(this.Ye.g,"avatar-edit-dialog");window.FileReader&&(b.files&&b.files[0])&&(this.file=b=b.files[0],c=new window.FileReader,c.onload=v(function(b){this.Fl=b.target.result;this.Do()},this),c.readAsDataURL(b));this.h().e(Y,Tl,function(b){(b=b.pc)&&!b.r?(this.Fl=b.data.pic_url,
this.jx=b.data.hashval,window.FileReader||this.Do(),Sl(this)):U(b.msg)});this.xk[0].submit();b=this.input.cloneNode();nc(b,this.input);this.input=b;this.h().e(this.input,"change",this.$h)};t.Do=function(){var b=this.Ye.Z();this.ix=new Image;this.ix.src=this.Fl;b=$(b);b.html("");b.append(this.ix);this.hn=new Ml;this.hn.o(this.ix)};
a.Sl=function(b){if(b.jx&&b.mj){b.dispatchEvent("beforepost");var c={type:b.PB,dest_id:b.PB===Ql?S[3]:b.fM,return_size:b.BS},c=b.hn.support()?$.extend(c,{handle_mode:"client",pic_body:b.mj.replace(/data\:image\/\w{3,4};base64,/,""),fileName:b.file.name}):$.extend(c,{handle_mode:"server2",x:Math.round(b.mj.x),y:Math.round(b.mj.y),height:Math.round(b.mj.Cn),width:Math.round(b.mj.Jp),hashval:b.jx});$.post("/upload",c,$.proxy(function(b){b&&!b.r?this.data=b.msg:U(b.msg);this.dispatchEvent({type:"success",
src:this.data});this.Ye.F(m)},b),"json")}};t.getData=function(){return!this.data?k:/(\w*)_\w/.exec(this.data)[1]};$.fn.placeholder=function(b){return this.each(function(){var c=$(this),d=c.data("placeholder");d||c.data("placeholder",d=new Ul(this,b));d.zq()})};a.Ul=function(b,c){b&&(this.input=b,"string"===typeof c&&(c={text:c}),F.extend(this.G={},this.defaults,c||{}),this.Hg=k,this.pu())},a.Vl="placeholder"in document.createElement("input");t=Ul.prototype;t.defaults={text:"",offsetParent:k,OB:m};t.JK=["paddingBottom","paddingTop","paddingLeft","paddingRight"];
t.ak=function(b){var c=this.input,d=this.G;d.text=b||"";Vl?(Wl(c)||Oc(c,Vc.Wp,d.text),c.setAttribute("placeholder",d.text)):yc(this.label,d.text)};a.Xl=function(b){Vl?E.enable(b.input,"placeholder-hilight",m):E.enable(b.label,"placeholder-label-hilight",m)};t.H=function(){this.Hg&&(this.Hg.removeAll(),this.Hg.H());L(this.label);this.label=k};
t.pu=function(){var b=this.input,c=this.G;c.text||(c.text=b.getAttribute("placeholder"));if(Vl)return this.ak(c.text);var d=this.input,e=hg(d),g=K("label"),h=kg(d,this.offsetParent());Uf(g,{color:"gray",cursor:"text",position:"absolute",left:h.x+e.left+"px",top:h.y+e.top+"px",display:this.Ib()?"block":"none",width:Yl(d,"width"),fontSize:Yl(d,"fontSize"),lineHeight:Yl(d,"lineHeight"),fontFamily:Yl(d,"fontFamily")});d=this.label=g;this.ak(c.text);this.offsetParent().appendChild(d);e=this.Hg=new ne(this);
e.e(b,"blur",this.zq);e.e(b,"focus",this.hide);c.OB&&e.e(b,"keydown",this.hide);e.e(d,"click",function(){this.hide();sg(b)&&b.focus()});b.SY=v(this.zq,this);c=this.input;d=this.label;Wl(c)||(c.id?d.htmlFor=c.id:(d.id=Kh(Jh.P()),Oc(c,Vc.ju,d.id)));this.position();this.zq()};a.Wl=function(b){if(("labels"in b?b.labels.length:b.id&&z.some(document.getElementsByTagName("label"),function(c){return c.htmlFor===b.id}))||Pc(b,Vc.Wp)||Pc(b,Vc.ju))return j},a.Yl=function(b,c){return Wf(b,c)||Xf(b,c)||b.style[c]};
t.offsetParent=function(){return this.G.offsetParent||this.input.offsetParent};t.zq=function(){if(!Vl)if(this.Ib()&&sg(this.input)){this.show();var b=this.input,c=hg(b),d=this.label,e=kg(b,this.offsetParent());Uf(d,{left:e.x+c.left+"px",top:e.y+c.top+"px",width:Yl(b,"width"),fontSize:Yl(b,"fontSize"),lineHeight:Yl(b,"lineHeight"),fontFamily:Yl(b,"fontFamily")});this.offsetParent().appendChild(d)}else this.hide()};t.show=function(){this.label&&Q(this.label,j)};
t.hide=function(){this.label&&Q(this.label,m)};t.Ib=function(){return!this.input.value};t.position=function(){z.forEach(this.JK,function(b){this.label.style[b]=Yl(this.input,b)},this)};a.Zl=function(){M.call(this);this.Sc=[];this.Zk=[];this.Ev={};this.Q=new ne(this);this.XO=this.YE=m;this.EA=j};y(Zl,Hd);t=Zl.prototype;t.zE=0;t.CH=ca("zE");a.$l=function(b,c,d){c.aD=d;c.Si=i;b.Sc.push(c)};
t.B=function(){if(!this.YE){for(var b=0,c=this.Sc.length;b<c;b++)for(var d=pc(this.Sc[b]),e=0,g=d.length;e<g;++e){var h=d[e],l=h,n=ua(l);this.Ev[n]=h;this.cD&&(this.Q.e(h,"mouseover",this.iN),this.Q.e(h,"mouseout",this.hN));this.bD&&(this.Q.e(l,"mouseover",this.gN),this.Q.e(l,"mouseout",this.fN));this.Zk.push(h);this.Q.e(l,["mousedown","touchstart"],this.ON)}this.YE=j}};
t.z=function(){this.Q.H();for(var b=0,c=this.Sc.length;b<c;b++){var d=this.Sc[b];d.aD=i;d.Si=i}this.Sc.length=0;this.Zk.length=0;this.Ev=k;am(this);Zl.n.z.call(this)};a.bm=function(b,c){for(var d=0,e=b.Sc.length;d<e;d++){var g=b.Sc[d];g.Yk=qg(g)}d=0;for(e=b.Zk.length;d<e;d++)g=b.Zk[d],g!=c&&(g.Yk=qg(g))};
t.ON=function(b){var c=ua(b.currentTarget);this.ya=this.Ev[c];a:{var c=this.ya,d=c.cloneNode(j);switch(c.tagName.toLowerCase()){case "tr":c=K("table",k,K("tbody",k,d));break a;case "td":case "th":c=K("table",k,K("tbody",k,K("tr",k,d)));break a;default:c=d}}this.Db=c;this.Zq&&E.add(this.Db,this.Zq);this.Db.style.margin="0";this.Db.style.position="absolute";this.Db.style.visibility="hidden";Sb(this.ya).body.appendChild(this.Db);c=eg(this.ya);mg(this.Db,c);this.Eb=new zh(this.Db);this.Eb.CH(this.zE);
N(this.Eb,"start",this.Lw,m,this);N(this.Eb,"end",this.dN,m,this);N(this.Eb,"earlycancel",this.av,m,this);this.Eb.wm(b)};
t.Lw=function(b){if(this.dispatchEvent(new cm("beforedragstart",this,b.ZB,this.ya,k,k))){this.Ks=this.ya.parentNode;this.AC=this.My=this.ya.nextElementSibling!=i?this.ya.nextElementSibling:qc(this.ya.nextSibling,j);this.pv=this.Ks;this.ov?E.add.apply(k,z.concat(this.ya,this.ov)):this.ya.style.visibility="hidden";var c=pg(this.Db);this.Db.NM=c.width/2;this.Db.MM=c.height/2;this.Db.style.visibility="";this.EA&&(this.ya.style.display="none");bm(this,this.ya);this.ya.style.display="";N(this.Eb,"drag",
this.jN,m,this);this.dispatchEvent(new cm("dragstart",this,b.ZB,this.ya,this.Db,this.Eb))}else b.preventDefault(),this.av()};
t.jN=function(b){var c=eg(this.Db),c=new Nb(c.x+this.Db.NM,c.y+this.Db.MM),d;a:{d=k;if("none"!=this.ya.style.display){d=this.ya.parentNode;var e=qg(d);if(dm(c,e))break a}for(var e=0,g=this.Sc.length;e<g;e++){var h=this.Sc[e];if(h!=d&&dm(c,h.Yk)){d=h;break a}}d=k}var l;if(d){d==k&&f(Error("getHoverNextItem_ called with null hoverList."));var n,q,e=m,g=i;switch(d.aD){case 0:l=c.y;n=em;q=fm;break;case 4:e=j;case 2:l=c.x;n=gm;q=fm;break;case 5:e=j;case 3:l=c.x,n=hm,q=im}for(var h=k,r,w=pc(d),C=0,I=w.length;C<
I;C++){var G=w[C];if(G!=this.ya){var R=n(G.Yk);if(e){var X=jm(G,c);la(g)||(g=X);if(q(l,R)&&(r==i||X<g||X==g&&(q(R,r)||R==r)))h=G,r=R;X<g&&(g=X)}else if(q(l,R)&&(r==i||q(R,r)))h=G,r=R}}l=h!==k&&jm(h,c)>g?k:h}else l=k;if(!this.dispatchEvent(new cm("beforedragmove",this,b,this.ya,this.Db,this.Eb,c,d,l)))return m;if(d)this.EA?(this.ya.parentNode!=d||(this.ya.nextElementSibling!=i?this.ya.nextElementSibling:qc(this.ya.nextSibling,j))!=l)&&d.insertBefore(this.ya,l):l&&(this.AC=l),this.ya.style.display=
"",d.Si&&E.add(d,d.Si);else{this.XO||(this.ya.style.display="none");n=0;for(q=this.Sc.length;n<q;n++)r=this.Sc[n],r.Si&&E.remove(r,r.Si)}d!=this.pv&&(this.pv=d,bm(this,this.ya));this.dispatchEvent(new cm("dragmove",this,b,this.ya,this.Db,this.Eb,c,d,l));return m};t.av=function(){am(this);this.Eb=this.Db=this.My=this.Ks=this.pv=this.ya=k;for(var b=0,c=this.Sc.length;b<c;b++)this.Sc[b].Yk=k;b=0;for(c=this.Zk.length;b<c;b++)this.Zk[b].Yk=k};
t.dN=function(b){if(!this.dispatchEvent(new cm("beforedragend",this,b,this.ya,this.Db,this.Eb)))return m;this.EA||this.Ks.insertBefore(this.ya,this.AC);am(this);this.dispatchEvent(new cm("dragend",this,b,this.ya,this.Db,this.Eb));this.av();return j};
a.am=function(b){Uc(b.Eb);b.Db&&L(b.Db);b.ya&&"none"==b.ya.style.display&&(b.Ks.insertBefore(b.ya,b.My),b.ya.style.display="");b.ov&&b.ya?E.remove.apply(k,z.concat(b.ya,b.ov)):b.ya&&(b.ya.style.visibility="visible");for(var c=0,d=b.Sc.length;c<d;c++){var e=b.Sc[c];e.Si&&E.remove(e,e.Si)}};t.iN=function(b){E.add.apply(k,z.concat(b.currentTarget,this.cD))};t.hN=function(b){E.remove.apply(k,z.concat(b.currentTarget,this.cD))};t.gN=function(b){E.add.apply(k,z.concat(b.currentTarget,this.bD))};
t.fN=function(b){E.remove.apply(k,z.concat(b.currentTarget,this.bD))};
a.dm=function(b,c){return b.x>c.left&&b.x<c.left+c.width&&b.y>c.top&&b.y<c.top+c.height},a.jm=function(b,c){var d=b.Yk;return Math.abs(c.y-(d.top+(d.height-1)/2))},a.em=function(b){return b.top+b.height-1},a.gm=function(b){return b.left+b.width-1},a.hm=function(b){return b.left||0},a.fm=function(b,c){return b<c},a.im=function(b,c){return b>c},a.cm=function(b,c,d,e,g,h,l,n,q){hd.call(this,b);this.SX=c;this.event=d;this.NX=e;this.TX=g;this.Yq=h;this.UX=l;this.oY=n;this.pY=q};y(cm,hd);a.om=function(b,c,d){M.call(this);this.mf=b;this.rf=d;this.N=c;N(c,[km,lm,mm,nm],this);this.Ub=k;this.hb=[];this.Vc=-1;this.Ic=0;this.Md=this.Sb=k;this.OE={}};y(om,Hd);t=om.prototype;t.Wh=10;t.Km=j;t.BB=m;t.JI=m;t.kI=m;a.km="hilite",a.lm="select",a.nm="dismiss",a.mm="canceldismiss",a.pm={FW:"rowhilite",GV:km,JW:lm,aJ:nm,cV:mm,iX:"update",yi:"suggestionsupdate"};t=om.prototype;
t.handleEvent=function(b){if(b.target==this.N)switch(b.type){case km:this.De(b.Ro);break;case lm:this.$j();break;case mm:qm(this);break;case nm:this.Ri()}};t.st=function(b,c){this.Ub!=b&&(this.Ub=b,this.mf.gi(this.Ub,this.Wh,v(this.GP,this),c),qm(this))};t.pb=function(){return this.N.T()};
a.rm=function(b){var c=b.Ic+b.hb.length-1;b.Vc>=b.Ic&&b.Vc<c?b.De(b.Vc+1):-1==b.Vc?b.De(b.Ic):b.Vc==c&&(b.BB?b.De(-1):b.JI&&b.De(b.Ic))},a.sm=function(b){b.Vc>b.Ic?b.De(b.Vc-1):b.BB&&b.Vc==b.Ic?b.De(-1):b.JI&&(-1==b.Vc||b.Vc==b.Ic)&&b.De(b.Ic+b.hb.length-1)};t.De=function(b){this.Vc=b;this.N.De(b);return-1!=tm(this,b)};
t.$j=function(){var b=tm(this,this.Vc);if(-1!=b){var b=this.hb[b],c=this.rf.ji(b);this.kI?(this.Ub=k,this.Ri()):this.Hc();c||(this.dispatchEvent({type:"update",Ro:b}),this.kI&&this.rf.update(j));return j}this.Hc();this.dispatchEvent({type:"update",Ro:k});return m};t.Hc=function(){this.Vc=-1;this.Ub=k;this.Ic+=this.hb.length;this.hb=[];window.clearTimeout(this.Md);this.Md=k;this.N.Hc();this.dispatchEvent("suggestionsupdate");this.dispatchEvent(nm)};
t.Ri=function(){this.Md||(this.Md=window.setTimeout(v(this.Hc,this),100))};t.FE=function(){return this.Md?(window.clearTimeout(this.Md),this.Md=k,j):m};a.qm=function(b){b.FE()||window.setTimeout(v(b.FE,b),10)};t.z=function(){om.n.z.call(this);delete this.OE;this.N.H();this.rf.H();this.mf=k};t.GP=function(b,c,d){this.Ub==b&&this.em(c,d)};
t.em=function(b,c){var d="object"==ka(c)&&c,e=(d?d.jY():c)?tm(this,this.Vc):-1;this.Ic+=this.hb.length;this.hb=b;for(var g=[],h=0;h<b.length;++h)g.push({id:this.Ic+h,data:b[h]});h=k;this.Sb&&(h=this.OE[ua(this.Sb)]||this.Sb);this.N.iK=h;this.N.em(g,this.Ub,this.Sb);h=this.Km;d&&d.CM()!==i&&(h=d.CM());(h||0<=e)&&0!=g.length&&this.Ub?this.De(0<=e?this.Ic+e:this.Ic):this.Vc=-1;this.dispatchEvent("suggestionsupdate")};a.tm=function(b,c){var d=c-b.Ic;return 0>d||d>=b.hb.length?-1:d};
t.Ik=function(b){var c=this.rf;c.Ik.apply(c,arguments)};t.update=function(b){this.rf.update(b)};a.wm=function(b){var c;a:{var d=0,e=0;if(um(b))d=b.selectionStart,e=-1;else if(A){var g=vm(b);c=g[0];g=g[1];if(c.inRange(g)){c.setEndPoint("EndToStart",g);if("textarea"==b.type){g.duplicate();d=b=c.text;for(e=m;!e;)0==c.compareEndPoints("StartToEnd",c)?e=j:(c.moveEnd("character",-1),c.text==b?d+="\r\n":e=j);c=[d.length,-1];break a}d=c.text.length;e=-1}}c=[d,e]}return c[0]},a.vm=function(b){var c=b.ownerDocument||b.document,d=c.selection.createRange();"textarea"==b.type?(c=c.body.createTextRange(),
c.moveToElementText(b)):c=b.createTextRange();return[c,d]},a.xm=function(b,c){"textarea"==b.type&&(c=Ja(b.value.substring(0,c)).length);return c},a.um=function(b){try{return"number"==typeof b.selectionStart}catch(c){return m}};a.ym=function(b,c,d,e){M.call(this);e=e||150;this.Nl=d!=k?d:j;this.To=b||",;";this.JL=this.To.substring(0,1);b=this.Nl?"[\\s"+this.To+"]+":"[\\s]+";this.lI=RegExp("^"+b+"|"+b+"$","g");this.TS=RegExp("\\s*["+this.To+"]$");this.pF=c||"";this.TR=this.Nl;this.oa=0<e?new Jd(e):k;this.hc=new ne(this);this.ou=new ne(this);this.nb=new cl;this.iF=-1};y(ym,M);a.zm=(Ng||Og)&&!Eb("533.17.9");t=ym.prototype;t.EU=j;t.zM=j;t.sI=m;t.VS=j;t.US=j;t.ru=k;t.cb=k;t.ho="";t.vi=m;t.rz=m;t.qI=j;t.or=p("cb");t.X=function(){return this.cb.value};
t.Ba=function(b){this.cb.value=b};t.kq=function(b){ra(b)&&1==b.nodeType&&Oc(b,"haspopup",j);this.hc.e(b,"focus",this.Be);this.hc.e(b,"blur",this.Uc);this.cb||(this.ou.e(b,"keydown",this.HQ),ra(b)&&1==b.nodeType&&Kc(Sb(b))==b&&Am(this,b))};t.Ik=function(b){for(var c=0;c<arguments.length;c++)this.kq(arguments[c])};t.ji=function(b,c){Bm(this,b.toString(),c);return m};
a.Bm=function(b,c,d){if(la(d)?d:b.Nl){var d=Cm(b,b.X(),wm(b.cb)),e=Dm(b,b.X());b.TS.test(c)||(c=Ma(c)+b.JL);b.EU&&(0!=d&&!Ha(e[d-1])&&(c=" "+c),d==e.length-1&&(c+=" "));if(c!=e[d]){e[d]=c;c=b.cb;(B||A&&Eb("9"))&&c.blur();c.value=e.join("");for(var g=0,h=0;h<=d;h++)g+=e[h].length;c.focus();d=g;e=b.cb;c=d;um(e)?e.selectionStart=c:A&&(g=vm(e),h=g[0],h.inRange(g[1])&&(c=xm(e,c),h.collapse(j),h.move("character",c),h.select()));e=b.cb;um(e)?e.selectionEnd=d:A&&(g=vm(e),c=g[1],g[0].inRange(c)&&(d=xm(e,d),
e=xm(e,wm(e)),c.collapse(j),c.moveEnd("character",d-e),c.select()))}}else b.Ba(c);b.rz=j};t.z=function(){ym.n.z.call(this);this.ru!=k&&window.clearTimeout(this.ru);this.hc.H();delete this.hc;this.ou.H();this.nb.H()};
t.Zb=function(b){switch(b.keyCode){case 40:if(this.$.pb())return this.sI?sm(this.$):rm(this.$),b.preventDefault(),j;if(!this.Nl)return this.update(j),b.preventDefault(),j;break;case 38:if(this.$.pb())return this.sI?rm(this.$):sm(this.$),b.preventDefault(),j;break;case 9:if(this.$.pb()&&!b.shiftKey){if(this.update(),this.$.$j()&&this.TR)return b.preventDefault(),j}else this.$.Hc();break;case 13:if(this.$.pb()){if(this.update(),this.$.$j())return b.preventDefault(),b.stopPropagation(),j}else this.$.Hc();
break;case 27:if(this.$.pb())return this.$.Hc(),b.preventDefault(),b.stopPropagation(),j;break;case 229:if(!this.vi)return this.vi||(this.hc.e(this.cb,"keyup",this.nG),this.hc.e(this.cb,"keypress",this.mG),this.vi=j),j;break;default:this.oa&&!this.qI&&(this.oa.stop(),this.oa.start())}return Em(this,b)};a.Em=function(b,c){var d=b.Nl&&c.charCode&&-1!=b.To.indexOf(String.fromCharCode(c.charCode));b.VS&&d&&b.update();return b.US&&d&&b.$.$j()?(c.preventDefault(),j):m};t.yr=s(m);
a.Fm=function(b){b.nb.attach(b.cb);b.hc.e(b.nb,"key",b.Co);b.hc.e(b.cb,"mousedown",b.oG);A&&b.hc.e(b.cb,"keypress",b.lG)};t.Be=function(b){Am(this,b.target||k)};a.Am=function(b,c){b.ou.removeAll();b.$&&qm(b.$);c!=b.cb&&(b.cb=c,b.oa&&(b.oa.start(),b.hc.e(b.oa,Kd,b.Rl)),b.ho=b.X(),Fm(b))};t.Uc=function(){zm?this.ru=window.setTimeout(v(this.QG,this),0):this.QG()};
t.QG=function(){this.cb&&(this.hc.Fa(this.nb,"key",this.Co),this.nb.detach(),this.hc.Fa(this.cb,"keyup",this.yr),this.hc.Fa(this.cb,"mousedown",this.oG),A&&this.hc.Fa(this.cb,"keypress",this.lG),this.vi&&Gm(this),this.cb=k,this.oa&&(this.oa.stop(),this.hc.Fa(this.oa,Kd,this.Rl)),this.$&&this.$.Ri())};t.Rl=function(){this.update()};t.HQ=function(b){this.Be(b)};t.Co=function(b){this.iF=b.keyCode;this.$&&this.Zb(b)};t.mG=function(){this.vi&&229!=this.iF&&Gm(this)};
t.nG=function(b){this.vi&&(13==b.keyCode||77==b.keyCode&&b.ctrlKey)&&Gm(this)};t.oG=function(b){this.$&&this.Ce(b)};t.Ce=ba();a.Gm=function(b){b.vi&&(b.vi=m,b.hc.Fa(b.cb,"keypress",b.mG),b.hc.Fa(b.cb,"keyup",b.nG))};t.lG=function(b){Em(this,b)};t.update=function(b){if(this.cb&&(b||this.X()!=this.ho)){if(b||!this.rz){var b=wm(this.cb),c=this.X(),b=Dm(this,c)[Cm(this,c,b)],b=this.lI?String(b).replace(this.lI,""):b;this.$&&(this.$.Sb=this.cb,this.$.st(b,this.X()))}this.ho=this.X()}this.rz=m};
a.Cm=function(b,c,d){b=Dm(b,c);if(d==c.length)return b.length-1;for(var e=c=0,g=0;e<b.length&&g<=d;e++)g+=b[e].length,c=e;return c},a.Dm=function(b,c){if(!b.Nl)return[c];for(var d=String(c).split(""),e=[],g=[],h=0,l=m;h<d.length;h++)b.pF&&-1!=b.pF.indexOf(d[h])?(b.zM&&!l&&(e.push(g.join("")),g.length=0),g.push(d[h]),l=!l):!l&&-1!=b.To.indexOf(d[h])?(g.push(d[h]),e.push(g.join("")),g.length=0):g.push(d[h]);e.push(g.join(""));return e};a.Hm=function(b,c){M.call(this);this.vU=b;this.JA=!c;this.ia=new xe};y(Hm,M);t=Hm.prototype;t.LF="GET";t.wc=i;t.lO=k;t.Qx=k;t.Gz=ca("LF");t.Ja=ca("wc");t.KU=function(b,c,d){var d=He(d.target),e=[];if(d)try{e=Yc(d)}catch(g){}c(b,e)};
t.gi=function(b,c,d){var e,g=this.JA;e=new wf(this.vU);rj(e);e.Gd.set("token",b);c=String(c);rj(e);e.Gd.set("max_matches",c);g=String(Number(g));rj(e);e.Gd.set("use_similar",g);if(e=e.toString())b=v(this.KU,this,b,d),this.ia.ac()&&this.ia.abort(),this.Qx&&Ad(this.Qx),this.Qx=xd(this.ia,"success",b),this.ia.send(e,this.LF,this.wc,this.lO)};t.z=function(){this.ia.H();Hm.n.z.call(this)};a.Km=function(b,c,d,e,g,h,l,n,q){var r=Im(d),w=qg(b),C=gg(b);C&&w.QE(new Rf(C.left,C.top,C.right-C.left,C.bottom-C.top));var C=Tb(b),I=Tb(d);if(C.Da()!=I.Da()){var G=C.Da().body,I=I.Sa(),R=new Nb(0,0),X=bc(Sb(G)),ja=G;do{var Na=X==I?eg(ja):jg(ja);R.x+=Na.x;R.y+=Na.y}while(X&&X!=I&&(ja=X.frameElement)&&(X=X.parent));G=Ob(R,eg(G));A&&!Lc(C)&&(G=Ob(G,Mc(C)));w.left+=G.x;w.top+=G.y}b=(c&4&&fg(b)?c^2:c)&-5;w=new Nb(b&2?w.left+w.width:w.left,b&1?w.top+w.height:w.top);w=Ob(w,r);g&&(w.x+=(b&2?-1:1)*g.x,w.y+=
(b&1?-1:1)*g.y);var Ra;if(l)if(q)Ra=q;else if(Ra=gg(d))Ra.top-=r.y,Ra.right-=r.x,Ra.bottom-=r.y,Ra.left-=r.x;return Jm(w,d,e,h,Ra,l,n)},a.Im=function(b){var c;if(b=b.offsetParent){var d="HTML"==b.tagName||"BODY"==b.tagName;if(!d||"static"!=Zf(b))c=eg(b),d||(d=(d=fg(b))&&B?-b.scrollLeft:d&&(!A||!Eb("8"))?b.scrollWidth-b.clientWidth-b.scrollLeft:b.scrollLeft,c=Ob(c,new Nb(d,b.scrollTop)))}return c||new Nb},a.Jm=function(b,c,d,e,g,h,l){var b=b.clone(),n=0,q=(d&4&&fg(c)?d^2:d)&-5,d=pg(c),l=l?l.clone():
d.clone();if(e||0!=q)q&2?b.x-=l.width+(e?e.right:0):e&&(b.x+=e.left),q&1?b.y-=l.height+(e?e.bottom:0):e&&(b.y+=e.top);if(h){if(g){n=b;e=0;if(65==(h&65)&&(n.x<g.left||n.x>=g.right))h&=-2;if(132==(h&132)&&(n.y<g.top||n.y>=g.bottom))h&=-5;n.x<g.left&&h&1&&(n.x=g.left,e|=1);n.x<g.left&&(n.x+l.width>g.right&&h&16)&&(l.width=Math.max(l.width-(n.x+l.width-g.right),0),e|=4);n.x+l.width>g.right&&h&1&&(n.x=Math.max(g.right-l.width,g.left),e|=1);h&2&&(e|=(n.x<g.left?16:0)|(n.x+l.width>g.right?32:0));n.y<g.top&&
h&4&&(n.y=g.top,e|=2);n.y>=g.top&&(n.y+l.height>g.bottom&&h&32)&&(l.height=Math.max(l.height-(n.y+l.height-g.bottom),0),e|=8);n.y+l.height>g.bottom&&h&4&&(n.y=Math.max(g.bottom-l.height,g.top),e|=2);h&8&&(e|=(n.y<g.top?64:0)|(n.y+l.height>g.bottom?128:0));n=e}else n=256;if(n&496)return n}ag(c,b);Qb(d,l)||(g=Lc(Tb(Sb(c))),A&&(!g||!Eb("8"))?(b=c.style,g?(g=yg(c),c=hg(c),b.pixelWidth=l.width-c.left-g.left-g.right-c.right,b.pixelHeight=l.height-c.top-g.top-g.bottom-c.bottom):(b.pixelWidth=l.width,b.pixelHeight=
l.height)):(c=c.style,B?c.MozBoxSizing="border-box":D?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(l.width,0)+"px",c.height=Math.max(l.height,0)+"px"));return n};a.Lm=function(b,c,d,e){M.call(this);this.Wa=b||document.body;this.ca=Tb(this.Wa);this.No=!b;this.g=k;this.Ub="";this.hb=[];this.cg=[];this.QH=this.Dl=-1;this.lb=m;this.className="ac-renderer";this.hi="ac-row";this.lF="active";this.qu="ac-active";this.pO="ac-highlighted";this.Uk=c||k;this.uI=e!=k?e:j;this.Jr=m;this.ES=!!d;this.Rt=m;this.oo=0};y(Lm,Hd);t=Lm.prototype;t.m=p("g");t.eg=ca("uI");
t.em=function(b,c,d){this.Ub=c;this.hb=b;this.Dl=-1;this.QH=za();this.Sb=d;this.cg=[];this.g||(this.g=b=this.ca.w("div",{style:"display:none"}),E.add(b,this.className),Nc(b,Wc.bB),b.id=Kh(Jh.P()),this.ca.appendChild(this.Wa,b),N(b,"click",this.ur,m,this),N(b,"mousedown",this.gj,m,this),N(b,"mouseover",this.YD,m,this));this.Rt&&(this.g.style.visibility="hidden");this.FU&&(this.g.style.minWidth=this.FU.clientWidth+"px");this.cg.length=0;this.ca.bt(this.g);if(this.Uk&&this.Uk.Y)this.Uk.Y(this,this.g,
this.hb,this.Ub);else{var e=k;O.forEach(this.hb,function(b){b=Mm(this,b,this.Ub);this.Rt?this.g.insertBefore(b,e):this.ca.appendChild(this.g,b);e=b},this)}0==this.hb.length?this.Hc():(this.show(),this.ma(),ug(this.g,j))};t.Hc=function(){this.Sb&&Oc(this.Sb,"activedescendant","");this.lb&&(this.lb=m,this.Sb&&Oc(this.Sb,Vc.Ak,m),0<this.oo?(Uc(this.Gk),this.Gk=new Nj(this.g,this.oo),this.Gk.play()):Q(this.g,m))};
t.show=function(){this.lb||(this.lb=j,this.Sb&&(Nc(this.Sb,Wc.YI),Oc(this.Sb,Vc.UI,"list"),Oc(this.Sb,Vc.Ak,j)),0<this.oo?(Uc(this.Gk),this.Gk=new Oj(this.g,this.oo),this.Gk.play()):Q(this.g,j))};t.T=p("lb");a.Nm=function(b,c){var d=0<=c&&c<b.cg.length?b.cg[c]:i;b.dispatchEvent({type:"rowhilite",lZ:d})&&(0<=b.Dl&&E.remove(b.cg[b.Dl],b.qu,b.lF),b.Dl=c,d&&(E.add(d,b.qu,b.lF),b.Sb&&Oc(b.Sb,"activedescendant",d?d.id:""),ig(d,b.g)))};
t.De=function(b){if(-1==b)Nm(this,-1);else for(var c=0;c<this.hb.length;c++)if(this.hb[c].id==b){Nm(this,c);break}};t.ma=function(){if(this.Sb&&this.No){var b;b=this.ES?3:1;this.Rt&&(b^=1);Km(this.iK||this.Sb,b,this.g,b^1,k,k,65);this.Rt&&(this.g.style.visibility="visible")}};t.z=function(){this.g&&(yd(this.g,"click",this.ur,m,this),yd(this.g,"mousedown",this.gj,m,this),yd(this.g,"mouseover",this.YD,m,this),this.ca.removeNode(this.g),this.g=k,this.lb=m);Uc(this.Gk);this.Wa=k;Lm.n.z.call(this)};
t.fH=function(b,c,d){d.innerHTML=Va(b.data.toString())};
a.Om=function(b,c,d){if(3==c.nodeType){var e=k;ma(d)&&(1<d.length&&!b.Jr)&&(e=z.slice(d,1));var g="";d&&(ma(d)&&(d=z.filter(d,function(b){return!Ha(b==k?"":String(b))})),b.Jr?ma(d)?g=z.map(d,$a).join("|"):(g=d.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,""),g=$a(g),g=g.replace(/ /g,"|")):ma(d)?g=0<d.length?$a(d[0]):"":/^\W/.test(d)||(g=$a(d)));d=g;if(0!=d.length){for(var g=c.nodeValue,h=RegExp("([\\s\\S]*?)\\b("+d+")","gi"),d=[],l=0,n=h.exec(g),q=0;n;)q++,d.push(n[1]),d.push(n[2]),l=h.lastIndex,
n=h.exec(g);d.push(g.substring(l));if(1<d.length){e=!b.Jr?1:q;for(g=0;g<e;g++)h=2*g,c.nodeValue=d[h],l=b.ca.createElement("b"),l.className=b.pO,b.ca.appendChild(l,b.ca.createTextNode(d[h+1])),l=c.parentNode.insertBefore(l,c.nextSibling),c.parentNode.insertBefore(b.ca.createTextNode(""),l.nextSibling),c=l.nextSibling;b=z.slice(d,2*e);c.nodeValue=b.join("")}else e&&Om(b,c,e)}}else for(c=c.firstChild;c;)e=c.nextSibling,Om(b,c,d),c=e},a.Mm=function(b,c,d){var e=b.ca.w("div",{className:b.hi,id:Kh(Jh.P())});
Nc(e,Wc.eB);b.Uk&&b.Uk.Zc?b.Uk.Zc(c,d,e):b.fH(c,d,e);d&&b.uI&&Om(b,e,d);E.add(e,b.hi);b.cg.push(e);return e},a.Pm=function(b,c){for(;c&&c!=b.g&&!E.has(c,b.hi);)c=c.parentNode;return c?z.indexOf(b.cg,c):-1};t.ur=function(b){var c=Pm(this,b.target);0<=c&&this.dispatchEvent({type:lm,Ro:this.hb[c].id});b.stopPropagation()};t.gj=function(b){b.stopPropagation();b.preventDefault()};t.YD=function(b){b=Pm(this,b.target);0<=b&&!(300>za()-this.QH)&&this.dispatchEvent({type:km,Ro:this.hb[b].id})};a.Qm=function(){};
Qm.prototype.Y=ba();Qm.prototype.Zc=ba();a.Rm=function(b,c,d,e){this.mf=b=new Hm(b,!e);e=new Lm;d=new ym(k,k,!!d,300);om.call(this,b,e,d);d.$=this;d.Ik(c)};y(Rm,om);Rm.prototype.eg=function(b){this.N.eg(b)};Rm.prototype.Gz=function(b){this.mf.Gz(b)};Rm.prototype.Ja=function(b){this.mf.Ja(b)};a.Sm=function(b){T.call(this);this.IR=b};y(Sm,T);t=Sm.prototype;t.ea=function(b){Sm.n.ea.call(this,b);this.je=$("input",b);this.td=$(".zm-profile-details-items",this.g);this.Xp=[];var c=this;c.Xp=this.je.map(function(){var b=new Tm("/topic/autocomplete",this,c.IR||$(this).parents(".topic-input-wrap")[0]);b.Km=m;var e=v(c.filter,c);b.filter=e;return b});this.fm()};
t.C=function(){this.h().e(J("add",this.g),"click",this.add);var b=this;this.je.each(function(){b.h().e(this,"keydown",function(b){this.keydown(b)})});z.forEach(this.Xp,function(c){b.h().e(c.N,lm,b.select)});this.td.on("click","[name='del']",$.proxy(this.remove,this));this.fm()};t.fm=function(){if(!dh.Ac){var b=this;this.Gf&&this.Gf.H();var c=new Zl;c.Zq="profile-edit-item-moving";$l(c,this.td[0],0);c.B();this.Gf=c;$('a, input, [role="button"]',this.td).each(function(){b.h().e(this,"mousedown",function(b){b.stopPropagation()})})}};
t.keydown=function(b){13===b.keyCode&&setTimeout(v(function(){Um(this)&&this.add();this.je[0].value&&(this.je[1]&&!this.je[1].value)&&this.je[1].focus()},this));return j};a.Um=function(b){return z.every(b.je,function(b){return!!b.value})},a.Vm=function(b){z.forEach(b.je,function(b){b.value=""});b.je[0].focus()};t.select=function(){Um(this)&&this.add()};
t.add=function(){var b=La(this.je[0].value),c={title:b,member_url_token:jh["1"]};if(this.je[1]){var d=La(this.je[1].value);if(!b&&!d)return;c.sub_title=d}bk("ProfileEditItemV2",c,this.cQ,this)};t.cQ=function(b){var b=$(b),c;if(b.data("title")){if(c=this.td.find("[data-title='"+b.data("title")+"']")[0]){Hk(c);Vm(this);return}}else if(b.data("sub-title")&&(c=this.td.find("[data-sub-title='"+b.data("sub-title")+"']")[0])){Hk(c);Vm(this);return}this.td.append(b);this.fm();Vm(this);this.dispatchEvent("add")};
t.remove=function(b){$(b.target).parents("li").remove();this.dispatchEvent("remove")};Sm.prototype.filter=function(b){return z.filter(b,function(b){return!this.td.find("[data-title='"+b+"']")[0]},this)};a.Tm=function(b,c,d,e,g){this.mf=b=new Hm(b,!g);d=new Lm(d);e=new ym(k,k,!!e,300);om.call(this,b,d,e);e.$=this;e.Ik(c);(e=c.getAttribute("placeholder"))&&new Ul(c,e)};y(Tm,Rm);
Tm.prototype.em=function(b,c){b=b[0].slice(1);b=z.filter(b,function(b){return 3<b.length});b=z.map(b,function(b){return b[1]});this.filter&&(b=this.filter(b));Tm.n.em.call(this,b,c)};$.validator.addMethod("datetime",function(b,c){return this.optional(c)||moment(b,"YYYY-MM-DDTHH:mm:ss").isValid()},"时间格式不正确");$.validator.addMethod("dateGreaterThan",function(b,c,d){return new Date(b)>new Date($(d).val())},"时间范围不正确");a.Wm="AC ACADEMY AD AE AERO AF AG AI AL AM AN AO AQ AR ARPA AS ASIA AT AU AW AX AZ BA BB BD BE BF BG BH BI BIKE BIZ BJ BM BN BO BR BS BT BUILDERS BUZZ BV BW BY BZ CA CAB CAMERA CAMP CAREERS CAT CC CD CENTER CEO CF CG CH CI CK CL CLOTHING CM CN CO CODES COFFEE COM COMPANY COMPUTER CONSTRUCTION CONTRACTORS COOP CR CU CV CW CX CY CZ DE DIAMONDS DIRECTORY DJ DK DM DO DOMAINS DZ EC EDU EDUCATION EE EG ENTERPRISES EQUIPMENT ER ES ESTATE ET EU FARM FI FJ FK FLORIST FM FO FR GA GALLERY GB GD GE GF GG GH GI GL GLASS GM GN GOV GP GQ GR GRAPHICS GS GT GU GURU GW GY HK HM HN HOLDINGS HOLIDAY HOUSE HR HT HU ID IE IL IM IN INFO INSTITUTE INT INTERNATIONAL IO IQ IR IS IT JE JM JO JOBS JP KAUFEN KE KG KH KI KITCHEN KM KN KP KR KW KY KZ LA LAND LB LC LI LIGHTING LIMO LK LR LS LT LU LV LY MA MANAGEMENT MC MD ME MENU MG MH MIL MK ML MM MN MO MOBI MP MQ MR MS MT MU MUSEUM MV MW MX MY MZ NA NAME NC NE NET NF NG NI NINJA NL NO NP NR NU NZ OM ONL ORG PA PE PF PG PH PHOTOGRAPHY PHOTOS PK PL PLUMBING PM PN POST PR PRO PS PT PW PY QA RE RECIPES REPAIR RO RS RU RUHR RW SA SB SC SD SE SEXY SG SH SHOES SI SINGLES SJ SK SL SM SN SO SOLAR SOLUTIONS SR ST SU SUPPORT SV SX SY SYSTEMS SZ TATTOO TC TD TECHNOLOGY TEL TF TG TH TIPS TJ TK TL TM TN TO TODAY TP TR TRAINING TRAVEL TT TV TW TZ UA UG UK UNO US UY UZ VA VC VE VENTURES VG VI VIAJES VN VOYAGE VU WF WS XXX YE YT ZA ZM ZW".split(" ");
$.validator.addMethod("realEmail",function(b){return z.contains(Wm,z.Le(b.split(".")).toUpperCase())},"请输入真实的邮箱地址");$.validator.addMethod("strongPassword",function(b,c){return this.optional(c)||/^(?=.*?[A-Za-z])(?=.*?[0-9]).{8,}$/.test(b)},"密码必须包含字母和数字，且不小于 8 位");a.Ym=function(b,c,d,e){if(b&&c){var g=0,h=S.Fd;h&&(g=h);var h=0,l=Of.get("q_c1");l&&(h=l.split("|")[0]);d=d||S.NH||0;e=e||S.SG||0;g={t:"event",tid:"zhihu.web.register",cid:h,uid:g,url:b,qqId:e,sinaId:d,action:c,referer:location.href};(new Image).src="http://analytics.zhihu.com/zat.gif?"+$.param(g);"view"===c&&(bj.remove("zhza"),Xm(b,"success",d,e))}},a.Xm=function(b,c,d,e){var g=Xc(bj.get("zhza"))||[],b=[{url:b,action:c,time:za(),qqId:e,sinaId:d}];g&&(b=g.concat(b));bj.ce("zhza",$c(b))};a.Zm=function(b){T.call(this);$.extend(this.options={},this.defaults,b||{});this.WF=(new wf(location.href)).Kc().get("next")};y(Zm,T);t=Zm.prototype;t.defaults={Fv:function(b,c){$m(this,b).toggle(c);an(this);bn(this,b)}};t.Rf=m;t.iu={signup:["signcontrol","signup","sina"],signin:["signcontrol","signin","sina"]};a.cn=function(b){b.Av();b.WF?location.href=b.WF:b.Rf?location.href="/":location.reload()};t.C=function(){Zm.n.C.call(this);this.K.show();this.ab("登录或注册");this.ah(500);an(this)};
t.ea=function(b){Zm.n.ea.call(this,b);this.K=$(b);sb&&!Og?this.K.addClass("mobile"):this.K.addClass("dialog");this.Rf&&(this.K=$(document.body));var b=this.Rf?k:function(b,c){var d=c.parent();c.is("[type=checkbox]")||c.is("[type=radio]")?b.insertAfter(d):d.hasClass("zg-form-text-input-group")||d.hasClass("zg-form-text-input-group-horizontal")?d.append(b):b.insertAfter(c)},c={confirm_password:{equalTo:"密码不一致",minlength:$.validator.format("密码长度不应小于 {0} 位"),maxlength:$.validator.format("密码长度不应大于 {0} 位")},
password:{minlength:$.validator.format("密码长度不应小于 {0} 位"),maxlength:$.validator.format("密码长度不应大于 {0} 位"),required:"密码未填写"},last_name:{required:"姓氏未填写"},first_name:{required:"名字未填写"},email:{required:"邮箱未填写"}},b={submitHandler:this.yQ,errorPlacement:b,messages:c,onfocusout:$.noop,highlight:function(b,c,d){"radio"===b.type?this.rD(b.name).addClass("error").removeClass(d):$(b).addClass("error").removeClass(d)},errorClass:"validate-error"};this.Rf&&(b=$.extend({},b,{errorContainer:"#summary",errorLabelContainer:"#summary ul",
wrapper:"li",showErrors:function(b,c){if(0<c.length){var d=[];d.push("<ul>");$.each(c,function(b,c){d.push('<li><i class="icon-sign icon-sign-error"></i>'+c.message+"</li>")});d.push("</ul>");$("#summary").html(d.join("")).show()}else $("#summary").hide().html("")}}));this.ut=b;(b=Of.get("r_e"))?(this.dl=(c=b.match(/\"(.+)\"/))?c[1]:b,this.Wk="signup"):this.Wk=this.Wk||"signup";dn(this,this.iu[this.Wk]);var d=this;this.K.on("click",".js-signup",$.proxy(this.Uz,this));this.K.on("click",".js-signin",
$.proxy(this.KH,this));this.K.on("click",".js-bindsignin",function(b){Y.V({type:"ga_click_sign_in_link_account",target:b.target});dn(d,["bindsignin"]);d.Hf()});this.K.on("click",".js-bindweibo",function(){Y.V({type:"ga_click_sign_in_weibo",label:"sign_in_box_weibo"});bl("sina");return m}).on("click",".js-weiboname",function(){Y.V({type:"ga_click_sign_in_connect",label:"sign_in_connect_weibo"});bl("sina");return m}).on("click",".js-bindqq",function(){Y.V({type:"ga_click_sign_in_qq",label:"sign_in_box_qq"});
bl("qq");return m}).on("click",".js-qqname",function(){Y.V({type:"ga_click_sign_in_connect",label:"sign_in_connect_weibo"});bl("qq");return m});this.gu=$(".view-signcontrol",this.g);this.gu.find('[type="radio"]').on("change",$.proxy(function(b){b=$(b.target).val();en(this,"signin","signin"===b);en(this,"signup","signup"===b);Y.V({type:"ga_click_sign_in_switch",data:b})},this)).filter("[value="+this.Wk+"]").prop("checked",j);var b=$(".view-signin",this.g).find("form"),c=$('input[name="email"]',b),
e=bj.get("lastuser:email");!c.val()&&e&&c.val(e);b.validate($.extend({},this.ut,{js:$.proxy(this.tG,this)}));this.Qp=b;var g=this;g.DZ=(g.og=$(".view-signup",g.g)).find("form").validate($.extend({},g.ut,{js:$.proxy(g.bR,g),rules:{email:{email:j,realEmail:j}}}));g.dl&&(g.Uz(),g.og.find("[name=email]").val(g.dl));g.og.find('input[name="accept_terms"]').on("change",function(){g.og.find("[type=submit]").prop("disabled",!$(this).prop("checked")).toggleClass("disabled",!$(this).prop("checked"))});if(!A||
!Eb("8"))g.og.on("change","input, textarea, select",function(){g.Jv()});this.h().e(Y,["accountcallback","sina_callback","qqconn_callback"],$.proxy(this.bG,this));this.OI=$(".view-bindtip",this.g);var h=this;h.CZ=(h.dd=$(".view-info",h.g)).find("form").validate($.extend({},h.ut,{js:$.proxy(h.BQ,h)}));h.dd.on("change",'input[name="iamstudent"]',function(){$(this).prop("checked")?(h.dd.find(".js-workerinfo").hide(),h.dd.find(".js-studentinfo").show(),an(h),fn(h)):(h.dd.find(".js-workerinfo").show(),
h.dd.find(".js-studentinfo").hide())}).on("change",'input[name="gender"]',function(){var b=$(".js-avatar",h.K);"http://p2.zhimg.com/da/8e/da8e974dc_xl.jpg"===b.attr("src")&&b.attr("src","http://p2.zhimg.com/da/8e/da8e974dc_xl.jpg")});fn(h);var l=this;(l.Kp=$(".view-bindsignin",l.g)).find("form").validate($.extend({},l.ut,{js:$.proxy(l.iQ,l)}));l.Kp.on("click",".js-backto-info",function(b){Y.V({type:"ga_click_sign_in_link_account",target:b.target});dn(l,["bindtip","info"]);return m});sb&&l.Kp.find("input[type=submit]").val("登录");
var n=this;n.PU=$(".view-warmup",n.g).on("click",".js-gotoinfo",function(){n.vE=j;Rk("/signup/form");Ym("/signup/form","view");dn(n,["info"]);n.Rf&&(dn(n,["info","bindtip"]),n.OI.find("span").hide());n.Hf();return m});var q=this;q.Bm=$(".view-followtopic",q.g);q.Bm.on("click",".js-gotofollowpeople",qf(function(){Y.V({type:"ga_click_follow_topic",data:q.hU||0})},zk(function(){Ym("/signup/suggested_users","view")}),v(q.QD,q))).on("click","a.box",qf(zk(function(){Ym("/signup/suggested_topics","follow_topic")}),
q.yD));$(document).on("followchange",function(){var b=q.Bm.find("a.box.followed").length;q.Bm.find(".js-gotofollowpeople").text(0<b?"下一步":"跳过");q.hU=b;q.LR=q.wk.find("a.box.followed").length});var r=this;r.wk=$(".view-followpeople",r.g);r.wk.on("click",".js-gotofollowtopoic",function(){Y.V({type:"ga_click_sign_in_previous_step"});gn(r)}).on("click",".js-startuse",function(){Y.V({type:"ga_click_follow_people",data:r.LR||0});Qk(["/signup/succeed"]);cn(r)}).on("click",".js-gotoapp",qf(zk(function(){Ym("/signup/appdownload",
"view")}),v(r.LM,r))).on("click","a.box",qf(zk(function(){Ym("/signup/suggested_users","follow_people")}),r.yD));var w=this;$(".view-app",w.g).on("click",".js-gotofollowpeople",function(){w.QD()}).on("click",".js-startuse",function(){Qk(["/signup/succeed"]);Xm("/signup/appdownload","start_use",S.NH,S.SG);cn(w)}).on("click",".js-downloadapp",zk(function(){Ym("/signup/appdownload","download_app")}));this.Hf();b=Of.get("accountcallback");Of.remove("accountcallback");if(b){b=decodeURIComponent(b);try{var C=
JSON.parse(b);Y.dispatchEvent(new hn("accountcallback",C))}catch(I){}}var G=this;A&&Eb("8")&&$(function(){$("input",G.g).keydown(function(b){if(13===b.keyCode)return $(this).parents("form").submit(),m})})};t.Jv=function(){$(window).on("beforeunload.SignFlow",v(s("注册还未完成，确认离开该页面吗？"),this))};t.Av=function(){$(window).off("beforeunload.SignFlow")};a.an=function(b){Vl||setTimeout(function(){$("input[placeholder]:visible",b.g).placeholder()},10)};
t.bG=function(b){b=b.pc;S.SG=b.qq_id;S.NH=b.sina_id;if(1===b.login&&("qqconn"===b.type?Qk(["/signin/connect/qq"]):Qk(["/signin/connect/weibo"]),!this.vE))return cn(this),m;this.vE?dn(this,["info","bindtip"]):(dn(this,["warmup","bindtip"]),this.K.find(".js-weibo-bind-name-transfer").insertAfter(".main-info>div:first-child"));"qqconn"===b.type?(this.dd.find(".js-qqname").text(b.name).removeClass("zg-btn-blue js-qqname").addClass("binded"),this.K.find(".js-avatar").attr("src",b.img)):"sina"===b.type&&
(0===$("#follow-official-weibo").length&&this.K.find(".sns-wrap").append('<div id="follow-official-weibo" style="margin-top:15px;"><label><input name="followzhihu" type="checkbox" checked> 关注 <a target="_blank" href="http://e.weibo.com/zhihu">@知乎</a> 官方微博</label></div>'),this.dd.find(".js-weiboname").text(b.name).removeClass("zg-btn-red js-weiboname").addClass("binded"),this.K.find(".js-avatar").attr("src",b.img));this.dd.find(".zm-entry-head-avatar-edit-button").remove()};
a.fn=function(b){sb||b.dd.find("input[aria-haspopup]").each(function(){var b=$(this).data();b.kO||(new Tm("/topic/autocomplete",this,$(this).parent()[0]),b.kO=j)})};t.Uz=function(){this.Rf&&(location.hash="signup");this.gu.find("input[type=radio][value=signup]").prop("checked",j);dn(this,this.iu.signup);this.og.find("[name=email]").val(this.Qp.find("[name=email]").val());an(this);this.Hf();return m};
t.KH=function(){this.Rf&&(location.hash="signin");this.gu.find("input[type=radio][value=signin]").prop("checked",j);dn(this,this.iu.signin);this.Qp.find("[name=email]").val(this.og.find("[name=email]").val());this.Hf();return m};a.jn={people:Yj,topic:ak};t=Zm.prototype;
t.yD=function(){var b=$(this),c=b.data();if(!c.disabled)return c.disabled=j,jn[c.type](c.id,!b.hasClass("followed")).done(function(){var c=b.hasClass("followed")?"关注":"已关注";b.toggleClass("followed");$(document).trigger("followchange");b.find(".follow-tip span").text(c)}).always(function(){c.disabled=m}),m};t.sy=m;
t.yQ=function(b){function c(){d.disabled=m}var d=$(b).data();if(!d.disabled){d.disabled=j;var e=this;var g=$(b);if(g.data("nosubmit")===j)b=$.Deferred().resolve().promise();else{var h=$(b).serializeArray();(g=g.data("otherform"))&&$.each($(g).serializeArray(),function(b,c){z.some(h,function(b){return b.name===c.name})||h.push(c)});b=$.post(b.action,$.param(h))}b.done(e.settings.js).done(function(b){b&&b.r&&($.isPlainObject(b.msg)?e.showErrors(b.msg):"string"===$.type(b.msg)&&U(b.msg))}).always(c)}};
t.tG=function(b){b&&!b.r?(Qk(["/signin"]),cn(this)):b.msg&&this.Hf()};t.iQ=function(b){Y.V({type:"ga_click_sign_in_link_account",label:"sign_in_box_sign_in_link_account"});this.tG(b)};
t.Hf=function(){var b=$(".js-captcha",this.K);b&&("1"===Of.get("l_c")||"1"===Of.get("r_c")?("1"===Of.get("r_c")&&(this.dd.find("input[name=email]").is(":visible")?b.appendTo(this.dd.find(".main-info")).show():this.og.is(":visible")&&b.insertBefore(this.og.find(".captcha-holder")).show()),"1"===Of.get("l_c")&&(this.Kp.is(":visible")?b.appendTo(this.Kp.find(".formbar")).show():this.Qp.is(":visible")&&b.insertBefore(this.Qp.find(".captcha-holder")).show()),this.Hf.OK||$(".js-refresh-captcha",this.K).click($.proxy(this.aH,
this)),this.Hf.OK=j,b.find('input[name="captcha"]').prop("disabled",m),this.aH()):(b.hide(),b.find('input[name="captcha"]').prop("disabled",j)))};t.aH=function(){$(".js-captcha-img",this.K).attr("src","/captcha.gif?r="+za())};
t.bR=function(b){if(b&&!b.r){S.Fd=b.msg;var c=this,d=this.dd.find(".avatar-info"),e=new Rl(Ql);e.o(d.get(0));e.on("success",qf(function(b){Y.V({type:"ga_click_sign_in_avatar"});c.dd.find('input[name="avatar_path"]').val(e.getData());d.find(".zm-avatar-editor-preview").get(0).src=b.src},zk(function(){Ym("/signup/form","upload_avatar")})),m,this);dn(this,["warmup"]);this.dd.find("input[name=email]").val(this.og.find("input[name=email]").val()).parent().hide();this.sy=j}else this.Hf()};
t.BQ=function(b){b&&!b.r?(S.Fd=b.msg,gn(this),Ym("/signup/suggested_topics","view"),this.dd.find("input[name=headline]").val()&&Ym("/signup/form","add_headline"),this.sy=j):this.Hf()};a.gn=function(b){$.get("/register/interests").done(function(c){b.Bm.find("ul").html(Sk(b.iU,{each:z.forEach,topics:c.msg}))});dn(b,["followtopic"]);$(document).trigger("followchange");b.Bm.find("ul").html($("<div>").text("加载中…").css("margin-top","150px").css("text-align","center"));Rk("/signup/suggested_topics")};
t.QD=function(){var b=this;$.get("/register/recommendations").done(function(c){b.wk.find("ul").html(Sk(b.MR,{each:z.forEach,persons:c.msg}));b.wk.find("a.box.followed").length&&b.wk.find(".friendsfollowed").show()});dn(this,["followpeople"]);b.wk.find("ul").html($("<div>").text("加载中…").css("margin-top","150px").css("text-align","center"));Rk("/signup/suggested_users")};
t.LM=function(){Rk("/signup/appdownload");this.ah(825);$("#js-form-wrapper").width(770).css("margin","0 0 0 -386px").css("top","150px").css("height","auto");dn(this,["app"])};t.ab=function(b){var c=this.getParent();c&&c.ab&&(c.ab(b),$($h(c)).removeClass("title-rich"))};t.qt=function(b){var c=this.getParent();c&&c.qt&&c.qt(b)};t.ah=function(b){var c=this.getParent(),d;if(c&&c.m&&(d=c.m(),!sb||Og))$(d).width(b),c.ma()};
a.dn=function(b,c){function d(b){return z.contains(c,b)}if(b.Rf){$("#summary").hide();d("signin")?($(".hideinlogin").hide(),$(".hideinreg").css("display","inline-block")):($(".hideinlogin").css("display","inline-block"),$(".hideinreg").hide());if(d("warmup")||d("info")||d("app"))b.K.addClass("regflow"),$(".hideinlogin").hide();(d("signin")||d("signup"))&&b.K.removeClass("regflow");if(d("info"))$("#summary").prependTo($(".main-info"));else if(d("bindsignin"))$("#summary").insertAfter($(".formbar"));
else{var e=$m(b,d("signin")?"signin":"signup");$("#summary").insertBefore(e.find(".command"))}(d("followtopic")||d("followpeople"))&&$(".hideinlogin").hide()}b.GE=d("signin")||d("signup")?j:m;if(d("warmup")||d("info"))b.qt(m),e=b.getParent(),$(e&&e.m?e.m():document.body).addClass("bg-signup"),b.ab("注册知乎"),b.ah(550),an(b);d("warmup")&&(Rk("/signup/splash"),Ym("/signup/splash","view"));d("bindsignin")&&b.ab("登录并绑定微博");if(d("followtopic")&&(b.ab("关注话题"),b.ah(825),b.Rf&&(!sb||Og)))$("#js-form-wrapper").width(825).css("margin",
"0 0 0 -412px").css("top","150px").css("height","auto"),$(".footer").css("bottom","-100px"),$(".view-followtopic").width(825),$(".view-followpeople").width(825);d("app")&&b.ab("下载「知乎客户端」");d("followpeople")&&b.ab("关注用户");$("div.view",b.g).hide();$.each(c,function(c,d){en(b,d)});b.CL=c},a.$m=function(b,c){return $(".view-"+c,b.g)},a.en=function(b,c,d){d="undefined"===$.type(d)?j:!!d;b.options.Fv.call(b,c,d);d&&(b.CL=[c])},a.bn=function(b,c){var d=$m(b,c).find("input:text,input[type=email]").filter(":visible").get(0);
setTimeout(function(){d&&d.focus()})};t.iU='<% each(topics, function(topic, i) { %> <li><a class="box <%= topic.is_following ? "followed" : "" %> " href="javascript:;" data-type="topic" data-id="<%=topic.topic_id%>" ><img src="<%=topic.topic_avatar%>" alt="<%-topic.topic_name%>" /><div><strong class="topicname"><%=topic.topic_name%></strong><div class="extra-info"><strong><%=topic.topic_follower_num%></strong> 人关注<br><strong><%=topic.topic_answer_num%></strong> 个精彩回答</div><div class="follow-tip"><i class="icon-green-check"></i><span><%= topic.is_following ? "已关注" : "关注" %></span></div></div></a></li><% }) %>';
t.MR='<% each(persons, function(person, i) { %> <li><a class="box <%= person.is_following ? "followed" : "" %>" href="javascript:;" data-type="people" data-id="<%=person.member_id %>"><img src="<%=person.member_avatar %>" alt="<%-person.member_fullname %>" /><div><strong class="peoplename"><%=person.member_fullname %></strong><div class="extra-info"><%=person.description %></div><div class="follow-tip"><i class="icon-green-check"></i><span><%= person.is_following ? "已关注" : "关注" %></span></div></div></a></li><% }) %>';a.kn=function(b){Yh.call(this,i,i,i);this.nn=j;setTimeout(v(function(){this.F(j);this.wb=b||k;this.aT.apply(this,this.qT[b]||[])},this))};y(kn,Ai);a.ln=Wj(function(){return $.get("/node/SignFlowV2")});t=kn.prototype;
t.qT={question_answer_vote_up:["voteup","加入知乎，即可投「赞同」票","精彩回答值得推荐"],question_answer_vote_down:["votedown","加入知乎，即可投「反对」票","把错误的认知踩在脚下"],question_follow_button:["follow","加入知乎，即可订阅最新回答","有新回答时通知你"],people_follow_button:["follow","加入知乎，即可和 TA 互动交流","结识好友、搭档和大牛"],topic_follow_button:["follow","加入知乎，即可关注话题","订阅话题下更多精彩内容"],question_question_share:["share","加入知乎，即可和朋友分享精彩内容","分享到新浪微博或通过私信分享"],question_answer_share:["share","加入知乎，即可和朋友分享精彩内容","分享到新浪微博或通过私信分享"],question_answer_collect:["favo","加入知乎，即可收藏精彩回答",
"你可以把好内容装进一个收藏夹，方便随时查看"],question_answer_add_comment_start:["comment","加入知乎，即可发表你的评论","你的参与，会让讨论更加全面"],question_comment_box:["comment","加入知乎，即可发表你的评论","你的参与，会让讨论更加全面"],question_answer_comment_box:["comment","加入知乎，即可发表你的评论","你的参与，会让讨论更加全面"],question_answer_thank:["thank","加入知乎，即可「感谢」作者","用最简单的方式赞美认真的态度认真的人"],question_answer_add_start:["answer","加入知乎，即可回答该问题","你的知识、经验和见解可以帮助别人"],expand:["default","加入知乎，即可阅读更多内容","一起发现更大的世界"],top_nav_ask:["ask","加入知乎，即可继续「提问」","这里有专业人士提供专业的见解，让你得到满意的答案"]};
t.Y=function(){S.wa()||kn.n.Y.call(this)};t.Vz=j;t.WT=Sk('    <span class="sign-icon sign-icon-<%- icon %>"></span>    <div class="title"><%= title %></div>    <div class="sub-title"><%= subTitle %></div>  ');t.aT=function(b,c,d){var e=$;Zh(this);var e=e(this.yf),g=$($h(this));b?(e.html(this.WT({icon:b,title:c,subTitle:d})),g.addClass("title-rich")):(e.text("登录或注册"),g.removeClass("title-rich"))};
a.mn=function(b,c){b.Vz=c;if(b.Kh)if(b.Vz){var d=b.Kh;d.GE&&d.Uz()}else d=b.Kh,d.GE&&d.KH()},a.nn=function(b){b.h().e(Y,"accountcallback",function(c){if(1===c.pc.login)return location.reload(),m;b.F(j);b.Kh&&b.Kh.bG(c)})};
t.C=function(){kn.n.C.call(this);$(this.m()).addClass("sign-dialog");this.Ja('<div style="text-align: center; color: #999;">加载中<i class="spinner-gray"></i></div>');this.h().e(this,"aftershow",function(){var b=this.Vz?"signup":"signin";if(this.Kh)bn(this.Kh,b);else{var c=v(function(c){c=gc(La(c));this.Z().innerHTML="";this.Z().appendChild(c);var e=this.Kh=new Zm;this.J(e);e.Wk=b;e.o(c);this.ma()},this);ln().then(c)}}).e(this,"afterhide",function(){Y.V({type:"ga_click_sign_in_close"});this.Kh.sy&&location.reload()}).e(this,
"beforeshow",function(){Y.V({type:"ga_click_sign_in",data:{label:this.wb}})})};$(function(){$("#js-reg-with-mail-in-top").click(function(){new kn("header_sign_up")});$("#js-reg-with-sina-in-top").click(function(){var b=mn(new kn,j);Y.V({type:"ga_click_sign_in_weibo",label:"header_sign_up"});nn(b);bl("sina")});$("#js-reg-with-qq-in-top").click(function(){var b=mn(new kn,j);Y.V({type:"ga_click_sign_in_qq",label:"header_sign_up"});nn(b);bl("qq")})});a.on=function(b,c){return function(){var d={wa:j,rg:m};qa(c)&&(c=c.apply(this,arguments));c===j&&(c={wa:j,rg:j});F.extend(d,c||{});return!S.wa()&&d.wa?(new kn(d.wa),m):!S.zi&&d.rg?($k.P().F(j),m):b.apply(this,arguments)}};a.pn=void 0,a.rn={"rt:button":function(){qn(this,"roundtable",k,["zg-btn-follow","zg-btn-unfollow"])},"rt:link":function(){qn(this,"roundtable",k,k,{follow_text:"关注活动"})},"c:link":function(){qn(this,"column",k,k,{follow_text:"关注专栏"})},"c:button":function(){qn(this,"column",k,["zg-btn-follow","zg-btn-unfollow"])},"q:link":function(){qn(this,"question",k,k,{follow_text:"关注问题"})},"m:link":function(){var b=this.getAttribute("data-follow_text");qn(this,"people",k,k,b?{follow_text:b}:{})},"t:link":function(){qn(this,
"topic")},"m:button":function(){var b=this;qn(b,"people",function(){b.getAttribute("data-followme")&&(E.has(b,"zg-btn-follow")?b.setAttribute("data-tip","s$b$对方已关注你"):b.setAttribute("data-tip","s$b$已互相关注"))},["zg-btn-follow","zg-btn-unfollow"])},"q:fi:button":function(){var b=this;qn(b,"question",function(c){$(".label",b).text(c?"取消关注":"关注");var d=$(".count",b),c=Number(d.data("count"))+(c?1:-1);d.length&&(c=Math.max(c,0),d.text("（"+c+"）").data("count",c))},["unfollowing","following"])},"q:m:button":function(){qn(this,
"question",k,["zg-btn-green","zg-btn-white"])},"f:button":function(){qn(this,"favlist",k,["zg-btn-follow","zg-btn-unfollow"])},"t:button":function(){qn(this,"topic",k,["zg-btn-follow","zg-btn-unfollow"])}},a.qn=on(function(b,c,d,e,g){function h(b){b.r?U(b.msg):l(r)}function l(c){c?(E.Ek(b,n,q),Ak(b,g.unfollow_text||"取消关注")):(E.Ek(b,q,n),Ak(b,g.follow_text||"关注"));qa(d)&&d(c)}pn&&"pending"===pn.state()&&pn.abort();var g=g||{},c=c||b.getAttribute("data-focustype"),e=e||["zg-follow","zg-unfollow"],n=
e[0],q=e[1],r=E.has(b,n);Y.V({type:"ga_click_follow",target:b,data:{type:c,vj:r}});var e={roundtable:dk,column:ck,people:Yj,question:Zj,topic:ak,favlist:$j}[c],w=b.getAttribute("data-id")||b.id.match(/-(.*)/)[1];e&&(e=e(w,r),"people"===c&&r?e.done(h):l(r),pn=e)},function(b,c){return{wa:c+"_follow_button"}});$(function(){$(document.body).on("click.video","div[data-swfurl]",function(b){var c=b.currentTarget,b=$(b.currentTarget).data("swfurl");if(!Jc(c,k,"zh-summary")){var d={url:$(".video-info",c).text()};if(sb||Og)b=J("video-url",c),$(c).trigger("videobox:open",d),window.open(b.innerHTML);else{var e=K("embed"),g={src:b,type:"application/x-shockwave-flash",allowscriptaccess:"never",allowfullscreen:"true",wmode:"opaque","class":"video",pluginspage:"http://get.adobe.com/cn/flashplayer/"},h=-1<b.indexOf("tudou");
if(-1<b.indexOf("youku")){var l=b.match(/\w{10,}/g);l&&(g.src="http://static.youku.com/v1.0.0366/v/swf/loader.swf?"+("VideoIDS="+l[0]+"&embedid=-&isAutoPlay=true&isShowRelatedVideo=false"))}h&&(g.src=b.replace("/v.swf","&autoPlay=true/v.swf"),g.flashvars="playMovie=true&auto=true");F.forEach(g,function(b,c){e.setAttribute(c,b)});var b=K("a",{innerHTML:'<i class="icon-fold"></i>收起视频',"class":"video-player-close",href:"#"}),n=K("div","video-player-box",[e,K("div","video-player-foot",b)]);xd(b,"click",
function(b){b.preventDefault();L(n);Q(c,j);$(c).trigger("videobox:close",d)});lc(n,c);Q(c,m);$(c).trigger("videobox:open",d)}}})});a.sn=void 0,a.tn=function(b){if(sb||Og)window.open("http://v.youku.com/v_show/id_"+b+".html");else if(window.YKU){var c,d;sn?c=sn:(c=new Ai,c.on("beforehide",function(){var b="close_video_finished";try{b=58<+d.currentTime()?"close_video_finished":"close_video_playing",d.pauseVideo()}catch(c){}Y.V({type:"ga_click_close_video",label:b})}));c.F(j);$(c.m()).addClass("videopopup-dialog");var e=$(c.Z());e.children().remove();var g=$($h(c));e.append($('<div id="youkuplayer"></div>').width(860).height(524)).append($('<div class="share-wrap">  分享视频：   <a href="javascript:;" class="share sina-share" data-type="sina" >新浪微博</a>  <a href="javascript:;" class="share renren-share" data-type="renren" >人人网</a>  <a href="javascript:;" class="share douban-share" data-type="douban" >豆瓣</a>  <a href="javascript:;" class="share qzone-share" data-type="qzone" >QQ 空间</a></div>').on("click",
".share",function(c){var c=$(c.target),d;"sina"===c.data("type")?(Y.V({type:"ga_click_share_video",label:"share_video_sina_weibo"}),d="http://service.weibo.com/share/share.php?"+$.param({type:"6",count:"1",appkey:"3063806388",title:"『如果每个人都变得乐于分享自己的知识，这个世界总会好上一点儿的吧。』 ——分享自@知乎  http://www.zhihu.com/#play-video http://v.youku.com/v_show/id_"+b+".html",pic:"http://s0.zhimg.com/misc/weibo.png",language:"zh_cn",rnd:(new Date).valueOf()})):"renren"===c.data("type")?(Y.V({type:"ga_click_share_video",label:"share_video_renren"}),
d="http://www.connect.renren.com/share/sharer?"+$.param({url:"http://www.zhihu.com/#play-video",title:"知乎 —— 可能是最好的中文问答社区。"})):"douban"===c.data("type")?(Y.V({type:"ga_click_share_video",label:"share_video_douban"}),d="http://www.douban.com/recommend/?"+$.param({url:"http://www.zhihu.com/#play-video",sel:"『如果每个人都变得乐于分享自己的知识，这个世界总会好上一点儿的吧。』 ——分享自@知乎  http://www.zhihu.com/#play-video http://v.youku.com/v_show/id_"+b+".html",title:"知乎 —— 可能是最好的中文问答社区。",image:"http://s0.zhimg.com/misc/weibo.png",v:1})):
"qzone"===c.data("type")&&(Y.V({type:"ga_click_share_video",label:"share_video_qqzone"}),d="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+$.param({url:"http://www.zhihu.com/#play-video",showcount:"1",desc:"『如果每个人都变得乐于分享自己的知识，这个世界总会好上一点儿的吧。』 ——分享自@知乎 ",summary:"在知乎，认真你就赢了",title:"知乎 —— 可能是最好的中文问答社区。",site:"知乎网",pics:"http://s0.zhimg.com/misc/weibo.png",style:"203",width:98,height:22}));d&&window.open(d,"","width=700, height=580, top=100, left=100, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no")}));
g.removeClass("modal-dialog-title").addClass("videopopup-title");c.ah("auto");$(c.yn()).css("backgroundColor","#000");bi(c,0.8);d=new window.YKU.Player("youkuplayer",{client_id:"31cc1eceae589704",vid:b,autoplay:j,show_related:m});sn=c;c.ma()}};$(function(){$(document.body).on("click.videopopup","div[data-vid]",function(b){b=$(b.currentTarget).data();Y.V({type:"ga_click_play_video",label:b.label||"home_play_video"});tn(b.vid)})});
$(function(){Xa(location.hash,"play-video")&&(window.setTimeout(function(){Y.V({type:"ga_visit_home_video"})},10),tn("XNjEwNTk4MjIw"))});a.un=void 0,a.vn=window.FastClick;un=[".ac-row *",".goog-menu *",".goog-menu-button *"];if(vn){var wn=vn.prototype.needsClick,xn;if(window.IV){var yn=z.find(["matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],function(b){return HTMLElement.prototype[b]});xn=yn&&HTMLElement.prototype[yn]}var zn=xn?function(b,c){return xn.call(b,c)}:function(b,c){return $(b).is(c)};vn.prototype.needsClick=function(b){return z.some(un,function(c){return zn(b,c)})?j:wn.call(this,b)}};a.An=function(){M.call(this)};y(An,Hd);An.prototype.h=function(){return this.Qh||(this.Qh=new ne(this))};An.prototype.df=function(b,c){if(!this.g)return k;for(var d=c||"A",e=b;e!=k&&e!==this.g;){if(e.tagName===d)return e;e=e.parentNode}return k};a.Bn=function(){M.call(this);this.last=this.VX=0;this.ZX=m};y(Bn,An);Bn.prototype.B=function(){if(this.g=H("zh-global-message"))this.RF=J("zu-global-notify-msg",this.g),this.h().e(this.g,"click",this.ka)};Bn.prototype.ka=function(b){b.target&&b.target.name&&Q(this.g,m)};a.Cn=function(b,c){c&&c.length&&z.forEach(c,function(b){this.dispatchEvent(new hn(b[0],b[1]))},b)};Bn.prototype.fireEvent=u(36);
a.Dn=function(b){var c=Y;c.RF?(c.RF.innerHTML=b,Q(c.g,j)):U(b)},a.Tl="iframe_data",a.hn=function(b,c){this.type=b;this.pc=c};y(hn,hd);a.Y=new Bn;Y.B();a.En=function(b){function c(){r.onload=r.onerror=r.onreadystatechange=k;document.body.removeChild(r)}function d(){c();q.resolve()}function e(){clearTimeout(n);n=k;try{delete window[h]}catch(b){window[h]=k}}"string"===$.type(b)&&(b={url:b});var b=b||{},g=$.Deferred(),h="zh"+za()+ab(),l=$.extend({},b.data||{},{callback:h}),n=k;b.timeout&&(n=setTimeout(function(){window[h]&&(window[h]=e,g.reject("timeout"))},b.timeout));window[h]=g.resolve;var b=b.url+(-1===b.url.indexOf("?")?"?":"&")+$.param(l),q=$.Deferred(),
r=document.createElement("script");r.onload=d;r.onerror=function(){c();q.reject()};r.onreadystatechange=function(){("loaded"===r.readyState||"complete"===r.readyState)&&d()};r.src=b;document.body.appendChild(r);q.promise().fail(g.reject).always(e);return g.promise()};a.Fn=function(b){this.options=$.extend(j,{},this.defaults,b||{});this.promise=k;this.mH=1E3;this.fy=3E4;this.xj=this.mH;this.yO=1.5};y(Fn,Hd);Fn.prototype.defaults={type:"GET",url:"",data:{},timeout:6E4,xhrFields:{withCredentials:j}};Fn.prototype.Xy=function(){if(!(this.promise&&"pending"===this.promise.state())){var b=this.options;this.promise=($.support.cors?$.ajax(b):En(b)).done($.proxy(this.LQ,this)).fail($.proxy(this.bi,this))}};
Fn.prototype.LQ=function(b){this.xj=this.mH;try{this.dispatchEvent({type:"message",data:b})}catch(c){}this.Xy()};Fn.prototype.bi=function(){this.xj!==this.fy&&(this.xj*=this.yO);this.xj>this.fy&&(this.xj=this.fy);this.Cc=setTimeout($.proxy(this.Xy,this),this.xj);this.dispatchEvent("error")};a.Gn=function(b){this.Dd=b},a.Hn=function(b){return function(){this.Dd=b.apply(k,[this.Dd].concat(z.toArray(arguments)));return this}};Gn.prototype.filter=Hn(z.filter);Gn.prototype.map=Hn(z.map);Gn.prototype.reduce=Hn(z.reduce);Gn.prototype.reduceRight=Hn(z.reduceRight);Gn.prototype.flatten=Hn(z.flatten);Gn.prototype.size=function(){return this.Dd.length};Gn.prototype.toArray=p("Dd");a.In=function(b){F.extend(this.G={},this.defaults,b||{});this.Kg()},a.Jn=["group","key","name"],a.Kn=function(b){return z.every(Jn,function(c){return b[c]})},a.Ln=function(b){return $.extend({},{key:b.key},b.yb)},a.Mn=function(b,c){z.every(b,function(b){return!z.every(Jn,function(e){return b[e]===c[e]})})&&b.push(c);return b},a.Nn=function(b,c){var d=b[c.group];d?d.push(c):b[c.group]=[c];return b};In.prototype.defaults={TL:"帮助信息",zv:"shortcut-tips-dialog"};
In.prototype.Kg=function(){xk(yk.register("shift+/",this.show,this),{group:"导航",name:"帮助",key:"?"})};
In.prototype.show=function(){var b=this.G,c=b.TL,d;d=(new Gn(wk)).map(function(b){return F.La(b.Lk.Ot())}).flatten().map(Ln).filter(Kn).reduce(Mn,[]).reduce(Nn,{}).toArray();var e=['<div class="shortcut-tips">'],g={FS:/([^\s+])+|([\s+])/g,xM:function(b){return b.replace(this.FS,function(b,c){return c?"<kbd>"+b+"</kbd>":" "+b+" "})}};F.forEach(d,function(b,c){e.push('<div class="group"><h2>',c,"</h2><dl>");z.forEach(b,function(b){e.push("<dt>",g.xM(b.key),"</dt>");e.push("<dd>",b.name,"</dd>")});e.push("</dl></div>")});
e.push("</div>");d=e.join("");Fi(c,d,b.zv)};$.easing.easeOutCubic=function(b,c,d,e,g){return e*((c=c/g-1)*c*c+1)+d};a.On=function(b){T.call(this);this.oj=-1;F.extend(this.G={},this.defaults,b||{})};y(On,T);t=On.prototype;t.defaults={items:">li",WK:m,sM:j,className:"navigable",xD:"navigable-focusin"};t.C=function(){On.n.C.call(this);var b=this.G;this.K=$(this.g).addClass(b.className).data("navigable",this).on("focusin.navigable focusout.navigable",b.items,$.proxy(this.wQ,this));this.ne()};t.z=function(){On.n.z.call(this);this.K.removeClass(this.G.className).data("navigable",k).off(".navigable");this.K=k};t.ne=ha;
t.index=p("oj");t.size=function(){return this.items().length};t.prev=function(){Pn(this,this.index()-1)};t.next=function(){Pn(this,this.index()+1)};t.first=function(){Pn(this,0)};t.last=function(){Pn(this,this.size()-1)};a.Pn=function(b,c){if(c!==b.index()){var d=b.size(),e=d-1;b.G.WK&&(c>e?c=0:0>c&&(c=e));b.dispatchEvent({data:{index:c,size:d},type:"action"});0>c||c>e||(b.oj=c,b.yy(b.items()[b.index()]))}};
t.wQ=function(b){var c=this.G,d=b.currentTarget,e=$(d);"focusin"===b.type?(e.addClass(c.xD),this.oj=$.inArray(d,this.items())):e.removeClass(c.xD)};t.yy=function(b){this.G.sM&&(b.tabIndex=-1,b.focus());this.dispatchEvent({data:{item:b},type:"focus"})};On.prototype.items=function(){var b=this.G.items;return!b?this.K.children().get():$(b,this.K).get()};a.Qn=function(b){On.call(this,b);this.SI=$("html, body")};y(Qn,On);F.extend(Qn.prototype.defaults={OS:200,offsetTop:0},On.prototype.defaults);a.Rn=function(b){return{k:{action:b.prev,yb:{group:"导航",name:"上一条目"}},j:{action:b.next,yb:{group:"导航",name:"下一条目"}},"g g":{action:b.first,yb:{group:"导航",name:"第一个条目"}},"shift+g":{action:b.last,yb:{group:"导航",name:"最后一个条目"}},"shift+k":{action:b.QS,yb:{group:"导航",name:"屏幕上移"}},"shift+j":{action:b.MS,yb:{group:"导航",name:"屏幕下移"}}}};t=Qn.prototype;
t.ne=function(){F.forEach(Rn(this),function(b,c){xk(yk.register(c,b.action,this),b.yb)},this)};t.z=function(){Qn.n.z.call(this);var b=F.Gb(Rn(this));z.forEach(ma(b)?b:[b],yk.oU,yk)};t.yy=function(b){Qn.n.yy.call(this,b);var c=this.G;this.scrollTo($(b).offset().top+c.offsetTop,c.OS,"easeOutCubic")};t.scrollTo=function(b,c,d){this.SI.stop().animate({scrollTop:b},c,d)};t.MS=function(){this.scrollTo("+=60",100)};t.QS=function(){this.scrollTo("-=60",100)};Ni.on("init",function(){$("img.lazy").lazyload({load:function(){$(this).trigger("contentchange")},data_attribute:"actualsrc",event:"scroll updatelazy",threshold:400})});Ni.on("init",function(){window.parent!=window&&document.referrer&&(z.some(["zhihu.com","weibo.com"],function(b){return-1<document.referrer.indexOf(b)})?-1<document.referrer.indexOf("zhihu.com")&&!$(window.top.document.body).hasClass("zhi")&&location.reload():location.reload())});
Ni.on("init",function(){S.dl&&bj.ce("lastuser:email",S.dl)});Ni.on("init",function(){dj()});
Ni.on("init",function(){$("#js-open-in-app").on("click",function(){var b=$('meta[name="apple-itunes-app"]').attr("content");if(b){b=(new lj(b.replace(/,\s*/,"&"))).get("app-argument")||"";-1===b.indexOf("zhihu://")&&(b="zhihu://"+b);if(/Android/.test(navigator.userAgent)){var c=b.replace(/^zhihu/,"intent")+"/#Intent;scheme=zhihu;package=com.zhihu.android;end",d=navigator.userAgent.match(/Chrome\/(\d+)/);if(25<=(d&&d[1]))window.location=c;else{c=document.createElement("iframe");c.hidden=j;c.src=b;
document.body.appendChild(c);var e=za();window.setTimeout(function(){600>za()-e&&(window.location="http://api.zhihu.com/client/download/apk")},400)}}else{var g=m;window.location=b;window.setTimeout(function(){g=j;window.location="http://itunes.apple.com/cn/app/id432274380"},250);window.setTimeout(function(){g&&window.location.reload()},500)}W("app-promotion","click_zhihu_ios_open_dl_link","header_not_logged_in")}})});
Ni.on("init",function(){$(document.body).on("click.follow","[data-follow]",function(){if(this.name)return Ok("末清除的 name 属性:",this);var b=this.getAttribute("data-follow");(b=b&&rn[b])&&b.call(this)})});Ni.on("postinit",function(){window.FastClick&&FastClick.attach(document.body)});
Ni.on("postinit",function(){if(S.wa())if(window.MozWebSocket||window.WebSocket&&!("__addTask"in window.WebSocket))io.connect("http://"+dh.ev).on("live",function(b){Cn(Y,JSON.parse(b.replace(/^\+;/,"")))});else{var b=new Fn({url:Bg,data:{loc:location.href,channel:za()+ab()},dataType:"polling",converters:{"text polling":function(b){return JSON.parse(b.replace(/^\+;/,""))}}});b.addEventListener("message",function(b){Cn(Y,b.data)});b.Xy()}});
Ni.on("init",function(){new In;Qn.prototype.defaults.offsetTop=-60;var b=$('div[data-widget="navigable"], ul[data-widget="navigable"]');if(1===b.length){var c=b.data("navigable-options"),c=new Qn(c);c.o(b.get(0));var d=$("#zh-load-more");c.on("action",function(b){b.data.index>=b.data.size&&d.is(":visible")&&d[0].click()})}});
Ni.on("postinit",function(){$(document).on("click","[data-activate-dialog]",function(b){var c=this.getAttribute("data-activate-dialog"),d=$k.P();d.F(j);"changeEmail"===c?d.dC(j):"resendEmail"===c&&(d.jH(j),d.EH(j));b.preventDefault()})});Ni.on("init",function(){$(document).on("click",'a[href="#"]',function(b){b.preventDefault()})});
Ni.on("postinit",function(){setTimeout(function(){var b=window._gaq=window._gaq||[];b.push(["_setAccount","UA-20961733-1"]);b.push(["_setDomainName",".zhihu.com"]);b.push(["_addOrganic","baidu","word"]);b.push(["_addOrganic","baidu","wd"]);b.push(["_addOrganic","sogou","query"]);b.push(["_addOrganic","so.360.cn","q"]);b.push(["_addOrganic","so.com","q"]);b.push(["_addOrganic","soso","w"]);b.push(["_addOrganic","google","q"]);b.push(["_addOrganic","sm","q"]);b.push(["_addIgnoredOrganic","知乎"]);b.push(["_addIgnoredOrganic",
"知乎网"]);b.push(["_addIgnoredOrganic","zhihu"]);b.push(["_addIgnoredOrganic","zhihu.com"]);b.push(["_addIgnoredOrganic","www.zhihu.com"]);var c=uh.ga_vars,d=c.user_attr.join("");b.push(["_setVar",d]);b.push(["_setCustomVar",1,"user_attr",d,3]);var e=d=9E12;c.user_created&&(e=c.user_created,b.push(["_setCustomVar",2,"registration_date",moment(e).format("YYYYMMDD"),1]));var g=document.cookie.match(/q_c1=(\w+)\|(\w+)\|(\d+)/);g&&(d=+g[3]);d=Math.min(d,e,c.now);b.push(["_setCustomVar",3,"entry_date",moment(d).format("YYYYMMDD"),
1]);b.push(["_setCustomVar",4,"abtest_group",c.abtest_mask,3]);b=Xc(bj.get("zhga"));bj.remove("zhga");b&&!("null"===b||"undefined"===b)&&z.forEach(b,function(b){1===b.length?Rk(b[0]):Pk(b[0],b[1],b[2],b[3])});b=Xc(bj.get("zhza"));bj.remove("zhza");b&&z.forEach(b,function(b){18E5>za()-b.time&&Ym(b.url,b.action,b.sinaId,b.qqId)});window._gaq.push(["_trackPageview"]);b=document.createElement("script");b.type="text/javascript";b.async=j;b.src=("https:"===document.location.protocol?"https://ssl":"http://www")+
".google-analytics.com/ga.js";c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var h=window,c=b=i;h.GoogleAnalyticsObject="__ga";h.__ga=h.__ga||function(){(h.__ga.Ts=h.__ga.Ts||[]).push(arguments)};h.__ga.DY=1*new Date;b=document.createElement("script");c=document.getElementsByTagName("script")[0];b.async=1;b.src="//www.google-analytics.com/analytics.js";c.parentNode.insertBefore(b,c);b=window.__ga;b("create","UA-20961733-3",{cookieDomain:"zhihu.com"});b("send","pageview")})});a.Sn=function(b,c,d){M.call(this);this.Bj=b;this.Lg=c;this.fa=d;this.Nk=v(this.gR,this)};y(Sn,M);t=Sn.prototype;t.vt=m;t.JG=0;t.oa=k;t.fire=function(){!this.oa&&!this.JG?this.Bg():this.vt=j};t.stop=function(){this.oa&&(Id.clearTimeout(this.oa),this.oa=k,this.vt=m)};t.z=function(){Sn.n.z.call(this);this.stop()};t.gR=function(){this.oa=k;this.vt&&!this.JG&&(this.vt=m,this.Bg())};t.Bg=function(){this.oa=Ld(this.Nk,this.Lg);this.Bj.call(this.fa)};a.Tn=function(){M.call(this);this.g=k;this.lastPosition=0;this.Yv=this.NS=300;this.Hr=j;this.Fu=m;this.RT=150};y(Tn,An);t=Tn.prototype;t.B=function(){if(!(sb&&!Pg||z.contains(oh,"back_to_top"))){this.g=gc(this.NT);document.body.appendChild(this.g);var b=this.h(),c=new Sn(this.Dy,this.RT,this);b.e(window,"scroll",function(){c.fire()});b.e(this.g,"click",this.AK)}};t.NT='<div class="zh-backtotop" style="display:none"><a data-action="backtotop" data-tip="s$r$回到顶部" href="javascript:;" class="btn-backtotop btn-action"><div class="arrow"></div><div class="stick"></div></a></div>';
t.AK=function(){var b=$b(document),c=ac(document),d=c.x,c=c.y,e=new ml,g=this.h();e.add(new Jj(b,[d,c],[0,0],this.NS,Sj));e.add(new Nj(this.g,this.Yv,Rj));g.e(e,"finish",this.uQ);g.e(e,"begin",this.hQ);e.play();Y.V("ga_click_back_to_top")};t.hQ=function(){this.Fu=this.Hr=j};t.uQ=function(){this.Fu=m};t.Dy=function(){if(!this.Fu){var b=ac(document).y,c=sb?500:1200;this.Hr?b>=c&&((new Oj(this.g,this.Yv,Qj)).play(),this.Hr=m):b<c&&((new Nj(this.g,this.Yv,Rj)).play(),this.Hr=j)}};a.Un=function(){};Un.prototype.link="想来知乎工作？请发送邮件到 jobs@zhihu.com";Un.prototype.rK="          _____                    _____                    _____                    _____          \n         /\\    \\                  /\\    \\                  /\\    \\                  /\\    \\         \n        /::\\____\\                /::\\    \\                /::\\    \\                /::\\    \\        \n       /:::/    /                \\:::\\    \\              /::::\\    \\              /::::\\    \\       \n      /:::/    /                  \\:::\\    \\            /::::::\\    \\            /::::::\\    \\      \n     /:::/    /                    \\:::\\    \\          /:::/\\:::\\    \\          /:::/\\:::\\    \\     \n    /:::/____/                      \\:::\\    \\        /:::/__\\:::\\    \\        /:::/__\\:::\\    \\    \n   /::::\\    \\                      /::::\\    \\      /::::\\   \\:::\\    \\      /::::\\   \\:::\\    \\   \n  /::::::\\    \\   _____    ____    /::::::\\    \\    /::::::\\   \\:::\\    \\    /::::::\\   \\:::\\    \\  \n /:::/\\:::\\    \\ /\\    \\  /\\   \\  /:::/\\:::\\    \\  /:::/\\:::\\   \\:::\\____\\  /:::/\\:::\\   \\:::\\    \\ \n/:::/  \\:::\\    /::\\____\\/::\\   \\/:::/  \\:::\\____\\/:::/  \\:::\\   \\:::|    |/:::/__\\:::\\   \\:::\\____\\\n\\::/    \\:::\\  /:::/    /\\:::\\  /:::/    \\::/    /\\::/   |::::\\  /:::|____|\\:::\\   \\:::\\   \\::/    /\n \\/____/ \\:::\\/:::/    /  \\:::\\/:::/    / \\/____/  \\/____|:::::\\/:::/    /  \\:::\\   \\:::\\   \\/____/ \n          \\::::::/    /    \\::::::/    /                 |:::::::::/    /    \\:::\\   \\:::\\    \\     \n           \\::::/    /      \\::::/____/                  |::|\\::::/    /      \\:::\\   \\:::\\____\\    \n           /:::/    /        \\:::\\    \\                  |::| \\::/____/        \\:::\\   \\::/    /    \n          /:::/    /          \\:::\\    \\                 |::|  ~|               \\:::\\   \\/____/     \n         /:::/    /            \\:::\\    \\                |::|   |                \\:::\\    \\         \n        /:::/    /              \\:::\\____\\               \\::|   |                 \\:::\\____\\        \n        \\::/    /                \\::/    /                \\:|   |                  \\::/    /        \n         \\/____/                  \\/____/                  \\|___|                   \\/____/         \n";a.Vn=function(){M.call(this)};y(Vn,An);a.Wn=k;Vn.prototype.B=function(){Wn=this;Xn(this)};a.Xn=function(b){b.Hj=new V(m);P(b.h(),b.Hj,"success",b.QQ);b.Hj.ajax("/noti7/new?r="+ +new Date,k,"GET")};Vn.prototype.QQ=function(){var b=Ie(this.Hj);b&&!b.r&&Cn(Y,[b])};a.Yn=function(){};Yn.prototype.ma=ba();a.Zn=function(b,c,d){this.element=b;this.Ef=c;this.ER=d};y(Zn,Yn);Zn.prototype.ma=function(b,c,d){Km(this.element,this.Ef,b,c,i,d,this.ER)};a.$n=function(b,c){this.Ah=b instanceof Nb?b:new Nb(b,c)};y($n,Yn);$n.prototype.ma=function(b,c,d,e){Km(bg(b),0,b,c,this.Ah,d,k,e)};a.ao=function(b,c){this.Zy=4;this.Qs=c||i;Th.call(this,b)};y(ao,Th);ao.prototype.ad=function(b){this.Qs=b||i;this.T()&&this.ma()};ao.prototype.ma=function(){if(this.Qs){var b=!this.T()&&"move_offscreen"!=this.Oh(),c=this.m();b&&(c.style.visibility="hidden",Q(c,j));this.Qs.ma(c,this.Zy,this.dy);b&&Q(c,m)}};a.bo=function(b,c,d){this.ca=d||(b?Tb(H(b)):Tb());ao.call(this,this.ca.w("div",{style:"position:absolute;display:none;"}));this.Ni=new Nb(1,1);this.Ya=new Sd;b&&this.attach(b);c!=k&&yc(this.m(),c)};y(bo,ao);a.co=[];t=bo.prototype;t.ec=k;t.className="goog-tooltip";t.yt=500;t.Ir=0;t.L=p("ca");t.attach=function(b){b=H(b);this.Ya.add(b);N(b,"mouseover",this.ld,m,this);N(b,"mouseout",this.Al,m,this);N(b,"mousemove",this.zl,m,this);N(b,"focus",this.Be,m,this);N(b,"blur",this.Al,m,this)};
t.detach=function(b){if(b)b=H(b),eo(this,b),this.Ya.remove(b);else{for(var c=this.Ya.La(),d=0;b=c[d];d++)eo(this,b);this.Ya.clear()}};a.eo=function(b,c){yd(c,"mouseover",b.ld,m,b);yd(c,"mouseout",b.Al,m,b);yd(c,"mousemove",b.zl,m,b);yd(c,"focus",b.Be,m,b);yd(c,"blur",b.Al,m,b)};t.rw=p("Ir");t.Hd=function(b){this.m().innerHTML=b};t.Yg=function(b){var c=this.m();c&&L(c);bo.n.Yg.call(this,b);b&&(c=this.ca.Da().body,c.insertBefore(b,c.lastChild))};t.Lc=u(31);t.tw=u(10);
t.Vd=function(){return this.tm?this.T()?4:1:this.Bl?3:this.T()?2:0};t.$r=function(b){if(!this.T())return m;var c=eg(this.m()),d=pg(this.m());return c.x<=b.x&&b.x<=c.x+d.width&&c.y<=b.y&&b.y<=c.y+d.height};t.wo=function(){if(!Th.prototype.wo.call(this))return m;if(this.anchor)for(var b,c=0;b=co[c];c++)tc(b.m(),this.anchor)||b.F(m);z.Xr(co,this);b=this.m();b.className=this.className;fo(this);N(b,"mouseover",this.Zw,m,this);N(b,"mouseout",this.mE,m,this);go(this);return j};
t.Ij=function(){z.remove(co,this);for(var b=this.m(),c,d=0;c=co[d];d++)c.anchor&&tc(b,c.anchor)&&c.F(m);this.GG&&ho(this.GG);yd(b,"mouseover",this.Zw,m,this);yd(b,"mouseout",this.mE,m,this);this.anchor=i;0==this.Vd()&&(this.ot=m);Th.prototype.Ij.call(this)};t.gy=function(b,c){this.anchor==b&&this.Ya.contains(this.anchor)&&(this.ot||!this.kZ?(this.F(m),this.T()||(this.anchor=b,this.ad(c||jo(this,0)),this.F(j))):this.anchor=i);this.tm=i};t.Lh=p("Ya");t.or=p("ec");
t.FF=function(b){this.Bl=i;b==this.anchor&&(this.ec==k||this.ec!=this.m()&&!this.Ya.contains(this.ec))&&(!this.Pk||!this.Pk.ec)&&this.F(m)};a.ko=function(b,c){var d=Mc(b.ca);b.Ni.x=c.clientX+d.x;b.Ni.y=c.clientY+d.y};t.ld=function(b){var c=lo(this,b.target);this.ec=c;fo(this);c!=this.anchor&&(this.anchor=c,mo(this,c),no(this),ko(this,b))};a.lo=function(b,c){try{for(;c&&!b.Ya.contains(c);)c=c.parentNode;return c}catch(d){return k}};t.zl=function(b){ko(this,b);this.ot=j};
t.Be=function(b){this.ec=b=lo(this,b.target);this.ot=j;if(this.anchor!=b){this.anchor=b;var c=jo(this,1);fo(this);mo(this,b,c);no(this)}};a.jo=function(b,c){if(0==c){var d=b.Ni.clone();return new oo(d)}return new po(b.ec)},a.no=function(b){if(b.anchor)for(var c,d=0;c=co[d];d++)tc(c.m(),b.anchor)&&(c.Pk=b,b.GG=c)};
t.Al=function(b){var c=lo(this,b.target),d=lo(this,b.relatedTarget);c!=d&&(c==this.ec&&(this.ec=k),go(this),this.ot=m,this.T()&&(!b.relatedTarget||!tc(this.m(),b.relatedTarget))?ho(this):this.anchor=i)};t.Zw=function(){var b=this.m();this.ec!=b&&(fo(this),this.ec=b)};t.mE=function(b){var c=this.m();if(this.ec==c&&(!b.relatedTarget||!tc(c,b.relatedTarget)))this.ec=k,ho(this)};
a.mo=function(b,c,d){b.tm||(b.tm=Ld(v(b.gy,b,c,d),b.yt))},a.go=function(b){b.tm&&(Id.clearTimeout(b.tm),b.tm=i)},a.ho=function(b){2==b.Vd()&&(b.Bl=Ld(v(b.FF,b,b.anchor),b.rw()))},a.fo=function(b){b.Bl&&(Id.clearTimeout(b.Bl),b.Bl=i)};t.z=function(){this.F(m);go(this);this.detach();this.m()&&L(this.m());this.ec=k;delete this.ca;bo.n.z.call(this)};a.oo=function(b,c){$n.call(this,b,c)};y(oo,$n);
oo.prototype.ma=function(b,c,d){c=bg(b);c=gg(c);d=d?new Pf(d.top+10,d.right,d.bottom,d.left+10):new Pf(10,0,0,10);Jm(this.Ah,b,4,d,c,9)&496&&Jm(this.Ah,b,4,d,c,5)};a.po=function(b){Zn.call(this,b,3)};y(po,Zn);po.prototype.ma=function(b,c,d){var e=new Nb(10,0);Km(this.element,this.Ef,b,c,e,d,9)&496&&Km(this.element,2,b,1,e,d,5)};a.qo=function(b,c,d){bo.call(this,b,c,d)};y(qo,bo);t=qo.prototype;t.EL=m;t.DL=100;t.Bp=m;t.Kj=function(){qo.n.Kj.call(this);this.tq=Sf(qg(this.m()));this.anchor&&(this.Eu=Sf(qg(this.anchor)));this.Bp=this.EL;N(this.L().Da(),"mousemove",this.zl,m,this)};t.Ij=function(){yd(this.L().Da(),"mousemove",this.zl,m,this);this.Eu=this.tq=k;this.Bp=m;qo.n.Ij.call(this)};
t.$r=function(b){if(this.El){var c=eg(this.m()),d=pg(this.m());return c.x-this.El.left<=b.x&&b.x<=c.x+d.width+this.El.right&&c.y-this.El.top<=b.y&&b.y<=c.y+d.height+this.El.bottom}return qo.n.$r.call(this,b)};a.ro=function(b,c){if(b.Eu&&b.Eu.contains(c)||b.$r(c))return j;var d=b.Pk;return!!d&&d.$r(c)};t.FF=function(b){this.Bl=i;b==this.anchor&&(!ro(this,this.Ni)&&(!this.or()&&(!this.Pk||!this.Pk.ec))&&(!B||!(0==this.Ni.x&&0==this.Ni.y)))&&this.F(m)};
t.zl=function(b){var c=this.T();if(this.tq){var d=Mc(this.L()),d=new Nb(b.clientX+d.x,b.clientY+d.y);ro(this,d)?c=m:this.Bp&&(c=Qf(this.tq,d)>=Qf(this.tq,this.Ni))}if(c){if(ho(this),this.ec=k,c=this.Pk)c.ec=k}else 3==this.Vd()&&fo(this);qo.n.zl.call(this,b)};t.Zw=function(){this.or()!=this.m()&&(this.Bp=m,this.ec=this.m())};t.rw=function(){return this.Bp?this.DL:qo.n.rw.call(this)};a.so=function(b,c,d,e){bo.call(this,k,k,d);qa(b)?this.Ax=b:this.EB=b;this.SK=c!=m;this.nA=[];this.Ha=e||(d?d.Da():document);N(this.Ha,"mouseover",this.oE,m,this)};y(so,qo);t=so.prototype;t.z=function(){so.n.z.call(this);yd(this.Ha,"mouseover",this.oE,m,this)};t.Ax=function(b){return b.tagName in this.EB&&!!b.getAttribute(this.EB[b.tagName])};t.oE=function(b){if(b=b.target)if(this.Ax(b))this.ad(k),to(this,b);else if(this.SK&&(b=Ic(b,v(this.Ax,this),m,this.IY)))this.ad(k),to(this,b)};
a.to=function(b,c,d){if(c==b.Xe)fo(b);else if(c!=b.anchor){if(1==b.Vd()||4==b.Vd())go(b),uo(b);var e=new vo("trigger",b,c,i);b.Lh().contains(c)||(b.attach(c),b.nA.push(c));b.anchor=c;b.Hy(e)?mo(b,c,d||b.Qs):uo(b)}},a.wo=function(b,c){var d=z.indexOf(b.nA,c);-1!=d&&(b.detach(c),b.nA.splice(d,1))};t.Hy=function(b){return this.dispatchEvent(b)};a.uo=function(b){b.dispatchEvent(new vo("canceltrigger",b,b.anchor||k));wo(b,b.anchor);delete b.anchor};
t.Ij=function(){so.n.Ij.call(this);k!=this.Xe&&wo(this,this.Xe);this.Xe=k};t.ld=function(b){var c=lo(this,b.target);c&&c!=this.anchor?to(this,c):so.n.ld.call(this,b)};t.Al=function(b){var c=this.anchor,d=this.Vd();so.n.Al.call(this,b);if(d!=this.Vd()&&(1==d||4==d))this.anchor=c,uo(this)};t.gy=function(b,c){so.n.gy.call(this,b,c);this.T()?(b!=this.Xe&&wo(this,this.Xe),this.Xe=b):(go(this),uo(this))};a.vo=function(b,c,d,e){hd.call(this,b,c);this.anchor=d;this.data=e};y(vo,hd);a.xo=function(b,c,d){Zn.call(this,b,c);this.wB=d};y(xo,Zn);xo.prototype.Bn=s(5);
xo.prototype.ma=function(b,c,d,e){var g={"1-4":"bottom","0-4":"top","0-5":"top","1-5":"bottom","2-5":"top","3-5":"bottom","3-4":"bottom","2-6":"left","2-4":"right"},h;if(this.wB){h=Km(this.element,this.Ef,b,c,k,d,10,e);var l=yo(h,this.Ef),n=yo(h,c);h&496&&(h=Km(this.element,l,b,n,k,d,10,e),h&496&&(l=yo(h,l),n=yo(h,n),this.wB?Km(this.element,l,b,n,k,d,this.Bn(),e):Km(this.element,l,b,n,k,d,0,e)));this.Ps&&(b=(la(l)?l:this.Ef)+"-"+(la(c)?c:n),this.Ps(g[b],b))}else Km(this.element,this.Ef,b,c,i,d),this.Ps&&
(b=this.Ef+"-"+c,this.Ps(g[b],b))};a.yo=function(b,c){b&48&&(c^=2);b&192&&(c^=1);return c};a.zo=!!window.DOMTokenList,a.Ao=zo?function(b){return b.classList}:function(b){b=b.className;return oa(b)&&b.match(/\S+/g)||[]},a.Bo=zo?function(b,c){return b.classList.contains(c)}:function(b,c){return z.contains(Ao(b),c)},a.Co=zo?function(b,c){b.classList.add(c)}:function(b,c){Bo(b,c)||(b.className+=0<b.className.length?" "+c:c)},a.Do=zo?function(b,c){b.classList.remove(c)}:function(b,c){Bo(b,c)&&(b.className=z.filter(Ao(b),function(b){return b!=c}).join(" "))};a.Eo=function(b,c){T.call(this,c);this.wb=b||""};y(Eo,T);Eo.prototype.Mf=k;a.Fo="placeholder"in document.createElement("input");t=Eo.prototype;t.Jn=m;t.w=function(){this.g=this.L().w("input",{type:"text"})};t.ea=function(b){Eo.n.ea.call(this,b);this.wb||(this.wb=b.getAttribute("label")||"");Kc(Sb(b))==b&&(this.Jn=j,Do(this.m(),this.Em));Fo?this.m().placeholder=this.wb:Oc(this.m(),Vc.Wp,this.wb)};
t.C=function(){Eo.n.C.call(this);var b=new ne(this);b.e(this.m(),"focus",this.WD);b.e(this.m(),"blur",this.Fw);Fo?this.Q=b:(B&&b.e(this.m(),["keypress","keydown","keyup"],this.pN),b.e(bc(Sb(this.m())),"load",this.eO),this.Q=b,Go(this));this.wh();this.m().rP=this};t.jb=function(){Eo.n.jb.call(this);this.Q&&(this.Q.H(),this.Q=k);this.m().rP=k};a.Go=function(b){!b.vM&&(b.Q&&b.m().form)&&(b.Q.e(b.m().form,"submit",b.rN),b.vM=j)};t.z=function(){Eo.n.z.call(this);this.Q&&(this.Q.H(),this.Q=k)};t.Em="label-input-label";
t.WD=function(){this.Jn=j;Do(this.m(),this.Em);if(!Fo&&!Ho(this)&&!this.xO){var b=this,c=function(){b.m().value=""};A?Ld(c,10):c()}};t.Fw=function(){Fo||(this.Q.Fa(this.m(),"click",this.WD),this.Mf=k);this.Jn=m;this.wh()};t.pN=function(b){27==b.keyCode&&("keydown"==b.type?this.Mf=this.m().value:"keypress"==b.type?this.m().value=this.Mf:"keyup"==b.type&&(this.Mf=k),b.preventDefault())};t.rN=function(){Ho(this)||(this.m().value="",Ld(this.RM,10,this))};t.RM=function(){Ho(this)||(this.m().value=this.wb)};
t.eO=function(){this.wh()};a.Ho=function(b){return!!b.m()&&""!=b.m().value&&b.m().value!=b.wb};t.clear=function(){this.m().value="";this.Mf!=k&&(this.Mf="")};t.reset=function(){Ho(this)&&(this.clear(),this.wh())};t.Ba=function(b){this.Mf!=k&&(this.Mf=b);this.m().value=b;this.wh()};t.X=function(){return this.Mf!=k?this.Mf:Ho(this)?this.m().value:""};
t.wh=function(){Fo?this.m().placeholder!=this.wb&&(this.m().placeholder=this.wb):(Go(this),Oc(this.m(),Vc.Wp,this.wb));if(Ho(this))b=this.m(),Do(b,this.Em);else{if(!this.xO&&!this.Jn){var b=this.m();Co(b,this.Em)}Fo||Ld(this.zS,10,this)}};t.$a=function(b){this.m().disabled=!b;var c=this.m(),d=this.Em+"-disabled";!b?Co(c,d):Do(c,d)};t.isEnabled=function(){return!this.m().disabled};t.zS=function(){this.m()&&(!Ho(this)&&!this.Jn)&&(this.m().value=this.wb)};a.Ko=function(b,c){M.call(this);this.UY=k;this.minHeight=c||66;this.$b=b;this.h().e(this.$b,["input","propertychange"],this.Tt);Io(this);Jo(this,j);E.add(this.$b,"zu-seamless-input-origin-element")};y(Ko,An);Ko.prototype.Tt=function(){return Jo(this)};
a.Jo=function(b,c){var d=b.$b.value.replace(/[<>]/g,"a").replace(/[\n\r]/g,"<br>");if(c||b.CR!==d)b.CR=d,b.Xh&&(b.Xh.innerHTML=d,d=b.Xh.scrollHeight,d=d>b.minHeight?d:b.minHeight,b.$b.style.height=$f(d,j),b.$b.style.minHeight=d+"px",b.dispatchEvent("change"))},a.Io=function(b){if(!b.Xh){var c=$(b.$b).css("white-space","pre");if(0!==vg(b.$b).width){var d=K("div",{style:"overflow:hidden;position:relative;height:0;"},b.Xh=K("div","zu-seamless-input-mock-element"));document.body.appendChild(d);$.each("fontFamily fontSize fontWeight fontStyle letterSpacing textTransform wordSpacing textIndent lineHeight width white-space".split(" "),
function(d,g){b.Xh.style[g]=c.css(g)})}}};om.qh=pm;om.Vp=ym;om.Vp.PW=",;";om.Vp.sW='"';a.Lo=function(b,c,d,e){ym.call(this,b,c,d,e)};y(Lo,ym);Lo.prototype.ji=function(b){var c=Lo.n.ji.call(this,b);b.select(this.$.Sb);return c};om.kJ=Lo;om.mu=Lm;om.mu.lV=300;om.mu.jV=Qm;om.iB=Hm;om.jJ=Rm;a.Mo=function(b,c){om.iB.call(this,b,c);this.qz=k;this.qD=j};y(Mo,om.iB);Mo.prototype.WR=["根话题","未归类话题"];Mo.prototype.bp=ca("qz");Mo.prototype.gi=function(b,c,d){var e=v(function(b,c){for(var e=[],n,q=0;q<c.length;q++)for(var r=1;r<c[q].length;r++){n=c[q][r];var w=j;this.qD&&z.forEach(this.WR,function(b){n[2]===b&&(w=m)});w&&e.push(n)}this.qz&&(e=this.qz(e,b));d(b,e)},this);Mo.n.gi.call(this,b,c,e)};a.No=function(b,c,d,e){this.MF=0;om.Vp.call(this,b,c,!!d,e||300)};y(No,om.Vp);t=No.prototype;
t.ji=function(b){var c=om.kJ.n.ji.call(this,b),d=this.$.Sb,e=this.$;e.uH=b;e.dispatchEvent("select");d.value="";return c};t.Ba=ba();t.update=function(b){var c=Ck(this.X());!c||"搜索用户"===c||"搜索话题"===c||"在这里输入问题"===c||z.contains(this.$.Sv||[],c)||(!c?0:unescape(encodeURIComponent(c)).length)<this.MF||c===this.AF?(this.$.Ri(),this.ho=c):(this.AF=k,this.$.dispatchEvent({type:Oo}),No.n.update.call(this,b))};
t.Be=function(b){this.$&&qm(this.$);b.target!==this.cb&&(this.cb=b.target||k,this.oa&&(this.oa.start(),this.hc.e(this.oa,Kd,this.Rl)),this.ho=this.X(),Fm(this));this.oa&&this.oa.start();this.update(j)};t.Uc=function(){this.oa&&this.oa.stop();this.$&&this.$.Ri()};
t.Zb=function(b){if(13===b.keyCode){if(this.$.pb()){if(this.$.$j())return b.preventDefault(),b.stopPropagation(),j;b.preventDefault();b.stopPropagation();this.$.Ub="";this.$.Hc();this.update(j);return m}b.stopPropagation();b.preventDefault();return m}No.n.Zb.call(this,b)};t.kq=function(b){No.n.kq.call(this,b);this.hc.e(b,"mousedown",function(b){b.stopPropagation();return j})};a.Po=function(b,c,d,e){No.call(this,b,c,!!d,e)};y(Po,No);
Po.prototype.ji=function(b){var c=this.$;c.uH=b;c.dispatchEvent("select");return m};a.Qo=function(b,c,d,e,g,h,l,n,q){var r={};"question_suggest"===h?(r.Y=v(this.qS,this),r.Zc=Kk):"topic_question"===h?(r.Y=v(this.sS,this),r.Zc=Jk):r.Zc=h?Jk:Kk;h=new om.mu(g,r);g&&(h.No=m);h.Jr=j;this.N=h;this.mf=new Mo(b,!e);b=q?q:new No(k,k,d);l&&l.length&&new Ul(c,l[0]);b.qI=m;om.call(this,this.mf,h,b);b.$=this;b.kq(c);n&&(b.MF=n)};y(Qo,om.jJ);a.Oo="before_update";t=Qo.prototype;t.VC=j;
t.qS=function(b,c,d){O.forEach(d,function(b){b=Mm(this,b,this.Ub);this.ca.appendChild(this.g,b)},b);mc(b.g,b.ca.w("div","zh-question-suggest-info",[b=b.ca.w("a",{href:"javascript:;",title:"关闭",name:"close",id:"zh-question-suggest-info-close"},[b.ca.w("span","x-m"),"不是"]),"您想问的是不是下面的问题？"]),0);N(b,"click",function(){var b=this.rf;b.Uc();this.Hc();b.AF=b.X()},m,this)};
t.sS=function(b,c,d){0===d.length?this.Hc():(O.forEach(d,function(b){b=Mm(this,b,this.Ub);this.ca.appendChild(this.g,b)},b),c=b.ca.w("div","zh-question-topic-autocomplete-plaintext",["建议添加的话题",b.ca.w("span","x-m")]),mc(b.g,c,0),dh.Ac&&N(c,"click",function(){this.rf.Uc();this.Hc()},m,this))};t.Gg=p("uH");t.bp=function(b){this.mf.bp(b)};t.Hc=function(){if(this.VC)return Qo.n.Hc.call(this)};t.$j=function(){return-1===tm(this,this.Vc)?m:Qo.n.$j.call(this)};
t.Ri=function(){dh.Ac?xd(document,"click",v(this.Hc,this)):Qo.n.Ri.call(this)};a.Ro=function(b){M.call(this);this.Ep=j;this.oi=this.sp=-1;this.aI="";this.ob=k;F.extend(this.G={},this.defaults,b||{})};y(Ro,An);a.So=aj.create("PMForm"+S.Fd);t=Ro.prototype;t.defaults={KG:"pm",at:m};t.Yg=ca("g");t.m=p("g");t.qx=function(){this.ob=new Ai(k,m);this.ob.ab("发送私信");ji(this.ob,k);this.ob.F(j);this.g=this.ob.Z()};t.focus=function(){this.B();this.$b.focus()};
t.B=function(){this.iO||(this.iO=j,this.Ep&&(this.ob||this.qx(),this.g.innerHTML='<div class="zm-pm-wrap"><dl class="zm-form-table zm-form-table-medium"><dt class="zm-form-table-head zm-form-table-head-align-middle"><label class="zg-medium-gray">发给：</label></dt><dd class="zm-form-table-field"><div class="zm-pm-selector-wrap"><div class="zg-user-name" style="display:none;padding:4px 0 0 0"></div><input class="zg-form-text-input zm-pm-user-selector" type="text" /></div></dd><dt class="zm-form-table-head zm-form-table-head-align-middle"><label class="zg-medium-gray">内容：</label></dt><dd class="zm-form-table-field zm-form-table-field-last"><div class="zg-editor-simple-wrap zg-form-text-input"><textarea class="zg-editor-input" style="font-weight:normal"></textarea></div></dd></dl><div class="zh-pm-warnmsg" style="display:none;text-align:right;color:#C3412F;"></div><div class="zm-command zg-clear"><div class="zm-item-meta zg-left" style="margin: 0 0 0 57px;"><span class="zg-text-counter" style="display:none">还可以输入 500 字</span><span class="additional-info" ></span></div><a name="cancel" href="javascript:;" class="zm-command-cancel">取消</a><a name="send" href="javascript:;" class="zg-btn-blue zg-r3px" id="zh-question-pm-send-button">发送</a></div></div>'),this.kg=
J("zg-user-name",this.g),this.$b=J("zg-editor-input",this.g),this.Oc=J("zm-pm-user-selector",this.g),this.Ii=J("zm-command",this.g),this.IX=J("zg-text-counter",this.g),this.zs=J("zh-pm-warnmsg",this.g),this.MU=$(".additional-info",$(this.g)),this.LG=new Ko(this.$b),this.h().e(this.Ii,"click",this.ka).e(this.kg,"click",this.ka).e(this.$b,"keydown",this.vN),this.Oc&&((new Eo("搜索用户")).o(this.Oc),this.h().e(this.Oc,"blur",this.UK),this.O=new Qo("/people/autocomplete?type="+this.G.KG,this.Oc,k,k,J("zm-pm-wrap",
this.g),j),this.O.eg(j),this.h().e(this.O,"select",this.Fo)),this.Kv(),this.Yx(),S.zi||To(this,"未激活用户，不能发送私信。请先激活邮箱。"))};t.vN=function(b){if(13===b.keyCode&&(b.ctrlKey||b.metaKey))this.iE(),b.preventDefault()};a.Uo=function(b,c){b.nY=c;b.kg.innerHTML+='<a class="zm-profile-email-history-link" href="'+c+'">私信记录  »</a>'};t.UK=function(){this.fC&&clearTimeout(this.fC);this.fC=setTimeout(v(this.VK,this),200)};t.VK=function(){var b=Ck(this.Oc.value);-1===this.oi&&(b&&"搜索用户"!==b)&&To(this,"请输入对方姓名，从下拉菜单里选择收件人")};
t.st=ca("SS");t.show=function(){this.B();this.Ep&&(this.ob.F(j),this.ob.ma())};t.Kv=function(){if(this.Ok)$(window).on("beforeunload.PMForm",v(function(){this.kt()},this))};t.Bv=function(){this.Ok&&$(window).off("beforeunload.PMForm")};t.kt=function(){this.Ok&&this.$b.value&&So.ce("content",this.$b.value)};t.Yx=function(){if(this.Ok){var b=So.get("content");b&&(this.$b.value=b)}};t.bv=function(){this.Ok&&So.remove("content")};t.Fo=function(){var b=z.slice(this.O.Gg(),1);Vo(this,b[3],b[0],j)};
a.Vo=function(b,c,d,e){-1===c?(c=b.kg,Q(b.Oc,j),Q(c,m)):c!==S.Fd&&(b.oi=c,b.aI=d,b.kg&&b.Oc&&(b.kg.innerHTML=b.aI+(e?Fk():""),c=b.Oc,Q(b.kg,j),Q(c,m),b.Oc.value=""))};
t.iE=on(function(){if(!(this.wd&&"pending"===this.wd.state()))if(-1===this.oi)To(this,"请填写收信人。");else{var b=this.$b.value;La(b)?(b=-1!==this.sp?$.post("/inbox/reply",{message_id:this.sp,content:b,type:this.oA}):$.post("/inbox/post",{member_id:this.oi,content:b,token:this.SS}),b.done(v(this.$Q,this)),this.wd=b):To(this,"请填写私信内容。")}},j);t.ka=function(b){if(b=(b=this.df(b.target))&&b.name)switch(b){case "edit":this.oi=-1;b=this.kg;Q(this.Oc,j);Q(b,m);break;case "cancel":this.Ep&&this.ob.F(m);break;case "send":this.iE()}};
a.To=function(b,c){b.zs.innerHTML=c;Q(b.zs,j)};t.$Q=function(b){Pk("message","send_message");b&&!b.r?(this.Bv(),this.bv(),this.Ep&&this.ob.F(m),this.G.at?window.location.reload():U("发送成功")):To(this,b.msg)};t.Ok=j;a.Wo=function(){M.call(this);this.kT=this.oO=250;this.vh={}};y(Wo,An);a.Xo={p:"MemberProfileCardV2",t:"TopicProfileCardV2",c:"ColumnProfileCardV2",r:"RoundtableProfileCardV2"};t=Wo.prototype;t.rO={t:0,r:2,b:1,l:2};a.Yo=function(b,c){return'<div class="popover-content no-hovercard">'+b+"</div>"+('<div class="arrow"></div><div class="arrow2'+(c?" loading":"")+'"></div>')};
t.B=function(){if(!dh.Ac&&!z.contains(oh,"tooltiop")){var b=this.S=new so({A:"data-tip",SPAN:"data-tip",BUTTON:"data-tip",I:"data-tip",DIV:"data-tip"}),c=K("div",{id:"zh-tooltip"});document.body.appendChild(c);this.S.Yg(c);this.S.yt=this.kT;this.S.Ir=this.oO;this.h().e(this.S,"trigger",this.Hy);var d=$(c),e=k;b.on("show",function(b){clearTimeout(e);d.addClass("in");Y.V({type:"ga_hover_hovercard",target:b.target.Xe||b.target.anchor})}).on("hide",function(){d.css({display:"block",visibility:"visible"}).removeClass("in").addClass("out");
e=setTimeout(function(){d.removeClass("out").css({display:"none",visibility:"hidden"})},1E3)});this.h().e(this.S,"beforeshow",this.wo);this.h().e(this.S,"beforehide",this.gQ);$(b.m()).on("click",".member-profile-card-pm",function(c){c.preventDefault();var d=$(this);b.F(m);on(function(){var b=new Ro;b.show();Vo(b,d.data("pmHash"),d.data("pmName"));Uo(b,d.attr("href"));b.$b.focus()},j)()})}};t.gQ=function(){"s"!==this.Ch&&this.vh[this.Ch]&&this.vh[this.Ch][this.kn]&&(this.vh[this.Ch][this.kn]=$(this.S.m()).find(".popover-content").html())};
t.wo=function(){var b=this.S.Xe||this.S.anchor,c=b.getAttribute("data-tip");this.JC=b;b=c.split("$");this.Ch=b[0];this.kn=b[2];this.Tk=b[1];if("s"===this.Ch)b=this.kn,c=[],c.push('<div class="tooltip-arrow'),c.push('"></div><div class="tooltip-inner">'),c.push(Za(b)),c.push("</div></div>"),b=c.join(""),Zo(this,b);else{var d=this.Ch,e=this.kn,b=this.Tk;if(c=this.vh[d]&&this.vh[d][e])Zo(this,Yo(c));else if(c=Xo[d])$.get("/node/"+c,{params:{url_token:e}},v(function(b){$o(this,b,d,e)},this)),Zo(this,
this.Su(b))}ap(this)};a.ap=function(b){var c;switch(b.Tk){case "t":c=5;break;case "r":c=4;break;case "b":c=4;break;case "l":c=6}b=b.S;b.Zy=c;b.T()&&b.ma()};t.Su=function(){return Yo('<div class="zh-hovercard-spinner"></div>',j)};a.$o=function(b,c,d,e){b.Ch===d&&b.kn===e&&$o(b,c);b.vh[d]=b.vh[d]||{};b.vh[d][e]=c;ap(b);Zo(b,Yo(c));to(b.S,b.JC,b.Tk)},a.Zo=function(b,c){b.S.Hd(c);b.S.ad(b.zL)};
t.Hy=function(b){var c=b.anchor,d=c&&c.getAttribute("data-tip"),b=d.split("$"),e=k;Jc(c,k,"no-hovercard")?(b=this.S,go(b),uo(b)):d&&1<b.length?(c.title&&(c.setAttribute("data-original_title",c.title),c.removeAttribute("title")),e=b[1],"s"!==b[0]&&(210>jg(c).y?"t"===e&&(e="b",c.setAttribute("data-tip",d.replace("$t$","$b$"))):(e="t",c.setAttribute("data-tip",d.replace("$b$","$t$")))),this.zL=e=new xo(c,this.rO[e],"b"===e||"t"===e),c=v(this.cR,this),e.Ps=c,this.S.className="s"!==b[0]?"goog-hovercard popover":
"tooltip"):(b=this.S,go(b),uo(b))};
t.cR=function(b,c){var d=this.S.m();E.remove(d,"top","bottom","left","right");E.add(d,b);var e=vg(d),g=vg(this.JC),h=new Nb(d.offsetLeft,d.offsetTop);if("t"===this.Tk||"b"===this.Tk){var e=(e.width-g.width)/2,l=h.x-e;if("s"===this.Ch)Uf(d,"left",l+"px");else{var l=z.contains(["2-5","3-5","3-4","2-4"],c),n=$(".zh-hovercard-spinner",d)[0],q=J("arrow",d),r=J("arrow2",d);n?Uf(d,"left",h.x-e+"px"):l?Uf(d,"left",h.x+83+"px"):Uf(d,"left",h.x-70+"px");var w=g.width/2;q&&r&&(n||(l?z.forEach([q,r],function(b){Uf(b,
"left","auto");Uf(b,"right",w+70+"px")}):z.forEach([q,r],function(b){Uf(b,"left",w+70+"px")})))}}else Uf(d,"top",h.y-(e.height-g.height)/2+"px"),"l"===this.Tk&&ag(d,h.x-g.width)};a.bp=function(){},a.cp=void 0;ia(bp);t=bp.prototype;t.xc=ba();t.w=function(b){var c=b.L().w("div",this.ef(b).join(" "),b.eb());dp(this,b,c);return c};t.Z=aa();t.Xi=function(b,c,d){if(b=b.m?b.m():b)if(A&&!Eb("7")){var e=ep(E.get(b),c);e.push(c);xa(d?E.add:E.remove,b).apply(k,e)}else E.enable(b,c,d)};t.vc=s(j);
t.o=function(b,c){c.id&&Nh(b,c.id);var d=this.Z(c);d&&d.firstChild?b.mm(d.firstChild.nextSibling?z.clone(d.childNodes):d.firstChild):b.mm(k);var e=0,g=this.M(),h=this.M(),l=m,n=m,d=m,q=E.get(c);z.forEach(q,function(b){!l&&b==g?(l=j,h==g&&(n=j)):!n&&b==h?n=j:e|=this.Aw(b)},this);b.aa=e;l||(q.push(g),h==g&&(n=j));n||q.push(h);var r=b.cf;r&&q.push.apply(q,r);if(A&&!Eb("7")){var w=ep(q);0<w.length&&(q.push.apply(q,w),d=j)}(!l||!n||r||d)&&E.set(c,q.join(" "));dp(this,b,c);return c};
t.Fe=function(b){b.Cd()&&this.li(b.m(),j);b.isEnabled()&&this.Pe(b,b.T())};a.dp=function(b,c,d){c.isEnabled()||b.ig(d,1,j);c.aa&8&&b.ig(d,8,j);c.Rb&16&&b.ig(d,16,c.Ge());c.Rb&64&&b.ig(d,64,c.pb())};t.Uo=function(b,c){ug(b,!c,!A&&!rb)};t.li=function(b,c){this.Xi(b,this.M()+"-rtl",c)};t.Sh=function(b){var c;return b.Rb&32&&(c=b.kc())?Dc(c):m};t.Pe=function(b,c){var d;if(b.Rb&32&&(d=b.kc())){if(!c&&b.aa&32){try{d.blur()}catch(e){}b.aa&32&&b.Uc(k)}Dc(d)!=c&&Ec(d,c)}};t.F=function(b,c){Q(b,c)};
t.cc=function(b,c,d){var e=b.m();if(e){var g=this.zn(c);g&&this.Xi(b,g,d);this.ig(e,c,d)}};t.ig=function(b,c,d){cp||(cp=F.create(1,Vc.$I,8,Vc.lJ,16,Vc.Tp,64,Vc.aB));(c=cp[c])&&Oc(b,c,d)};t.Ja=function(b,c){var d=this.Z(b);if(d&&(jc(d),c))if(oa(c))yc(d,c);else{var e=function(b){if(b){var c=Sb(d);d.appendChild(oa(b)?c.createTextNode(b):b)}};ma(c)?z.forEach(c,e):na(c)&&!("nodeType"in c)?z.forEach(z.clone(c),e):e(c)}};t.kc=function(b){return b.m()};t.M=s("goog-control");
t.ef=function(b){var c=this.M(),d=[c],e=this.M();e!=c&&d.push(e);c=b.Vd();for(e=[];c;){var g=c&-c;e.push(this.zn(g));c&=~g}d.push.apply(d,e);(b=b.cf)&&d.push.apply(d,b);A&&!Eb("7")&&d.push.apply(d,ep(d));return d};a.ep=function(b,c){var d=[];c&&(b=b.concat([c]));z.forEach([],function(e){z.every(e,xa(z.contains,b))&&(!c||z.contains(e,c))&&d.push(e.join("_"))});return d};t.zn=function(b){this.Bq||fp(this);return this.Bq[b]};
t.Aw=function(b){this.SH||(this.Bq||fp(this),this.SH=F.xm(this.Bq));b=parseInt(this.SH[b],10);return isNaN(b)?0:b};a.fp=function(b){var c=b.M();b.Bq=F.create(1,c+"-disabled",2,c+"-hover",4,c+"-active",8,c+"-selected",16,c+"-checked",32,c+"-focused",64,c+"-open")};a.gp=function(){};y(gp,bp);ia(gp);t=gp.prototype;t.xc=function(){return Wc.Sp};t.ig=function(b,c,d){16==c?Oc(b,Vc.iJ,d):gp.n.ig.call(this,b,c,d)};t.w=function(b){var c=gp.n.w.call(this,b),d=b.Pf();d&&this.Pc(c,d);(d=b.X())&&this.Ba(c,d);b.Rb&16&&this.ig(c,16,b.Ge());return c};t.o=function(b,c){var c=gp.n.o.call(this,b,c),d=this.X(c);b.fe=d;b.tt(this.Pf(c));b.Rb&16&&this.ig(c,16,b.Ge());return c};t.X=ha;t.Ba=ha;t.Pf=function(b){return b.title};t.Pc=function(b,c){b&&(b.title=c||"")};t.sf=u(20);
t.M=s("goog-button");a.ip=function(b,c){b||f(Error("Invalid class name "+b));qa(c)||f(Error("Invalid decorator function "+c));hp[b]=c},a.jp={},a.hp={};a.kp=function(b,c,d){T.call(this,d);if(!c){for(var c=this.constructor,e;c;){e=ua(c);if(e=jp[e])break;c=c.n?c.n.constructor:k}c=e?qa(e.P)?e.P():new e:k}this.N=c;this.mm(b)};y(kp,T);t=kp.prototype;t.wc=k;t.aa=0;t.Rb=39;t.Di=255;t.dk=0;t.lb=j;t.cf=k;t.hj=j;t.dq=m;t.Pj=k;t.Zo=function(b){this.Aa&&b!=this.hj&&lp(this,b);this.hj=b};t.kc=function(){return this.N.kc(this)};t.qr=function(){return this.nb||(this.nb=new cl)};
t.sh=function(b){b&&(this.cf?z.contains(this.cf,b)||this.cf.push(b):this.cf=[b],this.N.Xi(this,b,j))};t.Xi=function(b,c){c?this.sh(b):b&&this.cf&&(z.remove(this.cf,b),0==this.cf.length&&(this.cf=k),this.N.Xi(this,b,m))};t.w=function(){var b=this.N.w(this);this.g=b;var c=this.Pj||this.N.xc();c&&Nc(b,c);this.dq||this.N.Uo(b,m);this.T()||this.N.F(b,m)};t.ap=u(17);t.Z=function(){return this.N.Z(this.m())};t.vc=function(b){return this.N.vc(b)};
t.ea=function(b){this.g=b=this.N.o(this,b);var c=this.Pj||this.N.xc();c&&Nc(b,c);this.dq||this.N.Uo(b,m);this.lb="none"!=b.style.display};t.C=function(){kp.n.C.call(this);this.N.Fe(this);if(this.Rb&-2&&(this.hj&&lp(this,j),this.Rb&32)){var b=this.kc();if(b){var c=this.qr();c.attach(b);this.h().e(c,"key",this.Zb).e(b,"focus",this.Be).e(b,"blur",this.Uc)}}};
a.lp=function(b,c){var d=b.h(),e=b.m();c?(d.e(e,"mouseover",b.ld).e(e,"mousedown",b.Ce).e(e,"mouseup",b.Qf).e(e,"mouseout",b.Ph),b.Gn!=ha&&d.e(e,"contextmenu",b.Gn),A&&d.e(e,"dblclick",b.RD)):(d.Fa(e,"mouseover",b.ld).Fa(e,"mousedown",b.Ce).Fa(e,"mouseup",b.Qf).Fa(e,"mouseout",b.Ph),b.Gn!=ha&&d.Fa(e,"contextmenu",b.Gn),A&&d.Fa(e,"dblclick",b.RD))};t.jb=function(){kp.n.jb.call(this);this.nb&&this.nb.detach();this.T()&&this.isEnabled()&&this.N.Pe(this,m)};
t.z=function(){kp.n.z.call(this);this.nb&&(this.nb.H(),delete this.nb);delete this.N;this.cf=this.wc=k};t.eb=p("wc");t.Ja=function(b){this.N.Ja(this.m(),b);this.mm(b)};t.mm=ca("wc");t.Dg=function(){var b=this.eb();if(!b)return"";b=oa(b)?b:ma(b)?z.map(b,Hc).join(""):Gc(b);return Ka(b)};t.lm=u(53);t.li=function(b){kp.n.li.call(this,b);var c=this.m();c&&this.N.li(c,b)};t.Uo=function(b){this.dq=b;var c=this.m();c&&this.N.Uo(c,b)};t.T=p("lb");
t.F=function(b,c){if(c||this.lb!=b&&this.dispatchEvent(b?"show":"hide")){var d=this.m();d&&this.N.F(d,b);this.isEnabled()&&this.N.Pe(this,b);this.lb=b;return j}return m};t.isEnabled=function(){return!(this.aa&1)};t.$a=function(b){var c=this.getParent();if((!c||"function"!=typeof c.isEnabled||c.isEnabled())&&mp(this,1,!b))b||(this.setActive(m),this.qd(m)),this.T()&&this.N.Pe(this,b),this.cc(1,!b)};t.qd=function(b){mp(this,2,b)&&this.cc(2,b)};t.ac=function(){return!!(this.aa&4)};
t.setActive=function(b){mp(this,4,b)&&this.cc(4,b)};t.om=function(b){mp(this,8,b)&&this.cc(8,b)};t.Ge=function(){return!!(this.aa&16)};t.$c=function(b){mp(this,16,b)&&this.cc(16,b)};t.pb=function(){return!!(this.aa&64)};t.rb=function(b){mp(this,64,b)&&this.cc(64,b)};t.Vd=p("aa");t.cc=function(b,c){this.Rb&b&&c!=!!(this.aa&b)&&(this.N.cc(this,b,c),this.aa=c?this.aa|b:this.aa&~b)};
a.np=function(b,c,d){b.Aa&&(b.aa&c&&!d)&&f(Error("Component already rendered"));!d&&b.aa&c&&b.cc(c,m);b.Rb=d?b.Rb|c:b.Rb&~c},a.op=function(b,c){return!!(b.Di&c)&&!!(b.Rb&c)},a.mp=function(b,c,d){return!!(b.Rb&c)&&!!(b.aa&c)!=d&&(!(b.dk&c)||b.dispatchEvent(Mh(c,d)))&&!b.Ag};t.ld=function(b){(!b.relatedTarget||!tc(this.m(),b.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&op(this,2))&&this.qd(j)};
t.Ph=function(b){if((!b.relatedTarget||!tc(this.m(),b.relatedTarget))&&this.dispatchEvent("leave"))op(this,4)&&this.setActive(m),op(this,2)&&this.qd(m)};t.Gn=ha;t.Ce=function(b){this.isEnabled()&&(op(this,2)&&this.qd(j),od(b)&&(op(this,4)&&this.setActive(j),this.N.Sh(this)&&this.kc().focus()));!this.dq&&od(b)&&b.preventDefault()};t.Qf=function(b){this.isEnabled()&&(op(this,2)&&this.qd(j),this.ac()&&(this.ae(b)&&op(this,4))&&this.setActive(m))};t.RD=function(b){this.isEnabled()&&this.ae(b)};
t.ae=function(b){op(this,16)&&this.$c(!this.Ge());op(this,8)&&this.om(j);op(this,64)&&this.rb(!this.pb());var c=new hd("action",this);b&&(c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.Vy=b.Vy);return this.dispatchEvent(c)};t.Be=function(){op(this,32)&&mp(this,32,j)&&this.cc(32,j)};t.Uc=function(){op(this,4)&&this.setActive(m);op(this,32)&&mp(this,32,m)&&this.cc(32,m)};
t.Zb=function(b){return this.T()&&this.isEnabled()&&this.gf(b)?(b.preventDefault(),b.stopPropagation(),j):m};t.gf=function(b){return 13==b.keyCode&&this.ae(b)};qa(kp)||f(Error("Invalid component class "+kp));qa(bp)||f(Error("Invalid renderer class "+bp));a.pp=ua(kp);jp[pp]=bp;ip("goog-control",function(){return new kp(k)});a.qp=function(){};y(qp,gp);ia(qp);t=qp.prototype;t.xc=ba();t.w=function(b){b.Zo(m);b.Di&=-256;np(b,32,m);return b.L().w("button",{"class":this.ef(b).join(" "),disabled:!b.isEnabled(),title:b.Pf()||"",value:b.X()||""},b.Dg()||"")};t.vc=function(b){return"BUTTON"==b.tagName||"INPUT"==b.tagName&&("button"==b.type||"submit"==b.type||"reset"==b.type)};t.o=function(b,c){b.Zo(m);b.Di&=-256;np(b,32,m);c.disabled&&E.add(c,this.zn(1));return qp.n.o.call(this,b,c)};t.Fe=function(b){b.h().e(b.m(),"click",b.ae)};
t.Uo=ha;t.li=ha;t.Sh=function(b){return b.isEnabled()};t.Pe=ha;t.cc=function(b,c,d){qp.n.cc.call(this,b,c,d);if((b=b.m())&&1==c)b.disabled=d};t.X=function(b){return b.value};t.Ba=function(b,c){b&&(b.value=c)};t.ig=ha;a.rp=function(b,c,d){kp.call(this,b,c||qp.P(),d)};y(rp,kp);t=rp.prototype;t.X=p("fe");t.Ba=function(b){this.fe=b;this.N.Ba(this.m(),b)};t.Pf=p("yp");t.Pc=function(b){this.yp=b;this.N.Pc(this.m(),b)};t.tt=ca("yp");t.sf=u(19);t.z=function(){rp.n.z.call(this);delete this.fe;delete this.yp};t.C=function(){rp.n.C.call(this);if(this.Rb&32){var b=this.kc();b&&this.h().e(b,"keyup",this.gf)}};t.gf=function(b){return 13==b.keyCode&&"key"==b.type||32==b.keyCode&&"keyup"==b.type?this.ae(b):32==b.keyCode};
ip("goog-button",function(){return new rp(k)});a.sp=function(){};y(sp,bp);ia(sp);sp.prototype.w=function(b){var c=b.L().w("span",this.ef(b).join(" "));tp(this,c,b.xh);return c};sp.prototype.o=function(b,c){var c=sp.n.o.call(this,b,c),d=E.get(c),e=up;z.contains(d,vp(this,wp))?e=wp:z.contains(d,vp(this,xp))?e=xp:z.contains(d,vp(this,up))&&(e=up);b.xh=e;Oc(c,Vc.Tp,e==wp?"mixed":e==xp?"true":"false");return c};sp.prototype.xc=function(){return Wc.XI};
a.tp=function(b,c,d){if(c){var e=vp(b,d);E.has(c,e)||(F.forEach(yp,function(b){b=vp(this,b);E.enable(c,b,b==e)},b),Oc(c,Vc.Tp,d==wp?"mixed":d==xp?"true":"false"))}};sp.prototype.M=s("goog-checkbox");a.vp=function(b,c){var d=b.M();if(c==xp)return d+"-checked";if(c==up)return d+"-unchecked";if(c==wp)return d+"-undetermined";f(Error("Invalid checkbox state: "+c))};a.zp=function(b,c,d){d=d||sp.P();kp.call(this,k,d,c);this.xh=la(b)?b:up};y(zp,kp);a.xp=j,a.up=m,a.wp=k,a.yp={Tp:xp,cX:up,eX:wp};t=zp.prototype;t.wb=k;t.Ge=function(){return this.xh==xp};t.$c=function(b){b!=this.xh&&(this.xh=b,tp(this.N,this.m(),this.xh))};t.toggle=function(){this.$c(this.xh?up:xp)};
t.C=function(){zp.n.C.call(this);if(this.hj){var b=this.h();this.wb&&b.e(this.wb,"click",this.Jw).e(this.wb,"mouseover",this.ld).e(this.wb,"mouseout",this.Ph).e(this.wb,"mousedown",this.Ce).e(this.wb,"mouseup",this.Qf);b.e(this.m(),"click",this.Jw)}if(this.wb){if(!this.wb.id){var b=this.wb,c;c=this.Ud()+".lbl";b.id=c}Oc(this.m(),Vc.ju,this.wb.id)}};t.$a=function(b){zp.n.$a.call(this,b);if(b=this.m())b.tabIndex=this.isEnabled()?0:-1};
t.Jw=function(b){b.stopPropagation();var c=this.xh?"uncheck":"check";this.isEnabled()&&this.dispatchEvent(c)&&(b.preventDefault(),this.toggle(),this.dispatchEvent("change"))};t.gf=function(b){32==b.keyCode&&this.Jw(b);return m};ip("goog-checkbox",function(){return new zp});a.Ap=function(){};y(Ap,gp);ia(Ap);t=Ap.prototype;t.w=function(b){var c={"class":"goog-inline-block "+this.ef(b).join(" "),title:b.Pf()||""};return b.L().w("div",c,b.eb())};t.xc=function(){return Wc.Sp};t.vc=function(b){return"DIV"==b.tagName};t.o=function(b,c){E.add(c,"goog-inline-block");return Ap.n.o.call(this,b,c)};t.X=s("");t.M=s("goog-flat-button");ip("goog-flat-button",function(){return new rp(k,Ap.P())});a.Bp=function(){};y(Bp,Ap);ia(Bp);Bp.prototype.M=s("goog-link-button");ip("goog-link-button",function(){return new rp(k,Bp.P())});a.Dp=function(b,c,d,e,g){function h(b){b&&(b.tabIndex=0,Nc(b,l.xc()),E.add(b,"goog-zippy-header"),Cp(l,b),b&&l.eF.e(b,"keydown",l.AQ))}M.call(this);this.ca=g||Tb();this.Fh=this.ca.m(b)||k;this.rn=this.ca.m(e||k);this.cl=(this.Tx=qa(c)?c:k)||!c?k:this.ca.m(c);this.hd=d==j;this.eF=new ne(this);this.oy=new ne(this);var l=this;h(this.Fh);h(this.rn);this.Ka(this.hd)};y(Dp,Hd);t=Dp.prototype;t.hj=j;t.z=function(){Dp.n.z.call(this);Uc(this.eF);Uc(this.oy)};t.xc=function(){return Wc.jB};t.Z=p("cl");
t.expand=u(59);t.collapse=function(){this.Ka(m)};t.toggle=function(){this.Ka(!this.hd)};t.Ka=function(b){this.cl?Q(this.cl,b):b&&this.Tx&&(this.cl=this.Tx());this.cl&&E.add(this.cl,"goog-zippy-content");this.rn?(Q(this.Fh,!b),Q(this.rn,b)):this.Fh&&(E.enable(this.Fh,"goog-zippy-expanded",b),E.enable(this.Fh,"goog-zippy-collapsed",!b),Oc(this.Fh,Vc.aB,b));this.hd=b;this.dispatchEvent(new Ep("toggle",this,this.hd))};t.lc=p("hd");
t.Zo=function(b){this.hj!=b&&((this.hj=b)?(Cp(this,this.Fh),Cp(this,this.rn)):this.oy.removeAll())};a.Cp=function(b,c){c&&b.oy.e(c,"click",b.zQ)};t.AQ=function(b){if(13==b.keyCode||32==b.keyCode)this.toggle(),this.dispatchEvent(new hd("action",this)),b.preventDefault(),b.stopPropagation()};t.zQ=function(){this.toggle();this.dispatchEvent(new hd("action",this))};a.Ep=function(b,c,d){hd.call(this,b,c);this.xd=d};y(Ep,hd);a.Fp=function(){this.wd=k};ia(Fp);Fp.prototype.refresh=function(){return this.wd&&"pending"===this.wd.state()?this.wd:this.wd=$.post("/oauth/refresh",function(b){b=b.sina;F.extend(th,b);b.id&&Y.dispatchEvent(new hn("sina_callback",b))})};a.Gp=function(){};y(Gp,bp);ia(Gp);Gp.prototype.w=function(b){return b.L().w("div",this.M())};Gp.prototype.o=function(b,c){c.id&&Nh(b,c.id);if("HR"==c.tagName){var d=c,c=this.w(b);kc(c,d);L(d)}else E.add(c,this.M());return c};Gp.prototype.Ja=ba();Gp.prototype.M=s("goog-menuseparator");a.Hp=function(b,c){kp.call(this,k,b||Gp.P(),c);np(this,1,m);np(this,2,m);np(this,4,m);np(this,32,m);this.aa=1};y(Hp,kp);Hp.prototype.C=function(){Hp.n.C.call(this);Nc(this.m(),"separator")};ip("goog-menuseparator",function(){return new Hp});a.Ip=function(){};ia(Ip);t=Ip.prototype;t.xc=ba();t.w=function(b){return b.L().w("div",this.ef(b).join(" "))};t.Z=aa();t.vc=function(b){return"DIV"==b.tagName};t.o=function(b,c){c.id&&Nh(b,c.id);var d=this.M(),e=m,g=E.get(c);g&&z.forEach(g,function(c){c==d?e=j:c&&this.Iz(b,c,d)},this);e||E.add(c,d);Jp(this,b,this.Z(c));return c};t.Iz=function(b,c,d){c==d+"-disabled"?b.$a(m):c==d+"-horizontal"?b.$o(Kp):c==d+"-vertical"&&b.$o(Lp)};
a.Jp=function(b,c,d){if(d)for(var e=d.firstChild,g;e&&e.parentNode==d;){g=e.nextSibling;if(1==e.nodeType){var h=b.An(e);h&&(h.g=e,c.isEnabled()||h.$a(m),c.J(h),h.o(e))}else(!e.nodeValue||""==La(e.nodeValue))&&d.removeChild(e);e=g}};t.An=function(b){a:{for(var c=E.get(b),d=0,e=c.length;d<e;d++)if(b=c[d]in hp?hp[c[d]]():k)break a;b=k}return b};t.Fe=function(b){b=b.m();ug(b,j,B);A&&(b.hideFocus=j);var c=this.xc();c&&Nc(b,c)};t.kc=function(b){return b.m()};t.M=s("goog-container");
t.ef=function(b){var c=this.M(),d=[c,b.xb==Kp?c+"-horizontal":c+"-vertical"];b.isEnabled()||d.push(c+"-disabled");return d};t.ow=u(12);a.Kp="horizontal",a.Lp="vertical";a.Mp=function(){T.call(this);this.au=[]};y(Mp,T);t=Mp.prototype;t.Nb=me("ZH.ui.Accordion");t.Ga=function(b){this.au.push(b);b.rt(this)};t.C=function(){Mp.n.C.call(this);this.h().e(this,"toggle",this.bO)};t.bO=function(b){z.forEach(this.au,function(c){b.target!==c&&c.lc()&&c.Ka(m,j)},this)};t.z=function(){Mp.n.z.call(this);z.forEach(this.au,function(b){b.H()},this);this.au=[]};a.Np=function(b,c){var d=this,e={};F.extend(e,this.defaults,c||{});this.G=e;var g=e.Zc?{Zc:v(e.Zc,d)}:k;g&&(g.Y=e.Y?v(e.Y,d):k);this.N=g=new Lm(e.Vj,g);var h=new Hm(e.source,!e.yU);this.mf=h;var l=e.wx;l||(l=new ym(e.separator,e.PL,!!e.multiple,e.delay),l.ji=function(b,c){var g;qa(e.select)&&(g=e.select.call(d,b,d.N.cg[d.N.Dl]));Bm(this,la(g)?g:b.label||b.toString(),c);return m});om.call(this,h,g,l);l.$=this;l.Ik(b);b.setAttribute("autocomplete","off");h.gi=function(b,c,g){var h=g;qa(e.format)&&(h=
function(b,c){var h=e.format.call(d,c,b);qa(e.filter)&&(h=e.filter.call(d,h,b));g(b,h)});return Hm.prototype.gi.call(this,b,c,h)};g.fH=function(b,c,d){b=b.data;d.innerHTML=b.YT?b.YT():b.label||b.toString()};this.Sb=b;e.Ed&&(this.Wh=e.Ed);e.placeholder&&(this.be=new Ul(b,e.placeholder));this.addEventListener("suggestionsupdate",function(){this.dispatchEvent(this.pb()?"show":"hide")})};y(Np,Rm);
Np.prototype.defaults={source:"",Ed:10,yU:m,filter:k,format:k,wx:k,delay:300,separator:k,PL:k,multiple:m,Vj:k,jZ:k,placeholder:"",Zc:k,Y:k};a.Qp=function(b){var c;return(c=Op[this.G.source])||(c=Op[Pp][b[0]])?c(b):b};Np.prototype.defaults.format=function(b,c){return La(c)&&ma(b)?ma(b[0])?z.map(b[0].slice(1),Qp,this):b:[]};a.Pp="/autocomplete",a.Op={};
Op[Pp]={topic:function(b){return{type:b[0],name:b[1],url_token:b[2],avatar:b[3],id:b[4],answers:b[6],alias:b[7],raw:b,value:b[4],label:b[1]}},question:function(b){return{type:b[0],title:b[1],id:b[2],url_token:b[3],answers:b[4],is_star:!!b[5],raw:b,label:b[1],value:b[2]}},people:function(b){return{type:b[0],fullname:b[1],url_token:b[2],avatar:b[3],id:b[4],headline:b[5],raw:b,label:b[1],value:b[4]}},search_link:function(b){return{type:b[0],raw:b,label:b[1],value:b[1]}}};
Op["/topic/autocomplete"]=function(b){return{type:b[0],name:b[1],url_token:b[2],avatar:b[3],id:b[4],followers:b[5],alias:b[6],label:b[1]}};Op["/question/autocomplete"]=function(b){return{type:b[0],title:b[1],id:b[2],url_token:b[3],is_duplicated:Boolean(+b[4]),answer_count:b[5],raw:b,label:b[1],value:b[2]}};a.Rp=function(b,c,d,e){ym.call(this,b,c,d,e)};y(Rp,ym);Rp.prototype.Uc=ha;Rp.prototype.Zb=ha;Rp.prototype.ji=s(m);a.Tp=function(b,c,d){M.call(this);this.Wc=d||"搜索话题";this.la=c;this.data=b||[];this.status=Sp;this.dH="/topic/unbind";this.tB="/topic/bind";this.isEnabled=j;this.Tr='<a class="zm-tag-editor-tip-link" href="#" name="edit">帮忙给这个问题选个话题吧，好让别人来回答</a><a name="edit" class="zu-edit-button" href="#"><i class="zu-edit-button-icon"></i>添加</a>';this.Ed=10;this.Ds=m;this.ws=Infinity;this.ys=0;this.rB=m};y(Tp,An);a.Sp="view",a.Up="零一二三四五六七八九十".split("");t=Tp.prototype;
t.o=function(b){this.g=b;this.Qe=J("zm-tag-editor-labels",this.g);this.Ds&&(this.data=this.Sy());Vp(this);this.re();this.Ra()};t.Sy=function(){var b=Wb("zm-item-tag",this.Qe);return z.map(b,function(b){var d=[La(b.innerHTML),b.getAttribute("data-token"),k,b.getAttribute("data-topicid")];d.mU=!!b.getAttribute("data-uneditable");return d})};
a.Vp=function(b){if(b.data.length){var c=z.map(b.data,function(b){return Bk(b,"",k,"b")},b);b.isEnabled&&c.push(Fk());b.Qe.innerHTML=c.join("")}else b.isEnabled&&(b.Qe.innerHTML=b.Tr)};
t.tn=function(){this.gc||(this.gc=K("div","zm-tag-editor-editor",[this.qn=K("div","zg-section zg-clear"),this.af=K("div","zg-section zm-tag-editor-command-buttons-wrap",[this.Qa=K("input",{"class":"zg-form-text-input zg-mr15",type:"text"}),K("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.tD=K("a",{href:"#",name:"close"},"完成")]),this.xs=K("div",{className:"zm-tag-editor-maxcount zg-section",style:"display:none;"},[K("span",{},"最多只能为一个问题绑定 "+this.ws+" 个话题"),
K("a",{href:"#",name:"close"},"完成")])]),lc(this.gc,this.Qe),this.Wc&&(this.Nx=new Eo(this.Wc),this.Nx.o(this.Qa),this.Qa.title=this.Wc),this.hf(this.af))};t.hf=function(b,c){this.O=new Qo(c||"/topic/autocomplete",this.Qa,k,k,b,j);this.O.eg(j);this.O.Wh=this.Ed;this.O.bp(this.gm());this.O.Sv=[this.Wc];this.h().e(this.O,"select",this.vo);this.h().e(this.O,om.qh.yi,this.vu)};t.Uv=function(b){return z.some(this.data,function(c){return c[0]===b[1]})};
t.gm=function(){return v(function(b,c){function d(){return z.find(e,function(b){return 3>=b.length&&b[1]===Ga("创建 %s 话题",b[2])})}var e=z.filter(b,function(b){return"topic"!==b[0]?m:!this.Uv(b)},this),g=v(function(){return z.find(this.data,function(b){return b[0]===c})},this);S.Fr?this.rB&&((!e.length||!d()&&!z.find(e,function(b){return"topic"===b[0]&&b[4]&&b[1]===c}))&&!g())&&e.push(["topic",Ga("创建 %s 话题",c),c]):(g=d())&&(1<e.length?z.remove(e,g):e=[["plain_text",'<span class="zu-autocomplete-row-name zu-autocomplete-row-name-info">没有找到话题：'+
g[2]+'</span><span class="zg-gray-normal zu-autocomplete-row-description">请使用已经创建的话题</span>']]);return e},this)};t.vu=function(){1<this.O.hb.length&&!this.O.hb[0][4]&&rm(this.O)};t.Ra=function(){this.h().e(this.g,"click",this.ka);Ni&&this.h().e(Ni,"anon_change",this.fj)};t.fj=function(b){b.kb?E.add(this.g,"zm-tag-editor-disabled"):E.remove(this.g,"zm-tag-editor-disabled")};
t.ka=function(b){var c=this.df(b.target);if(c&&c.name)switch(b.preventDefault(),c.name){case "edit":this.$d(j);break;case "add":(b=Ck(!this.Qa.value?"":this.Qa.value.replace(/<[^>]+>/g,"")))&&b!==this.Qa.title&&this.Te("",b);break;case "close":this.$d(m);break;case "remove":this.rG(c)}};t.$d=on(function(b){if(b&&(this.dispatchEvent("start_editing"),this.dispatchEvent("beforeedit")===m))return;this.status=b?"edit":Sp;this.tn();this.Ne();this.re();Wp(this)},j);
t.rG=function(b){var c=b.id.split("-")[1],d=sc(b).innerHTML;this.ys&&this.data.length<=this.ys?U("请至少绑定"+Up[this.ys]+"个话题"):(this.data=z.filter(this.data,function(b){return!c?b[1]!==d:String(b[3])!==c}),this.Eo(c))};t.Eo=function(b){if(!this.ct||!this.ct.ac()){this.ct=new V(j);var c=new lj;c.add("qid",this.la).add("question_id",this.la).add("topic_id",b);P(this.h(),this.ct,"complete",this.PN);this.ct.ajax(this.dH,c.toString())}};
t.PN=function(b){b=Ie(b.target);b.r?U(b.msg):(this.dispatchEvent("remove_tag"),Vp(this),this.Ne(),Wp(this))};t.re=function(){this.status===Sp?(Q(this.Qe,j),this.gc&&Q(this.gc,m)):(Q(this.Qe,m),this.gc&&this.isEnabled&&Q(this.gc,j),this.xs&&Q(this.xs,m))};t.Te=function(b,c){this.Rg||(this.dispatchEvent("add_tag"),this.Rg=j,this.xhr=new V(j),P(this.h(),this.xhr,"complete",this.wu),this.xhr.ajax(this.tB,"qid="+this.la+"&question_id="+this.la+"&topic_id="+b+"&topic_text="+encodeURIComponent(c)))};
t.vo=function(){var b="",c="",d=this.O.Gg().slice(1);3<d.length?(b=d[3],c=d[0]):c=d[1];z.some(this.data,function(d){return d[3]&&String(d[3])===b||d[0]===c})||(b||c)&&this.Te(b,c)};t.wu=function(){this.Rg=m;var b=Ie(this.xhr);this.bk(b);Wp(this)};t.bk=function(b){var c=k;b&&b.r?b.notify?Dn(b.notify):U(b.msg,2E3):(4<b.length&&Dn(b[4]),this.wH=c=b,this.data.push(c),this.Mo(),Vp(this),this.Ne(),this.Qa.value="",this.dispatchEvent("select"))};t.AD=function(b){return Bk(b,"nor",m)};
t.Ne=function(){var b=z.map(this.data,function(b){return['<span class="zm-tag-editor-edit-item">',this.AD(b),b.mU?"":'<a id="rmid-'+b[3]+'" href="#" class="zg-r3px zm-tag-editor-remove-button" name="remove"></a>',"</span>"].join("")},this);this.qn.innerHTML=b.join("")};t.Gg=p("wH");t.$a=function(b){this.isEnabled=b;this.status=Sp;this.re()};a.Wp=function(b){var c=b.data.length>=b.ws;b.af&&Q(b.af,!c);b.xs&&Q(b.xs,c)};
t.Mo=function(){var b=[];this.data=z.filter(this.data,function(c){if(z.contains(b,c[1]))return m;b.push(c[1]);return j})};a.Xp=function(b){Tp.call(this);this.Tr="";this.Wc=b||"";this.ws=this.Ed=5;this.Pp=$("#zh-question-suggest-title-content")};y(Xp,Tp);t=Xp.prototype;
t.o=function(b){Xp.n.o.call(this,b);this.$d(j);z.forEach(Vb("a",k,b),function(b){Q(b,m)});this.h().e(this.Qa,"focus",function(){this.Pp.val()&&!this.gD&&(this.gD=j,this.DA());this.placeholder&&(this.placeholder.ak("搜索话题"),Xl(this.placeholder))});this.dF=new cl;this.dF.attach(this.Qa);this.h().e(this.dF,"key",function(b){8===b.keyCode&&(1===this.Qa.value.length&&(this.QB=j,this.BK=setTimeout(v(function(){this.QB=m;clearTimeout(this.BK)},this))),!this.Qa.value.length&&!this.QB&&(this.data.pop(),this.Ne(),
this.dispatchEvent("remove_tag")))});this.ET=new Sn(this.DA,2E3,this);this.h().e(this.Pp[0],"keyup",function(){var b=this.Pp.val();this.Et!==b&&(this.ET.fire(),this.Et=b)});this.h().e(this,["remove_tag","add_tag"],function(){Yp(this);0<this.data.length&&this.placeholder&&(this.placeholder.ak("搜索话题"),Xl(this.placeholder));5<=this.data.length?(this.$a(m),this.Np.show(),this.placeholder&&this.placeholder.hide(),this.fu.hide()):(this.$a(j),this.Np.hide(),this.placeholder&&this.placeholder.show(),this.fu.show(),
this.Np.removeClass("light"))})};t.Uv=function(b){return z.some(this.data,function(c){return c[1]===b[1]})};t.Eo=function(){this.dispatchEvent("remove_tag");Vp(this);this.Ne()};
t.tn=function(){this.gc||(Xp.n.tn.call(this),E.add(this.gc,"zg-clear"),E.set(this.qn,"zg-inline"),E.add(this.af,"zg-left"),E.remove(this.af,"zg-section"),E.set(this.Qa,"zu-question-suggest-topic-input"),E.add(this.Qa,"label-input-label"),this.Rp=$("<div class='sug-con zg-clear' style='display:none;'></div>").append("<span class='zg-gray-normal zg-left tip'>推荐添加</span>").append(this.TI=$("<span class='sugs zg-clear zg-inline'></span>")).append(this.XA=$("<img src='http://static.zhihu.com/static/img/spinner2.gif' style=''/>")),
this.Rp.insertAfter(this.g),this.Rp.on("click","a[name='add']",v(function(b){b=b.currentTarget;if(5>this.data.length)this.Te($(b).attr("data-id"),$(b).attr("data-text"));else{this.Np.addClass("light");var c=$(this.gc);c.parent().addClass("sandbox");c.addClass("animated shake");setTimeout(function(){c.removeClass("animated shake");c.parent().removeClass("sandbox");qa(i)&&i()},1E3)}},this)),this.fu=$('<label for="topic" class="zg-icon icon-magnify"></label>'),$(this.af).prepend(this.fu),this.placeholder=
new Ul(this.Qa,{text:"搜索话题",OB:j}),$(this.af).append(this.Np=$("<label class='err-tip' style='display:none;'>最多添加五个话题</label>")),this.h().e(this.gc,"click",this.kU))};t.kU=function(b){Lk(this.g,b.target)||(b=J("zu-question-suggest-topic-input",this.gc),sg(b)&&b.focus())};
t.DA=function(){this.gD&&(this.Et=this.Pp.val(),8>this.Et.length?(this.pp=[],Yp(this)):(this.qp&&this.qp.abort(),this.qp=new V(m),this.h().e(this.qp,"success",this.dR),this.qp.ajax("/topic-question/autocomplete?token="+this.Et+"&max_matches=5&use_similar=0","GET"),this.XA.show()))};t.dR=function(){this.pp=Ie(this.qp)[0].slice(1);Yp(this)};
a.Yp=function(b){var c;c=b.pp?z.filter(b.pp,function(b){return!this.Uv(b)},b):[];b.Rp.show();(!c||0===c.length)&&b.Rp.hide();var d="";c=z.map(c,function(b){return"<a href='javascript:;' name='add' data-id='"+b[4]+"' data-text='"+b[1]+"' class='zg-r3px zm-item-tag'><span>"+b[1]+"</span></a>"});d+=c.join("");b.TI.html(d);b.XA.hide()};
t.Ne=function(){var b=[];z.forEach(this.data,function(c){b.push(['<div class="zm-tag-editor-edit-item"><span>',c[0],'</span><a id="rmid-',c[3],'" href="#" class="zg-r3px zm-tag-editor-remove-button" name="remove"></a></div>'].join(""))},this);this.qn.innerHTML=b.join("")};t.reset=function(){this.data=[];Vp(this);this.Ne()};t.rG=function(b){var c=b.id.split("-")[1],d=sc(b).innerHTML;this.data=z.filter(this.data,function(b){return!c?b[1]!==d:String(b[3])!==c});this.Eo(c)};
t.Te=function(b,c){var d=[c,c,"",b];this.wH=d;this.data.push(d);Vp(this);this.Ne();this.Qa.value="";this.dispatchEvent("select");this.dispatchEvent("add_tag")};t.$a=function(b){this.Qa&&Q(this.Qa,b)};a.Zp=function(){M.call(this)};y(Zp,M);a.$p=me("goog.dom.SavedRange");Zp.prototype.restore=u(35);a.aq=function(b,c,d,e,g){this.Nc=!!c;b&&this.ad(b,e);this.depth=g!=i?g:this.dc||0;this.Nc&&(this.depth*=-1);this.Hq=!d};y(aq,Nd);t=aq.prototype;t.da=k;t.dc=0;t.cA=m;t.ad=function(b,c,d){if(this.da=b)this.dc=pa(c)?c:1!=this.da.nodeType?0:this.Nc?-1:1;pa(d)&&(this.depth=d)};t.xg=function(b){this.da=b.da;this.dc=b.dc;this.depth=b.depth;this.Nc=b.Nc;this.Hq=b.Hq};t.clone=function(){return new aq(this.da,this.Nc,!this.Hq,this.dc,this.depth)};t.ip=u(16);
t.next=function(){var b;if(this.cA){(!this.da||this.Hq&&0==this.depth)&&f(O.bb);b=this.da;var c=this.Nc?-1:1;if(this.dc==c){var d=this.Nc?b.lastChild:b.firstChild;d?this.ad(d):this.ad(b,-1*c)}else(d=this.Nc?b.previousSibling:b.nextSibling)?this.ad(d):this.ad(b.parentNode,-1*c);this.depth+=this.dc*(this.Nc?-1:1)}else this.cA=j;(b=this.da)||f(O.bb);return b};t.equals=function(b){return b.da==this.da&&(!this.da||b.dc==this.dc)};
t.splice=function(b){var c=this.da,d=this.Nc?1:-1;this.dc==d&&(this.dc=-1*d,this.depth+=this.dc*(this.Nc?-1:1));this.Nc=!this.Nc;aq.prototype.next.call(this);this.Nc=!this.Nc;for(var d=na(arguments[0])?arguments[0]:arguments,e=d.length-1;0<=e;e--)lc(d[e],c);L(c)};a.bq=function(){},a.cq=function(b){if(b.getSelection)return b.getSelection();var b=b.document,c=b.selection;if(c){try{var d=c.createRange();if(d.parentElement){if(d.parentElement().document!=b)return k}else if(!d.length||d.item(0).document!=b)return k}catch(e){return k}return c}return k},a.dq=function(b){for(var c=[],d=0,e=b.ej();d<e;d++)c.push(b.Ae(d));return c};t=bq.prototype;t.Fb=u(50);
a.eq=function(b){return b.Th()?b.ha():b.W()},a.fq=function(b){return b.Th()?b.W():b.ha()},a.gq=function(b){return b.Th()?b.ua():b.Ia()};t.Th=s(m);t.Da=function(){return Sb(A?this.yc():this.W())};t.Sa=function(){return bc(this.Da())};t.containsNode=function(b,c){return this.ug(hq(b),c)};t.bg=u(38);a.iq=function(b,c){aq.call(this,b,c,j)};y(iq,aq);a.jq=function(){};y(jq,bq);jq.prototype.ug=function(b,c){var d=dq(this),e=dq(b);return(c?z.some:z.every)(e,function(b){return z.some(d,function(d){return d.ug(b,c)})})};jq.prototype.insertNode=function(b,c){c?kc(b,this.W()):lc(b,this.ha());return b};jq.prototype.gh=u(9);a.kq=function(b,c,d,e,g){var h;b&&(this.va=b,this.Ca=c,this.sa=d,this.za=e,1==b.nodeType&&"BR"!=b.tagName&&(b=b.childNodes,(c=b[c])?(this.va=c,this.Ca=0):(b.length&&(this.va=z.Le(b)),h=j)),1==d.nodeType&&((this.sa=d.childNodes[e])?this.za=0:this.sa=d));aq.call(this,g?this.sa:this.va,g,j);if(h)try{this.next()}catch(l){l!=O.bb&&f(l)}};y(kq,iq);t=kq.prototype;t.va=k;t.sa=k;t.Ca=0;t.za=0;t.dj=u(56);t.bj=u(41);t.W=p("va");t.ha=p("sa");t.Zn=function(){return this.cA&&this.da==this.sa&&(!this.za||1!=this.dc)};
t.next=function(){this.Zn()&&f(O.bb);return kq.n.next.call(this)};t.ip=u(15);t.xg=function(b){this.va=b.va;this.sa=b.sa;this.Ca=b.Ca;this.za=b.za;this.jf=b.jf;kq.n.xg.call(this,b)};t.clone=function(){var b=new kq(this.va,this.Ca,this.sa,this.za,this.jf);b.xg(this);return b};a.lq=function(){};lq.prototype.ug=function(b,c){var d=c&&!b.isCollapsed(),e=b.R;try{return d?0<=this.ue(e,0,1)&&0>=this.ue(e,1,0):0<=this.ue(e,0,0)&&0>=this.ue(e,1,1)}catch(g){return A||f(g),m}};lq.prototype.containsNode=function(b,c){return this.ug(mq(b),c)};lq.prototype.Eg=u(25);lq.prototype.ed=function(){return new kq(this.W(),this.ua(),this.ha(),this.Ia())};a.nq=function(b){this.R=b};y(nq,lq);a.pq=function(b){var c=Sb(b).createRange();if(3==b.nodeType)c.setStart(b,0),c.setEnd(b,b.length);else if(oq(b)){for(var d,e=b;(d=e.firstChild)&&oq(d);)e=d;c.setStart(e,0);for(e=b;(d=e.lastChild)&&oq(d);)e=d;c.setEnd(e,1==e.nodeType?e.childNodes.length:e.length)}else d=b.parentNode,b=z.indexOf(d.childNodes,b),c.setStart(d,b),c.setEnd(d,b+1);return c},a.qq=function(b,c,d,e){var g=Sb(b).createRange();g.setStart(b,c);g.setEnd(d,e);return g};t=nq.prototype;t.clone=function(){return new this.constructor(this.R.cloneRange())};
t.yc=function(){return this.R.commonAncestorContainer};t.W=function(){return this.R.startContainer};t.ua=function(){return this.R.startOffset};t.ha=function(){return this.R.endContainer};t.Ia=function(){return this.R.endOffset};t.ue=function(b,c,d){return this.R.compareBoundaryPoints(1==d?1==c?fa.Range.START_TO_START:fa.Range.START_TO_END:1==c?fa.Range.END_TO_START:fa.Range.END_TO_END,b)};t.isCollapsed=function(){return this.R.collapsed};t.Lc=u(30);t.Wd=u(46);
t.select=function(b){var c=bc(Sb(this.W()));this.So(c.getSelection(),b)};t.So=function(b){b.removeAllRanges();b.addRange(this.R)};t.Yc=u(5);t.insertNode=function(b,c){var d=this.R.cloneRange();d.collapse(c);d.insertNode(b);d.detach();return b};t.gh=u(8);t.collapse=function(b){this.R.collapse(b)};a.rq=function(b){this.R=b};y(rq,nq);rq.prototype.So=function(b,c){!c||this.isCollapsed()?rq.n.So.call(this,b,c):(b.collapse(this.ha(),this.Ia()),b.extend(this.W(),this.ua()))};a.sq=function(b,c){this.R=b;this.Xq=c};y(sq,lq);a.tq=me("goog.dom.browserrange.IeRange"),a.uq=function(b){var c=Sb(b).body.createTextRange();if(1==b.nodeType)c.moveToElementText(b),oq(b)&&!b.childNodes.length&&c.collapse(m);else{for(var d=0,e=b;e=e.previousSibling;){var g=e.nodeType;if(3==g)d+=e.length;else if(1==g){c.moveToElementText(e);break}}e||c.moveToElementText(b.parentNode);c.collapse(!e);d&&c.move("character",d);c.moveEnd("character",b.length)}return c};t=sq.prototype;t.Zf=k;t.va=k;
t.sa=k;t.Ca=-1;t.za=-1;t.clone=function(){var b=new sq(this.R.duplicate(),this.Xq);b.Zf=this.Zf;b.va=this.va;b.sa=this.sa;return b};t.te=function(){this.Zf=this.va=this.sa=k;this.Ca=this.za=-1};
t.yc=function(){if(!this.Zf){var b=this.R.text,c=this.R.duplicate(),d=b.replace(/ +$/,"");(d=b.length-d.length)&&c.moveEnd("character",-d);d=c.parentElement();c=Ia(c.htmlText).length;if(this.isCollapsed()&&0<c)return this.Zf=d;for(;c>Ia(d.outerHTML).length;)d=d.parentNode;for(;1==d.childNodes.length&&d.innerText==(3==d.firstChild.nodeType?d.firstChild.nodeValue:d.firstChild.innerText)&&oq(d.firstChild);)d=d.firstChild;0==b.length&&(d=vq(this,d));this.Zf=d}return this.Zf};
a.vq=function(b,c){for(var d=c.childNodes,e=0,g=d.length;e<g;e++){var h=d[e];if(oq(h)){var l=uq(h),n=l.htmlText!=h.outerHTML;if(b.isCollapsed()&&n?0<=b.ue(l,1,1)&&0>=b.ue(l,1,0):b.R.inRange(l))return vq(b,h)}}return c};t.W=function(){this.va||(this.va=wq(this,1),this.isCollapsed()&&(this.sa=this.va));return this.va};t.ua=function(){0>this.Ca&&(this.Ca=xq(this,1),this.isCollapsed()&&(this.za=this.Ca));return this.Ca};
t.ha=function(){if(this.isCollapsed())return this.W();this.sa||(this.sa=wq(this,0));return this.sa};t.Ia=function(){if(this.isCollapsed())return this.ua();0>this.za&&(this.za=xq(this,0),this.isCollapsed()&&(this.Ca=this.za));return this.za};t.ue=function(b,c,d){return this.R.compareEndPoints((1==c?"Start":"End")+"To"+(1==d?"Start":"End"),b)};
a.wq=function(b,c,d){d=d||b.yc();if(!d||!d.firstChild)return d;for(var e=1==c,g=0,h=d.childNodes.length;g<h;g++){var l=e?g:h-g-1,n=d.childNodes[l],q;try{q=mq(n)}catch(r){continue}var w=q.R;if(b.isCollapsed())if(oq(n)){if(q.ug(b))return wq(b,c,n)}else{if(0==b.ue(w,1,1)){b.Ca=b.za=l;break}}else{if(b.ug(q)){if(!oq(n)){e?b.Ca=l:b.za=l+1;break}return wq(b,c,n)}if(0>b.ue(w,1,0)&&0<b.ue(w,0,1))return wq(b,c,n)}}return d},a.xq=function(b,c){var d=1==c,e=d?b.W():b.ha();if(1==e.nodeType){for(var e=e.childNodes,
g=e.length,h=d?1:-1,l=d?0:g-1;0<=l&&l<g;l+=h){var n=e[l];if(!oq(n)&&0==b.R.compareEndPoints((1==c?"Start":"End")+"To"+(1==c?"Start":"End"),mq(n).R))return d?l:l+1}return-1==l?0:l}g=b.R.duplicate();h=uq(e);g.setEndPoint(d?"EndToEnd":"StartToStart",h);g=g.text.length;return d?e.length-g:g};t.Sf=u(64);t.isCollapsed=function(){return 0==this.R.compareEndPoints("StartToEnd",this.R)};t.Lc=u(29);t.Wd=u(45);t.select=function(){this.R.select()};t.Yc=u(4);
a.yq=function(b,c,d){var e;e=e||Tb(b.parentElement());var g;1!=c.nodeType&&(g=j,c=e.w("DIV",k,c));b.collapse(d);var d=e||Tb(b.parentElement()),h,l=h=c.id;h||(h=c.id=db());b.pasteHTML(c.outerHTML);(c=d.m(h))&&(l||c.removeAttribute("id"));g&&(b=c.firstChild,e.mM(c),c=b);return c};t.insertNode=function(b,c){var d=yq(this.R.duplicate(),b,c);this.te();return d};t.gh=u(7);t.collapse=function(b){this.R.collapse(b);b?(this.sa=this.va,this.za=this.Ca):(this.va=this.sa,this.Ca=this.za)};a.zq=function(b){this.R=b};y(zq,nq);zq.prototype.So=function(b){b.collapse(this.W(),this.ua());(this.ha()!=this.W()||this.Ia()!=this.ua())&&b.extend(this.ha(),this.Ia());0==b.rangeCount&&b.addRange(this.R)};a.Aq=function(b){this.R=b};y(Aq,nq);Aq.prototype.ue=function(b,c,d){return Eb("528")?Aq.n.ue.call(this,b,c,d):this.R.compareBoundaryPoints(1==d?1==c?fa.Range.START_TO_START:fa.Range.END_TO_START:1==c?fa.Range.START_TO_END:fa.Range.END_TO_END,b)};Aq.prototype.So=function(b,c){b.removeAllRanges();c?b.setBaseAndExtent(this.ha(),this.Ia(),this.W(),this.ua()):b.setBaseAndExtent(this.W(),this.ua(),this.ha(),this.Ia())};a.Bq=function(b){return A&&!Gb(9)?new sq(b,Sb(b.parentElement())):D?new Aq(b):B?new rq(b):rb?new zq(b):new nq(b)},a.mq=function(b){if(A&&!Gb(9)){var c=new sq(uq(b),Sb(b));if(oq(b)){for(var d,e=b;(d=e.firstChild)&&oq(d);)e=d;c.va=e;c.Ca=0;for(e=b;(d=e.lastChild)&&oq(d);)e=d;c.sa=e;c.za=1==e.nodeType?e.childNodes.length:e.length;c.Zf=b}else c.va=c.sa=c.Zf=b.parentNode,c.Ca=z.indexOf(c.Zf.childNodes,b),c.za=c.Ca+1;b=c}else b=D?new Aq(pq(b)):B?new rq(pq(b)):rb?new zq(pq(b)):new nq(pq(b));return b},a.oq=
function(b){return hc(b)||3==b.nodeType};a.Cq=function(){};y(Cq,bq);a.Dq=function(b,c){var d=new Cq;d.Ei=b;d.jf=!!c;return d},a.Fq=function(b,c,d,e){var g=new Cq;g.jf=Eq(b,c,d,e);if("BR"==b.tagName)var h=b.parentNode,c=z.indexOf(h.childNodes,b),b=h;"BR"==d.tagName&&(h=d.parentNode,e=z.indexOf(h.childNodes,d),d=h);g.jf?(g.va=d,g.Ca=e,g.sa=b,g.za=c):(g.va=b,g.Ca=c,g.sa=d,g.za=e);return g};t=Cq.prototype;t.Ei=k;t.va=k;t.Ca=k;t.sa=k;t.za=k;t.jf=m;
t.clone=function(){var b=new Cq;b.Ei=this.Ei;b.va=this.va;b.Ca=this.Ca;b.sa=this.sa;b.za=this.za;b.jf=this.jf;return b};t.Oh=s("text");t.Td=function(){return Gq(this).R};t.te=function(){this.va=this.Ca=this.sa=this.za=k};t.ej=s(1);t.Ae=function(){return this};
a.Gq=function(b){var c;if(!(c=b.Ei)){c=b.W();var d=b.ua(),e=b.ha(),g=b.Ia();if(A&&!Gb(9)){var h=c,l=d,n=e,q=g,r=m;1==h.nodeType&&(l>h.childNodes.length&&tq.log(ce,"Cannot have startOffset > startNode child count",i),l=h.childNodes[l],r=!l,h=l||h.lastChild||h,l=0);var w=uq(h);l&&w.move("character",l);h==n&&l==q?w.collapse(j):(r&&w.collapse(m),r=m,1==n.nodeType&&(q>n.childNodes.length&&tq.log(ce,"Cannot have endOffset > endNode child count",i),n=(l=n.childNodes[q])||n.lastChild||n,q=0,r=!l),h=uq(n),
h.collapse(!r),q&&h.moveEnd("character",q),w.setEndPoint("EndToEnd",h));q=new sq(w,Sb(c));q.va=c;q.Ca=d;q.sa=e;q.za=g;c=q}else c=D?new Aq(qq(c,d,e,g)):B?new rq(qq(c,d,e,g)):rb?new zq(qq(c,d,e,g)):new nq(qq(c,d,e,g));c=b.Ei=c}return c};t.yc=function(){return Gq(this).yc()};t.W=function(){return this.va||(this.va=Gq(this).W())};t.ua=function(){return this.Ca!=k?this.Ca:this.Ca=Gq(this).ua()};t.ha=function(){return this.sa||(this.sa=Gq(this).ha())};t.Ia=function(){return this.za!=k?this.za:this.za=Gq(this).Ia()};
t.Th=p("jf");t.ug=function(b,c){var d=b.Oh();return"text"==d?Gq(this).ug(Gq(b),c):"control"==d?(d=b.Lh(),(c?z.some:z.every)(d,function(b){return this.containsNode(b,c)},this)):m};t.Sf=u(63);t.isCollapsed=function(){return Gq(this).isCollapsed()};t.Lc=u(28);t.Eg=u(24);t.Wd=u(44);t.ed=function(){return new kq(this.W(),this.ua(),this.ha(),this.Ia())};t.select=function(){Gq(this).select(this.jf)};t.Yc=u(3);t.insertNode=function(b,c){var d=Gq(this).insertNode(b,c);this.te();return d};t.gh=u(6);t.tz=function(){return new Hq(this)};
t.collapse=function(b){b=this.Th()?!b:b;this.Ei&&this.Ei.collapse(b);b?(this.sa=this.va,this.za=this.Ca):(this.va=this.sa,this.Ca=this.za);this.jf=m};a.Hq=function(b){this.DB=eq(b);this.jK=b.Th()?b.Ia():b.ua();this.wD=fq(b);this.qM=gq(b)};y(Hq,Zp);Hq.prototype.Yj=u(34);Hq.prototype.z=function(){Hq.n.z.call(this);this.wD=this.DB=k};a.Iq=function(){};y(Iq,jq);a.Jq=function(b){var c=new Iq;c.R=b;return c},a.Kq=function(b){for(var c=Sb(arguments[0]).body.createControlRange(),d=0,e=arguments.length;d<e;d++)c.addElement(arguments[d]);return Jq(c)};t=Iq.prototype;t.R=k;t.Ya=k;t.jp=k;t.te=function(){this.jp=this.Ya=k};t.clone=function(){return Kq.apply(this,this.Lh())};t.Oh=s("control");t.Td=function(){return this.R||document.body.createControlRange()};t.ej=function(){return this.R?this.R.length:0};
t.Ae=function(b){b=this.R.item(b);return Dq(mq(b),i)};t.yc=function(){return xc.apply(k,this.Lh())};t.W=function(){return Lq(this)[0]};t.ua=s(0);t.ha=function(){var b=Lq(this),c=z.Le(b);return z.find(b,function(b){return tc(b,c)})};t.Ia=function(){return this.ha().childNodes.length};t.Lh=function(){if(!this.Ya&&(this.Ya=[],this.R))for(var b=0;b<this.R.length;b++)this.Ya.push(this.R.item(b));return this.Ya};
a.Lq=function(b){b.jp||(b.jp=b.Lh().concat(),b.jp.sort(function(b,d){return b.sourceIndex-d.sourceIndex}));return b.jp};t.Sf=u(62);t.isCollapsed=function(){return!this.R||!this.R.length};t.Lc=u(27);t.Eg=u(23);t.Wd=u(43);t.ed=function(){return new Mq(this)};t.select=function(){this.R&&this.R.select()};t.Yc=u(2);t.bg=u(37);t.tz=function(){return new Nq(this)};t.collapse=function(){this.R=k;this.te()};a.Nq=function(b){this.Ya=b.Lh()};y(Nq,Zp);Nq.prototype.Yj=u(33);
Nq.prototype.z=function(){Nq.n.z.call(this);delete this.Ya};a.Mq=function(b){b&&(this.Ya=Lq(b),this.va=this.Ya.shift(),this.sa=z.Le(this.Ya)||this.va);aq.call(this,this.va,m,j)};y(Mq,iq);t=Mq.prototype;t.va=k;t.sa=k;t.Ya=k;t.dj=u(55);t.bj=u(40);t.W=p("va");t.ha=p("sa");t.Zn=function(){return!this.depth&&!this.Ya.length};t.next=function(){this.Zn()&&f(O.bb);if(!this.depth){var b=this.Ya.shift();this.ad(b,1,1);return b}return Mq.n.next.call(this)};
t.xg=function(b){this.Ya=b.Ya;this.va=b.va;this.sa=b.sa;Mq.n.xg.call(this,b)};t.clone=function(){var b=new Mq(k);b.xg(this);return b};a.Oq=function(){this.Ue=[];this.bm=[];this.Iq=this.um=k};y(Oq,jq);t=Oq.prototype;t.Ea=me("goog.dom.MultiRange");t.te=function(){this.bm=[];this.Iq=this.um=k};t.clone=function(){var b=new Oq;b.Ue=z.clone(this.Ue);return b};t.Oh=s("mutli");t.Td=function(){1<this.Ue.length&&this.Ea.qk("getBrowserRangeObject called on MultiRange with more than 1 range");return this.Ue[0]};t.ej=function(){return this.Ue.length};t.Ae=function(b){this.bm[b]||(this.bm[b]=Dq(Bq(this.Ue[b]),i));return this.bm[b]};
t.yc=function(){if(!this.Iq){for(var b=[],c=0,d=this.ej();c<d;c++)b.push(this.Ae(c).yc());this.Iq=xc.apply(k,b)}return this.Iq};a.Pq=function(b){b.um||(b.um=dq(b),b.um.sort(function(b,d){var e=b.W(),g=b.ua(),h=d.W(),l=d.ua();return e==h&&g==l?0:Eq(e,g,h,l)?1:-1}));return b.um};t.W=function(){return Pq(this)[0].W()};t.ua=function(){return Pq(this)[0].ua()};t.ha=function(){return z.Le(Pq(this)).ha()};t.Ia=function(){return z.Le(Pq(this)).Ia()};t.Sf=u(61);
t.isCollapsed=function(){return 0==this.Ue.length||1==this.Ue.length&&this.Ae(0).isCollapsed()};t.Lc=u(26);t.Eg=u(22);t.Wd=u(42);t.ed=function(){return new Qq(this)};t.select=function(){var b=cq(this.Sa());b.removeAllRanges();for(var c=0,d=this.ej();c<d;c++)b.addRange(this.Ae(c).Td())};t.Yc=u(1);t.tz=function(){return new Rq(this)};t.collapse=function(b){if(!this.isCollapsed()){var c=b?this.Ae(0):this.Ae(this.ej()-1);this.te();c.collapse(b);this.bm=[c];this.um=[c];this.Ue=[c.Td()]}};
a.Rq=function(b){this.vz=z.map(dq(b),function(b){return b.tz()})};y(Rq,Zp);Rq.prototype.Yj=u(32);Rq.prototype.z=function(){Rq.n.z.call(this);z.forEach(this.vz,function(b){b.H()});delete this.vz};a.Qq=function(b){b&&(this.Tf=z.map(Pq(b),function(b){return O.cd(b)}));b=b?this.W():k;aq.call(this,b,m,j)};y(Qq,iq);t=Qq.prototype;t.Tf=k;t.Sk=0;t.dj=u(54);t.bj=u(39);t.W=function(){return this.Tf[0].W()};t.ha=function(){return z.Le(this.Tf).ha()};t.Zn=function(){return this.Tf[this.Sk].Zn()};
t.next=function(){try{var b=this.Tf[this.Sk],c=b.next();this.ad(b.da,b.dc,b.depth);return c}catch(d){return(d!==O.bb||this.Tf.length-1==this.Sk)&&f(d),this.Sk++,this.next()}};t.xg=function(b){this.Tf=z.clone(b.Tf);Qq.n.xg.call(this,b)};t.clone=function(){var b=new Qq(k);b.xg(this);return b};a.Tq=function(b){return(b=cq(b||window))&&Sq(b)},a.Sq=function(b){var c,d=m;if(b.createRange)try{c=b.createRange()}catch(e){return k}else if(b.rangeCount){if(1<b.rangeCount){c=new Oq;for(var d=0,g=b.rangeCount;d<g;d++)c.Ue.push(b.getRangeAt(d));return c}c=b.getRangeAt(0);d=Eq(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset)}else return k;return Uq(c,d)},a.Uq=function(b,c){return b&&b.addElement?Jq(b):Dq(Bq(b),c)},a.hq=function(b){return Dq(mq(b),i)},a.Vq=function(b,c){return Fq(b,c,b,c)},a.Eq=
function(b,c,d,e){if(b==d)return e<c;var g;if(1==b.nodeType&&c)if(g=b.childNodes[c])b=g,c=0;else if(tc(b,d))return j;if(1==d.nodeType&&e)if(g=d.childNodes[e])d=g,e=0;else if(tc(d,b))return m;return 0<(wc(b,d)||c-e)};a.Wq=function(b){return(b=b.exec(nb()))?b[1]:""},a.Xq=function(){if(Lg)return Wq(/Firefox\/([0-9.]+)/);if(A||rb)return xb;if(Qg)return Wq(/Chrome\/([0-9.]+)/);if(Rg)return Wq(/Version\/([0-9.]+)/);if(Ng||Og){var b=/Version\/(\S+).*Mobile\/(\S+)/.exec(nb());if(b)return b[1]+"."+b[2]}else{if(Pg)return(b=Wq(/Android\s+([0-9.]+)/))?b:Wq(/Version\/([0-9.]+)/);if(Mg)return Wq(/Camino\/([0-9.]+)/)}return""}();a.Yq=A&&!Gb(9),a.Zq=B||D||rb||A&&Gb(9),a.$q=D||m,a.ar=A||D||rb,a.br=B||D;D&&Eb("534.16");a.cr=B&&j,a.dr=B||D||rb,a.er=B||rb;A&&Eb("7.0");a.fr=B&&Eb("1.8")||D||rb,a.gr=D||A&&Eb("9");A||rb||B&&Eb("1.9");a.hr=B||D&&!Eb("527"),a.ir=A||rb,a.jr=A||D&&Eb("525"),a.kr=D&&!Eb("531"),a.lr=D&&!Eb("528");B&&Eb("1.9")||A||rb||D&&Eb("531");a.mr=A||B||rb,a.nr=B||D&&!Eb("526"),a.or=A||rb,a.pr=!A&&!rb,a.qr=!D;Qg&&0<=bb(Xq,"4")||Rg&&Eb("533")||B&&Eb("2.0")||A&&Eb("10");a.rr=rb&&Eb("11.10");Qg&&bb(Xq,"12");a.sr=F.Bh("ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","BODY","CAPTION","CENTER","COL","COLGROUP","DETAILS","DIR","DIV","DL","DD","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","ISINDEX","OL","LI","MAP","MENU","NAV","OPTGROUP","OPTION","P","PRE","SECTION","SUMMARY","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"),a.tr=F.Bh("IMG","IFRAME","EMBED");a.ur=F.Bh("text","file","url");a.wr=function(b,c){var d=b?Tb(b):c;T.call(this,d);this.JR=b||this.L().Da().body;this.Ny={};vr.push(this);this.mt=j};y(wr,T);a.xr=0,a.vr=[];wr.prototype.be=k;wr.prototype.jl=m;wr.prototype.Ls=0;a.yr=A?"styleFloat":"cssFloat",a.zr=["position","top","left","width",yr],a.Ar=["position","top","left","display",yr,"marginTop","marginLeft","marginRight","marginBottom"];t=wr.prototype;t.w=function(){wr.n.w.call(this);this.ea(this.m())};t.ea=function(b){wr.n.ea.call(this,b);E.add(b,"goog-scrollfloater")};
t.C=function(){wr.n.C.call(this);this.Lu=yg(document.body).top-2;this.be||(this.be=this.L().w("div",{style:"visibility:hidden"}));this.Ls=eg(this.m()).y;Br(this,this.mt);var b=this.tp=new Sn(this.Dp,150,this);this.h().e(window,"scroll",b.fire,m,b);this.h().e(window,"resize",Yk(150,this.Xw))};t.z=function(){wr.n.z.call(this);z.remove(vr,this);this.tp.H();this.Ex&&(xr-=this.DC);delete this.be};a.Br=function(b,c){(b.mt=c)?b.Dp():Cr(b)};
t.Dp=function(){this.mt&&(Mc(this.L()).y+this.Lu>this.Ls?Dr(this):Cr(this))};a.Dr=function(b){if(!b.jl){var c=b.m(),d=eg(c).x,e=vg(c).width;b.Ny={};F.forEach(zr,function(b){this.Ny[b]=c.style[b]},b);F.forEach(Ar,function(b){this.be.style[b]=c.style[b]||Xf(c,b)||Wf(c,b)},b);ng(b.be,c.offsetWidth,c.offsetHeight);Uf(c,{left:d+"px",width:e+"px",cssFloat:"none"});c.parentNode.replaceChild(b.be,c);b.JR.appendChild(c);c.style.position="fixed";b.No();E.add(c,"goog-scrollfloater-floating");b.jl=j}};
t.No=function(){var b=this.m(),c=this.Lu;!this.Ex&&0<xr&&(c+=xr);b.style.top=c+"px"};a.Cr=function(b){if(b.jl){var c=b.m();F.forEach(b.Ny,function(b,e){c.style[e]=b});b.be.parentNode.replaceChild(c,b.be);E.remove(c,"goog-scrollfloater-floating");b.jl=m}};t.Xw=function(){Cr(this);this.Ls=eg(this.m()).y;this.Dp()};a.Er=function(b,c,d){wr.call(this,b,d);this.dS=c;this.ih="";this.Qy=100};y(Er,wr);
Er.prototype.Dp=function(){var b,c=this.ih;b=c&&z.find(vr,function(b){return c===b.ih&&b.jl});if(this.mt&&(!b||b===this)){b=this.dS.getBoundingClientRect();var d=this.Lu+xr,e=d+this.Qy;b.top<d&&b.bottom>e?Dr(this):Cr(this)}};a.Fr=function(){};ia(Fr);
Fr.prototype.yg=function(b,c,d){function e(){var e=window.ZH.createRichTextEditor(b,c),g=e[0],e=e[1];d&&d(g,e)}var g=yf.P(),h=g.md.rich_text_editor;h.Xd()?(g.Ea.info("rich_text_editor module already loaded"),g=new tf(e,i),window.setTimeout(v(g.execute,g),0)):Bf(g,"rich_text_editor")?(g.Ea.info("rich_text_editor module already loading"),h.Zs(e,i)):(g.Ea.info("Registering callback for module: rich_text_editor"),h.Zs(e,i),g.Ea.info("Initiating module load: rich_text_editor"),Ef(g,["rich_text_editor"]))};a.Gr=function(b,c){this.K=$(b);this.G=$.extend({},this.defaults,c||{});this.qg()};Gr.prototype.defaults={xS:[],nz:[],$K:j};a.Hr="data-tip class style id bgcolor color size width height".split(" ");
Gr.prototype.qg=function(){var b=this;if(this.G.$K)this.K.on("paste",function(){setTimeout(function(){var c=b.G,d=c.xS,e=c.nz,g={id:function(b,c){b.id&&!z.contains(d,b.id)&&b.removeAttribute(c)},"class":function(b,c){if(b.className)if(e.length){var d=E.get(b),d=z.filter(d,rf(xa(z.contains,e)));d.length&&E.remove.apply(k,[b].concat(d))}else b.removeAttribute(c)}};$("*",b.K).each(function(){var b=this;$.each(Hr,function(c,d){var e=g&&F.get(g,d);e?e(b,d):b.removeAttribute(d)})})})})};a.Ir=function(b){this.G=$.extend(j,{},this.defaults,b||{});this.Tu();this.hf()};y(Ir,Hd);t=Ir.prototype;t.defaults={Fm:{Ed:6,content:"",method:"GET",source:"/people/autocomplete"},PR:"mention-popup",Oj:document.body,pB:"activated"};t.Tu=function(){var b=this.g=gc(this.lU);this.Io=b.getElementsByTagName("input")[0];b.className=this.G.PR;b.style.display="none";this.G.Oj.appendChild(b)};t.yc=function(){return this.G.Oj};t.lU='<div><div class="writing-bg"><input></div><div class="tip">想用 @ 提到谁？</div></div>';
t.template=Sk('<% if (data.id) { %><img class="avatar" src="<%=avatar%>"><div class="body"><span class="name"><%=label%></span><span class="bio"><%=headline%></span></div><% } %>');t.pb=function(){return sg(this.g)};t.open=function(){this.pb()||(Q(this.g,j),this.Io.focus(),this.qg(),this.dispatchEvent("open"))};t.close=function(){this.pb()&&(Q(this.g,m),E.remove(this.g,this.G.pB),this.Io.value="",this.Io.blur(),this.sv(),this.dispatchEvent("close"))};
a.Jr=function(b,c){b.close();b.dispatchEvent({type:"cancel",data:{originalEvent:c}})};t.hG=function(b){this.pb()&&!tc(this.g,b.target)&&Jr(this,b)};t.Bo=function(b){var c=b.keyCode,d=this.Io;if(27===c||d===b.target&&""===d.value&&(8===c||32===c))Jr(this,b),b.preventDefault(),b.stopPropagation()};t.qg=function(){N(document,"click",this.hG,m,this);N(this.g,"keydown",this.Bo,m,this)};t.sv=function(){yd(document,"click",this.hG,m,this);yd(this.g,"keydown",this.Bo,m,this)};
t.hf=function(){var b=this,c=this.G.Fm,d=new Np(this.Io,{Vj:this.g,Ed:c.Ed,source:c.source,select:function(c){setTimeout(function(){b.close();b.dispatchEvent({type:"select",data:{OR:c}})});return""},Zc:function(c,d,h){h.innerHTML=b.template(c.data)}});d.Gz(c.method);d.Ja(c.content);d.addEventListener("suggestionsupdate",function(){E.enable(this.g,this.G.pB,d.pb())},m,this);this.$=d};t.position=function(b){ag(this.g,b)};t.Me=u(48);a.Kr=function(b,c){this.input=b;F.extend(this.G={},this.defaults,c||{});this.ei=new Ir({Fm:this.G.Fm,Oj:this.G.Oj});this.qg()};y(Kr,Hd);a.Lr=!!window.getSelection;Kr.prototype.defaults={Fm:{},Oj:document.body,yj:"member_mention",Kr:"mention-holder",position:function(b,c){b.x+=c.width+7;b.y-=5;A&&7<xb&&(b.y+=c.height/2-9)}};a.Mr=F.La({aW:"member_mention"});Kr.prototype.m=p("input");
a.Nr=function(b){var b=J(b.G.Kr,b.input),c;if(b)return c=document.createTextNode("@"),nc(c,b),c},a.Or=function(b,c){var d;B&&(d=ac(document),b.input.focus(),window.scrollTo(d.x,d.y));var e;Lr?(d=window.getSelection(),e=document.createRange(),e.setStartAfter(c),d.removeAllRanges(),d.addRange(e)):3===c.nodeType&&Vq(c,c.length).select()};
Kr.prototype.qg=function(){var b=this.ei;N(b,"cancel",function(b){var d=Nr(this),b=b.data.originalEvent;d&&"click"!==b.type&&("keydown"===b.type&&32===b.keyCode&&(d=d.parentNode.insertBefore(document.createTextNode(" "),d.nextSibling)),Or(this,d))},m,this);N(b,"select",function(b){var d=b.data.OR,b=J(this.G.Kr,this.input),d=this.Lq(d),e=b.previousSibling,g=document.createTextNode(" ");nc(d,b);lc(g,d);e&&(3===e.nodeType&&!Fa(Gc(e)," "))&&kc(document.createTextNode(" "),d);Or(this,g)},m,this);N(this.input,
"click",function(){b.pb()&&Nr(this)},m,this);N(this.input,"keydown",function(b){var d;if(8===b.keyCode&&(d=Tq())){var b=d.W(),e=d.ha(),g=d.ua();d=d.Ia();var h=m;Pr(b.parentNode)&&(g=0,h=j);Pr(e.parentNode)&&(d=e.length,h=j);h&&Fq(b,g,e,d).select()}},m,this);N(this.input,kb||Ng||Og?"keypress":"keyup",function(b){function d(b,c){if(3!==b.nodeType||"@"===b.nodeValue&&b.previousSibling&&"A"===b.previousSibling.nodeName||b.parentNode&&"A"===b.parentNode.nodeName)return m;var d=b.nodeValue,e=c-1;if("@"!==
d.slice(e,e+1))return m;var g=d;0<=e&&e<d.length&&(g=d.substr(0,e)+d.substr(e+1,d.length-e-1));b.nodeValue=g;return j}if(!("keypress"===b.type&&"@"!==String.fromCharCode(b.charCode))){var e,g,h,l;if("keyup"===b.type){if(50!==b.keyCode)return;if(Lr){e=window.getSelection();h=e.anchorNode;l=e.anchorOffset;if(!d(h,l))return;D&&!h.nextSibling&&(h.nodeValue+=" ");g=document.createRange();e.removeAllRanges();g.setStart(h,l-1);g.setEnd(h,l-1);e.addRange(g)}else{g=Uq(document.selection.createRange());h=eq(g);
l=g.ua();if(!d(h,l))return;Vq(h,l-1).select()}}this.Ft(b)}},m,this)};
Kr.prototype.Ft=function(b){var c=this,d=this.ei;if(!d.pb()){var e=function(d){return!(d&&"A"===d.nodeName)&&d.className!==c.G.yj?(b&&b.preventDefault(),j):m};if(Lr){var g=window.getSelection();if(e(g.anchorNode.parentNode)){var e=g.getRangeAt(0),h=Qr(c);e.insertNode(h);e.selectNode(h);g.removeAllRanges();g.addRange(e);e=Rr(c,window.getSelection().getRangeAt(0));d.position(e);d.open()}}else g=document.selection.createRange(),h=g.parentElement(),e(h)&&(g.pasteHTML(Qr(c).outerHTML),g.moveToElementText(J(c.G.Kr,
c.input)),g.select(),e=Rr(c,g),"7.0"===xb&&(e.x-=2),d.position(e),d.open())}};a.Rr=function(b,c){var d;d=c.getBoundingClientRect();var e;A&&(e={width:c.boundingWidth,height:c.boundingHeight},ya(e,d),d=e);e=ac(document);var g=eg(b.ei.yc());g.x=d.left-g.x+e.x;g.y=d.top-g.y+e.y;b.G.position.call(b,g,d);return g},a.Pr=function(b){return b&&1===b.nodeType&&"A"===b.tagName&&z.contains(Mr,b.className)};
Kr.prototype.Lq=function(b,c){return K("a",{"data-hash":b.id,href:"/people/"+b.url_token,className:c||this.G.yj,innerHTML:"@"+b.label})};a.Qr=function(b){return K("a",{className:b.G.Kr,innerHTML:"@"})};a.Sr=function(b,c,d,e){T.call(this);this.status=this.yb=k;this.$E=b;this.JP=e||0;this.qH=c;this.Pq=d;this.isEnabled=j;this.zD=m;this.params=[];this.content=k;this.vY=this.JP?j:m;this.Vt=m;this.MC=$.Deferred()};y(Sr,T);t=Sr.prototype;t.z=function(){this.Na=k;Sr.n.z.call(this)};
t.ea=function(b){Sr.n.ea.call(this,b);var c=b.getAttribute("data-resourceid");c&&(this.yS=b.getAttribute("data-action"),this.gt=c);this.status||(this.status="normal");b=this.L();if(!this.fd&&(this.fd=b.aj("zm-editable-content",this.g))&&"1"===this.fd.getAttribute("data-disabled"))this.disabled=j;this.Tb?this.yb&&(this.Tb.innerHTML=this.yb):(this.Tb=b.aj("zm-editable-tip",this.g),this.yb&&!this.Tb&&(this.Tb=b.w("div","zm-editable-tip"),this.Tb.innerHTML=this.yb,b.Un(this.Tb,this.fd)));this.Lb=b.aj("zm-editable-editor-wrap",
this.g);this.content=La(this.content||this.Vt?Gc(this.fd):this.fd.innerHTML);this.re();Tr(this)};t.w=function(){var b=this.L(),b=b.w("div","zm-editable-item-wrap",[this.Tb=b.w("div","zm-editable-tip"),this.fd=b.w("div","zm-editable-content",this.content)]);this.ea(b)};t.C=function(){Sr.n.C.call(this);this.h().e(this.fd,"click",this.ka);this.Tb&&this.h().e(this.Tb,"click",this.ka)};t.Ja=function(b){this.content=b;Tr(this)};
t.ka=function(b){var c=Lk(this.g,b.target),d=this.L();if(!c||!c.name)return b=d.BM(b.target,"div","zm-editable-tip-label"),this.isEnabled&&b&&this.rd(),j;b=c.name;switch(b){case "expand":Tr(this);break;case "collapse":Tr(this);break;case "edit":S.zi?this.dispatchEvent("beforeedit")!==m&&(this.B(),this.rd()):$k.P().F(j);this.dispatchEvent("click_edit");break;case "save":this.hE();break;case "cancel":this.dispatchEvent("cancel_edit");this.fh();break;default:return this.xl(b)}return j};
t.hE=function(){var b=Ck(this.Of()),c=/<embed/i.test(b);if(/<img/i.test(b)||c||this.$E||(!b?0:(!b?"":b.replace(/<[^>]+>/g,"")).length))b===this.content&&!this.zD?(this.dispatchEvent("save_unchanged"),this.fh()):(this.dispatchEvent("save_changed"),this.of(b))};t.of=function(b){if(!this.ia||!this.ia.ac())if(this.Pq&&this.qH){this.ia=new V(j);P(this.h(),this.ia,"success",this.yB);var c=new lj(this.params.join("&"));c.add(this.Pq,b).add("field_name",this.Pq);this.ia.ajax(this.qH,c.toString())}else this.dispatchEvent("change")};
t.fh=function(){this.status="normal";this.re()};t.yB=function(){var b=Ie(this.ia);b&&(b.r?U(b.msg):(this.Ja(b.msg),this.fh(),this.dispatchEvent("change")))};t.eb=p("content");t.pr=u(0);t.isContentEditable=function(){return!this.zd};t.Of=function(){return Dk(Oa(this.Na.value))};t.xl=function(b){this.dispatchEvent(b);return j};t.B=function(){this.Dr||(this.Dr=j,this.yg())};
t.Vr=function(){var b=this.Na;if(b.m){var c=v(function(){this.KY=new Kr(b.m(),{Oj:this.Wi})},this);b.Xd()?c():b.addEventListener("load",c)}};
t.yg=function(){var b=this.L();this.Lb?(this.vd=b.aj("zm-command",this.Lb),this.Na=b.aj("zm-editable-editor-input",this.Lb)):(this.Lb=b.w("div","zm-editable-editor-wrap clearfix",this.Wi=b.w("div","zm-editable-editor-outer",b.w("div","zm-editable-editor-inner zg-form-text-input",this.Na=b.w("textarea","zm-editable-editor-input")))),b.xx(this.Lb,this.fd),this.Ki());this.Na&&(this.Na.tagName&&"TEXTAREA"===this.Na.tagName&&!this.Uq)&&new Ko(this.Na,66);this.Ao()};t.ready=function(b){this.MC.done(b)};
t.Ao=function(){this.h().e(this.vd,"click",this.ka);this.Ut&&this.Vr();var b=this.Na;if(b.m)b.on("load",function(){new Gr(b.m(),{nz:this.Ut?Mr:[]})},m,this);this.MC.resolveWith(this)};t.Ki=function(){this.vd=K("div","zm-command",[this.zX=K("a",{"class":"zm-command-cancel",name:"cancel",href:"javascript:;"},"取消"),this.dn=K("a",{"class":"zg-r3px zg-btn-blue",name:"save",href:"javascript:;"},"保存")]);this.Lb.appendChild(this.vd)};
t.re=function(){this.Oq&&E.remove(this.g,this.Oq);"editing"===this.status?(this.Tb&&Q(this.Tb,m),this.Lb&&Q(this.Lb,j),Q(this.fd,m),this.Oq="zm-editable-status-editing"):(this.Tb&&(this.$E&&!this.content&&!this.disabled?Q(this.Tb,j):Q(this.Tb,m)),this.Lb&&Q(this.Lb,m),this.content?Q(this.fd,j):Q(this.fd,m),this.Oq="zm-editable-status-normal");E.add(this.g,this.Oq)};t.rd=function(){this.ir||(this.B(),this.ready(function(){this.status="editing";this.re();this.Yo()}))};
t.Yo=function(){if(this.gt)this.ir=j,Ur(this);else{var b=this.Na,c;c=Za(this.content.replace(/<br \/>/g,"\n").replace(/<br>/g,"\n")).replace(/<a.*?href="(.*?)".*?<\/a>/g,"$1");b.value=c}};
a.Tr=function(b){if(b.dispatchEvent("shouldUpdateContent")){var c=b.content,d=b.fd,e;e=[];b.disabled||e.push('<a href="javascript:;" class="zu-edit-button" name="edit"><i class="zu-edit-button-icon"></i>修改</a>');e=e.join("");b.Vt?(yc(d,c),d.appendChild(gc(e))):d.innerHTML=c+e;$("img.lazy",d).lazyload({data_attribute:"actualsrc",threshold:400})}},a.Ur=function(b){b.ir||(b.ir=j,Hi(b.yS+"?id="+b.gt,v(function(b){this.ir=m;b=Ie(b.target);b.r?U(b.msg):this.Dz(b.msg)},b),"GET"))};
t.Dz=function(b){this.Na.value=b};a.Vr=function(b,c,d,e){Sr.call(this,b,c,d,e);this.PP="mock"+this.Ud();this.Hv=m;this.yq=j;this.zd=!Sg||Pg;this.Ut=m;this.tI=this.xU=j;this.ay=""};y(Vr,Sr);t=Vr.prototype;t.Dz=function(b){this.zd?Vr.n.Dz.call(this,b):(b||(b=B?"":"<div></div>"),this.Na.Hd(m,b,j))};t.Yo=function(){this.ready(function(){this.gt?Ur(this):this.zd?Vr.n.Yo.call(this):this.content?this.Na.Hd(m,this.content,m,j):this.Na.Hd(m,D?"<div><br></div>":"<div></div>",m,j)})};
t.z=function(){Uc(this.Na);L(this.Lb);this.Lp=this.YA=this.Xh=this.bl=this.tA=this.Wi=this.Lb=k;Vr.n.z.call(this)};
t.yg=function(){if(this.zd)Vr.n.yg.call(this);else{var b=this.L();this.Lb=b.w("div","zm-editable-editor-wrap",this.Wi=b.w("div","zm-editable-editor-outer",[this.tA=b.w("div","zm-editable-toolbar-container"),this.bl=b.w("div","zm-editable-editor-field-wrap",this.Xh=b.w("div",{id:this.PP,className:"zm-editable-editor-field-element"}))]));this.YA=$(this.tA);this.Lp=$(this.Lb);this.Lp.hide();b.xx(this.Lb,this.fd);this.gt||(this.Xh.innerHTML=this.content);b={loremIpsum_:this.ay,enableFullScreen:this.Hv,
content:this.content,useScraper_:this.xU,canUploadMedia_:this.yq,useRemoveFormat_:this.tI};this.Ki();Fr.P().yg(this.Lb,b,v(this.Ao,this));sb||(this.hg=new Er(k,this.Wi),this.hg.o(this.tA),Br(this.hg,m),Cr(this.hg),Sc(this,this.hg))}};
t.Ao=function(b,c){if(this.zd)Vr.n.Ao.call(this);else{this.Na=b;this.Lp.show();Vr.n.Ao.call(this);var d=b.cj("FullScreenPlugin");if(d){var e=Oh(c,"toggleFullScreen");d.on("save",this.hE,m,this).on("willEnterFullScreen",function(){Wr(this,m)},m,this).on("enterFullScreen",function(){e.Pc("退出写作模式")}).on("exitFullScreen",function(){e.Pc("写作模式")}).on("shouldExitFullScreenOnEscape",function(){return!b.Jg})}if(d=b.cj("CodePlugin"))d.YS(c),d.qg()}};
a.Wr=function(b,c){if(b.hg)if(c){E.add(b.bl,"zm-editable-editor-field-wrap-active");var d=b.hg;d.Ls=eg(d.m()).y;Br(b.hg,j)}else E.remove(b.bl,"zm-editable-editor-field-wrap-active"),Br(b.hg,m)};t.rd=function(){Vr.n.rd.call(this);this.ready(function(){!this.zd&&!this.aM&&(this.aM=j,xd(this.Na,"load",function(){var b=this.Na,c=b.cj("FullScreenPlugin");B&&(b=b.field);N(b,["focus","blur"],function(b){(!c||!c.Dx())&&Wr(this,"focus"===b.type)},m,this)},m,this),this.Na.$d())})};
t.Of=function(){if(this.zd)return Vr.n.Of.call(this);var b=this.Na,c=b.m();return(z.some(["img","embed"],function(b){return c.getElementsByTagName(b).length})?0:!pf(Dk,La,Gc)(c))?"":b.ll()};t.re=function(){Vr.n.re.call(this);this.hg&&Br(this.hg,"editing"===this.status)};a.Xr=function(b){b.YA.toggle();b.Lp.toggleClass("no-toolbar")};a.Yr=function(){Yh.call(this,i,i,i);this.UC=j;this.BY=m;this.xY=j;this.NY=!!S[5];this.qy=S.qy;this.dT=-1===window.location.href.indexOf("psq");this.LH=this.Bc=k};y(Yr,Ai);ia(Yr);a.Zr=aj.create("AddQuestionForm"+S.Fd);t=Yr.prototype;
t.C=function(){Yr.n.C.call(this);var b=gc(La('<div class="zh-add-question-form"><div class="js-add-question-splash add-question-splash-page" ><p>知乎是一个真诚、友善、认真、互助的社区<br>我们希望每一个疑惑都有解答，好的问题更容易得到好答案 <a href="//www.zhihu.com/question/19555761">如何提一个好问题？</a></p><p><b>提问应遵循真实、客观、简洁、明确、规范的原则</b><br>1、提问应尽可能简洁明了，避免「请问」「有谁知道」「谢谢！」等与问题本身无关的附加语。<br>2、应避免使用「为神马」「童鞋」「肿么办」等网络用语。<br>3、基于个人判断或传言的问题，在提问时应在补充说明里详细说明原由<br>4、避免太宽泛问题，如调查性的问题容易变成每个人都可以发表观点，但对其他人没有价值。<br></p><p><b>知乎禁止这些提问</b><br>1、和已有问题完全重复的问题，<b>为避免重复，提问前可以先进行搜索</b><br>2、招聘 / 求职、交易 / 合作、寻人 / 征友、召集 / 赠送、求码类内容<br>3、投票类问题。例如：你支持方舟子还是韩寒？<br>4、作业或其他希望代为完成个人任务类的内容，以及针对个人具体病情的求医问药类问题<br>完整的提问建议可查看 <a href="//www.zhihu.com/question/19806261">知乎的提问规范有哪些？</a><br></p><div class="before-ask-form"><b>提问前请先搜索</b><div style="position:relative;margin-top:18px;"><input type="text" class="zg-form-text-input" id="js-before-ask" placeholder="请输入你的问题"></div></div></div><form class="js-add-question-form"><div class="zg-section-big clearfix"><div id="zm-modal-dialog-info-wrapper"></div><div style="display: none;position: relative;" id="zm-modal-dialog-warnmsg-wrapper"><div class="zm-modal-dialog-warnmsg zm-modal-dialog-guide-warn-message zg-r5px"></div><a name="close" title="关闭" href="javascript:;" class="zu-global-notify-close"  style="display:none">x</a><span class="zm-modal-dialog-guide-title-msg"></span></div><div class="zg-form-text-input add-question-title-form" style="position: relative;"><textarea class="zg-editor-input" title="在这里输入问题" id="zh-question-suggest-title-content"></textarea></div><span id="js-title-length-err-msg" class="title-length-err-msg zg-right"></span><div id="zh-question-suggest-ac-wrap" class="question-suggest-ac-wrap"></div></div><div class="zg-section-big"><div style="display: none;position: relative;" class="zm-modal-dialog-warnmsg-wrapper"><div class="zm-modal-dialog-warnmsg zm-modal-dialog-guide-warn-message zg-r5px"></div><a name="close" title="关闭" href="javascript:;" class="zu-global-notify-close" style="display:none">x</a><span class="zm-modal-dialog-guide-title-msg"></span></div><div class="add-question-section-title"><span class="zg-right extra-editor-toolbar hidden-phone"><div class="js-toggle-editor-toolbar"><i class="z-ico-textedit"></i></div><div class="js-editor-add-pic"><i class="tr-inline-icon tr-image"></i></div><div class="js-editor-add-video"><i class="tr-inline-icon tr-video"></i></div></span>问题说明（可选）：<span id="zh-question-form-detail-err"></span></div><div id="zh-question-suggest-detail-container"><div class="zm-editable-content" data-disabled="1"></div></div></div><div class="zm-add-question-form-topic-wrap"><div class="add-question-section-title"><span class="zg-gray zg-right hidden-phone">话题越精准，越容易让领域专业人士看到你的问题</span>选择话题：<span id="zh-question-form-tag-err"></span></div><div id="zh-question-suggest-topic-container" class="zm-tag-editor zg-section"><div class="zm-tag-editor-labels"></div><div id="zh-question-suggest-autocomplete-container"></div></div></div><div class="zm-command"><label class="zm-question-form-hide-in-about-question-el zg-left"><input type="checkbox" value="1" class="zg-addq-isanon">匿名<span class="zm-question-form-split">&nbsp;</span></label><div class="zg-left zm-add-question-form-sns-wrap"><span>分享到</span></div><a href="javascript:;" name="cancel" class="zm-command-cancel">取消</a><a href="javascript:;" name="addq" class="zg-r5px zu-question-form-add zg-btn-blue">发布</a><a name="jumpq" class="zg-r5px zg-btn-blue zu-question-form-jump" style="display:none;">查看问题</a></div></form></div>'));this.Z().appendChild(b);
this.Xc=Wb("zg-editor-input",this.g)[0];this.uq=J("zu-question-form-add",this.g);this.Um=J("zu-question-form-jump",this.g);this.so=H("zm-modal-dialog-warnmsg-wrapper");this.ms=H("js-title-length-err-msg");this.ez=J("zm-modal-dialog-warnmsg-wrapper",this.g);this.TC=H("zh-question-form-detail-err");this.jA=H("zh-question-form-tag-err");this.eL=J("zu-global-notify-close",this.so);this.gU=J("zu-global-notify-close",this.ez);this.AO=H("zm-modal-dialog-info-wrapper");this.zs=J("zm-modal-dialog-warnmsg",
this.so);this.fZ=J("zm-modal-dialog-warnmsg",this.ez);this.Zm=J("zg-addq-isanon",this.g);this.ZT=J("js-toggle-editor-toolbar",this.g);this.FJ=J("js-editor-add-pic",this.g);this.GJ=J("js-editor-add-video",this.g);this.wT=J("js-add-question-splash",this.g);this.EP=J("js-add-question-form",this.g);this.TB=H("js-before-ask");this.SL=H("zh-question-suggest-detail-container");this.fU=H("zh-question-suggest-topic-container");this.qx();this.qy?($r(this,j),this.ox()):(this.Pn(),$r(this,m))};
a.as=function(b,c){c&&(b.sY=c,b.Xc&&(b.Xc.value=c,b.wG(),b.VG.Tt(),b.Oa&&b.Oa.DA()))};t.show=function(b){this.G=$.extend({xA:k,Is:k},b||{});this.F(j)};t.Pl=function(){Yr.n.Pl.call(this);this.G={}};t.qx=function(){this.ab("提问");this.ah(550);ji(this,k);this.K=$(this.g);this.K.addClass("absolute-position");this.F(j);this.ma()};
t.Yx=function(){var b=this,c=Zr.get("add_question_form_title");c&&as(this,c);var d=Zr.get("add_question_form_des");if(d){var e=this.Cb;setTimeout(function(){e.Ja(d);e.Yo()})}c=this.G.xA;c||(c=Zr.get("add_question_form_topics"))&&(c=JSON.parse(c));c&&z.forEach(c,function(c){b.Oa.bk(c)})};
t.Pn=zk(function(){function b(){var b=$('<div><div style="text-align:center"><i class="spinner-gray"></i></div></div>'),c=this.rn,c=$(c&&sg(c)?c:this.Fh),d=c.data("answer_count"),e=c.data("url_token");$.get("/question/"+e+"/answers/summary").done(function(c){if(c&&!c.r){var c=l({forEach:z.forEach,answers:c.msg,question_url_token:e}),g=Ga('<div class="zippy-row"><a class="zg-link-litblue" href="/question/%s">查看该问题%s</a></div>',e,0<d?"的全部 "+d+" 个回答":"");b.html(c+g)}else U(c.msg)});c.after(b);return b.get(0)}
var c=this;this.Oa=new Xp;this.Oa.o(this.fU);this.h().e(this.Oa,["add_tag","remove_tag"],this.uG);new Ul(this.Xc,"写下你的问题");var d=this.SL;this.Cb=new Vr;this.Cb.ay='<span style="font-style: normal;color: #999;">问题背景、条件等详细信息</span>';this.Cb.o(d);this.Cb.B();this.Cb.rd();(!sb||Og)&&Xr(this.Cb);setTimeout(function(){c.ma()});this.h().e(this.Zm,"click",this.kK);Fp.P().refresh();var d=J("zm-add-question-form-sns-wrap",this.g),e=new zp;e.Y(d);E.add(e.m(),"icon sina");e.m().title="分享到新浪微博";e.m().setAttribute("data-tip",
"s$b$分享到新浪微博");e.GK="/oauth/auth/sina?next=/oauth/callback";this.h().e(e,"change",this.aR);this.Bc=e;if(!sb||Og)d=Bp.P(),e=new rp("",d),np(e,32,m),this.h().e(e,"action",this.tQ),e.o(this.ZT),e.Pc("切换工具栏"),e=new rp("",d),np(e,32,m),this.h().e(e,"action",function(){this.Cb.Na.execCommand("image")}),e.o(this.FJ),e.Pc("添加图片"),d=new rp("",d),np(d,32,m),this.h().e(d,"action",function(){this.Cb.Na.execCommand("video")}),d.o(this.GJ),d.Pc("添加视频");var g=this,h=Sk(g.lk.TG),l=Sk(g.lk.pK),d=g.Xc,e=new Rp;g.lB=
new Np(d,{source:"/question/autocomplete",Vj:H("zh-question-suggest-ac-wrap"),Zc:$.noop,Y:function(c,d,e){g.nB&&g.nB.H();var d=$(c.m()),l=g.nB=new Mp;d.html(h({forEach:z.forEach,questions:e,token:encodeURIComponent(this.Ub)}));d.prepend('<div class="ac-head zg-gray">你的问题可能已经有答案</div>');$(".ac-row",d).each(function(){l.Ga(new Dp($(this).get(0),b,m))});l.o(c.m())},wx:e});this.Ra();this.Yx()});t.lk={};t.lk.TG='<% forEach(questions, function(q, i) { q = q.data; %><div class="ac-row" data-url_token="<%=q.url_token%>" data-answer_count="<%=q.answer_count%>"><% if (q.is_star) { %><a class="zg-star" data-tip="s$b$优质问答" href="/question/<%=q.url_token%>"></a><% } %><a class="zippy-indicator"><i></i></a><a style="color:#222" href="/question/<%=q.url_token%>?q=<%= token %>"><%- q.title%></a><span class="zm-ac-gray"> <%= parseInt(q.answer_count) > 0 ? q.answer_count + " 个回答" : "还没有回答" %> </span></div><% }) %>';
t.lk.pK='<% forEach(answers, function(a, i) { %><div class="zippy-row"><div class="summary-item"><a class="inline-block zm-item-vote-count" href="/question/<%=question_url_token%>/answer/<%=a.url_token%>"><%=a.vote_count%></a><% if (a.author.url_token) { %><a class="inline-block" href="/people/<%=a.author.url_token%>"><span class="author"><%-a.author.name%></span> </a><% } else { %><span class="inline-block anon-author"><%-a.author.name%></span> <% } %><span class="inline-block summary ellipsis"><%=a.summary_text%></span><a class="inline-block" href="/question/<%=question_url_token%>/answer/<%=a.url_token%>">阅读全部 »</a></div></div><% }) %>';
t.ox=function(){function b(){$r(c,m);c.Xc.value=e.value}var c=this,d=Sk(this.lk.TG),e=this.TB,g=new Rp;this.CJ=new Np(e,{source:"/question/autocomplete",Vj:e.offsetParent,Zc:ba(),Y:function(c,g,n){c=$(c.m());c.html(d({forEach:z.forEach,questions:n,token:encodeURIComponent(this.Ub)}));0<n.length&&c.prepend('<div class="ac-row ac-first"><b>你想问的是不是：</b></div>').append($('<div class="ac-row ac-last iwanttoask"><b>不是，我要提一个新问题 »</b></div>'));0===n.length&&e.value&&(c.html('<div class="ac-row ac-last iwanttoask"><b>没有找到相关问题，马上提问 »</b></div>').show(),
n.push("fake row"));c.off("click").on("click",".iwanttoask",b)},wx:g});this.CJ.Km=m};a.$r=function(b,c){$(b.wT).toggle(!!c);$(b.EP).toggle(!c);c?b.TB.focus():(b.Pn(),b.Xc.focus());b.ma()};t.aR=function(b){b=b.target;b===this.Bc&&!this.LH&&(window.open(b.GK),b.$c(m))};t.kK=function(){var b=J("zm-add-question-form-sns-wrap"),c=J("zm-question-form-split"),d=this.Zm.checked;Q(b,!d);Q(c,!d)};a.bs=function(b,c,d){"title"===d?b.jP=c:"detail"===d?b.YO=c:b.lP=c;b.UC=b.jP||b.YO||b.lP};
t.Ra=function(){this.h().e(this.g,"click",this.Iw);this.tP&&this.tP.o(this.Xc);this.VG=new Ko(this.Xc,22);this.h().e(this.VG,"change",this.wG);this.h().e(this.eL,"click",function(){Q(this.so,m);Q(this.AO,j)});this.h().e(this.gU,"click",function(){Q(this.ez,m)});this.h().e(Y,"sina_callback",this.Hs);this.h().e(this,"afterhide",function(){this.kt()});this.Kv()};t.Kv=function(){$(window).on("beforeunload.AddQuestionForm",v(function(){this.kt()},this))};t.Bv=function(){$(window).off("beforeunload.AddQuestionForm")};
t.Hs=function(b){var c={id:b.pc.id,name:b.pc.name};"sina_callback"===b.type&&(this.LH=c,this.Bc.$c(m))};t.kt=function(){this.Xc.value&&Zr.ce("add_question_form_title",this.Xc.value);var b=this.Cb.Of();b&&Zr.ce("add_question_form_des",b);(b=this.Oa.data)&&Zr.ce("add_question_form_topics",JSON.stringify(b))};t.bv=function(){Zr.clear()};t.Iw=function(b){if(b=Lk(this.g,b.target))switch(b=b.name,b){case "expand":E.add(this.g,"zg-qform-expanded");break;default:this.xl(b)}};
t.Zl=function(){if(!this.az){this.az=j;setTimeout(v(function(){this.az=m},this),3E4);this.xhr=new V(j);P(this.h(),this.xhr,"success",this.Is);this.xhr.ajax("/question/add",cs(this).Kc());var b=this.Oa;if(b.pp){var c=0,d=b.data.length;z.forEach(b.data,function(b){z.forEach(this.pp,function(d){b[1]===d[1]&&c++},this)},b);Y.V({type:"ga_click_add_question",data:{Ft:c,total:d}})}}};
t.Is=function(){this.az=m;var b=Ie(this.xhr);if(b)if(b.r)if(281===b.errcode){var c=new ds;c.xe=b.msg;c.mc=3;es(this,c,j)}else U(b.msg);else bj.ce("__Q_ISNEWLYCREATED__","yep"),this.bv(),this.Bv(),b=b.msg,c=b.match(/\/question\/(\d+)/)[1],this.G.Is?this.G.Is({url:b,zb:c}):location.href=b;else U("网络异常")};
t.xl=function(b){if("cancel"===b)this.F(m);else if("addq"===b){var b=fs(this),c=gs(this);if(!(1<c.mc)&&!(1<b.mc)){var d=hs(this),e=new ds;3E3<Nk(d)?(e.mc=3,e.xe="请控制在 3000 字以下"):e.mc=0;d=1<e.mc;this.TC.innerHTML=e.xe;Q(this.TC,d);bs(this,d,"detail");this.uG()}bs(this,1<c.mc||1<b.mc,"title");this.UC?es(this,1<b.mc?b:c,j):this.Zl()}};a.es=function(b,c,d){b.zs.innerHTML=c.xe;0===c.mc?Q(b.so,m):(3!==c.mc&&(Q(b.uq,j),Q(b.Um,m)),Q(b.so,d),d&&b.Xc.focus())};
t.wG=function(){var b=fs(this),c=gs(this);"toolong"===b.name||"buffer"===b.name?(this.ms.innerHTML=b.xe,Q(this.ms,j)):(this.ms.innerHTML=b.xe,Q(this.ms,m));"multiquestionmark"===c.name||"duplicatedquestion"===c.name?es(this,c,j):es(this,c,m);bs(this,1<c.mc,"title")};
a.gs=function(b){var c=Ck(b.Xc.value).replace(/？/g,"?"),d;var e="#";d=b.fo||new ds;var g=m;if(b.lB&&b.dT){var h=b.lB.hb;h&&h.length?(z.forEach(h,function(b){4<b.raw.length&&1===+b.raw[4]&&(g=j,e="/question/"+b.url_token+"?q="+encodeURIComponent(this.Xc.value)+"&psq=0")},b),g?(d.xe='我们找到了一个也许是你想问的问题，<a href="'+e+'">查看问题</a>',d.mc=3,d.name="duplicatedquestion",d.live=j,b.Um.href=e,Q(b.uq,m),Q(b.Um,j)):(d=new ds,Q(b.uq,j),Q(b.Um,m)),b.fo=d):(d=new ds,b.fo=d,Q(b.uq,j),Q(b.Um,m));b.fo||(b.fo=d);d=b.fo}1<
d.mc||(1>Ik(Ck(b.Xc.value).replace("？","?"))?(d.xe="您还没有给问题添加问号",d.mc=3,d.name="noquestionmark"):1<Ik(c)&&(d.xe="如果有多个问题，最好拆分一下",d.mc=1,d.name="multiquestionmark"));return d},a.fs=function(b){var b=Ck(b.Xc.value).replace(/？/g,"?"),b=Nk(b),c=new ds;3>b?(c.mc=3,c.xe="问题字数太少了吧",c.name="tooshort"):40<b&&50>=b?(c.mc=1,c.xe='还可以输入 <span class="warning">'+(50-b)+"</span> 字",c.name="buffer"):50<b&&(c.mc=3,c.xe='已超出 <span class="error">'+(b-50)+"</span> 字",c.name="toolong");return c};
t.uG=function(){var b=m;1>this.Oa.data.length?(b=j,this.jA.innerHTML="至少添加一个话题"):5<this.Oa.data.length&&(b=j,this.jA.innerHTML="最多添加五个话题");Q(this.jA,b);bs(this,b,"topic")};
a.hs=function(b){var b=b.Cb,c=La(b.Of());return b.isContentEditable()?c:Oa(c)},a.cs=function(b){var c=new Mk,d=[],e=[];c.add("question_title",b.Xc.value);c.add("question_detail",hs(b));b.Zm&&c.add("anon",b.Zm.checked?"1":"0");z.forEach(b.Oa.data,function(b){b[3]?d.push(b[3]):e.push(b[1])});c.add("topic_ids",d.join(","));c.add("new_topics",e.join("$"));jh&&c.add("uid",jh[3]);b.Zm.checked||c.add("share_sina",Number(b.Bc.Ge()));return c};t.tQ=function(){this.Cb&&Xr(this.Cb)};
a.ds=function(){this.mc=isNaN(i)?0:i;this.xe=""};a.is=function(b){T.call(this);this.options=$.extend({stopPropagation:j,CK:"#000",Hu:0.5,oL:"#666",pC:0.2,top:2,width:6,right:2,xK:j},b);this.py=0;this.ar=m};y(is,T);t=is.prototype;
t.ea=function(b){this.g=b;this.K=$(this.g);this.K.addClass("zh-scroller").css({position:"relative",overflow:"hidden"}).wrapInner('<div class="zh-scroller-content"></div>');this.K.wrapInner('<div class="zh-scroller-inner"></div>');this.K.append("<div class='zh-scroller-bar-container'><div>");this.K.append('<div class="zh-scroller-bar"></div>');this.ie=this.K.children(".zh-scroller-inner");this.uk=this.K.children(".zh-scroller-bar-container");this.ge=this.K.children(".zh-scroller-bar");this.Se=this.ie.children(".zh-scroller-content");
this.mq=this.ge[0];this.JO=this.ie[0];this.content=this.Se[0];this.nq=this.uk[0];this.ie.css({height:"100%",width:"150%",overflow:"auto"});this.ge.css({position:"absolute",right:this.options.right,top:this.options.top,opacity:this.options.Hu,background:this.options.CK,width:this.options.width,"border-radius":3,cursor:"default"});this.uk.css({position:"absolute",right:this.options.right-1,top:0,height:"100%",width:this.options.width,background:this.options.oL,border:"1px solid #444",opacity:0,cursor:"default",
"border-radius":"2px"});this.mi(this.mq,m);this.mi(this.nq,m);this.update()};t.C=function(){is.n.C.call(this);this.pA=new Sn(this.Cy,50,this);this.options.stopPropagation&&this.ie.bind("mousewheel DOMMouseScroll",function(b){var c=k;"mousewheel"===b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"===b.type&&(c=40*b.originalEvent.detail);c&&(b.preventDefault(),$(this).scrollTop(c+$(this).scrollTop()))})};
t.enter=function(){this.Nv||(this.h().e(this.JO,"scroll",function(){this.pA.fire()}),A||(this.h().e(this.nq,"click",this.fQ),this.h().e(document,"mousedown",this.NQ),this.h().e(document,"mouseup",this.PQ),this.h().e(document,"mousemove",this.OQ)),this.options.xK?(this.Cc=new Jd(200),this.h().e(this.Cc,Kd,function(){2===this.py||1===this.py?(js(this),this.fp&&this.uk.css({opacity:this.options.pC})):!this.ar&&!this.Nm&&(ks(this,1E3),this.uk.css({opacity:0}))})):(this.ge.css({opacity:this.options.Hu}),
this.uk.css({opacity:this.options.pC})),this.Cc&&this.Cc.start(),ks(this),this.Nv=j)};t.NQ=function(b){b.target===this.mq&&(this.ar=j,this.DK=b.clientY,this.EK=parseInt(this.ge.css("top"),10));(b.target===this.mq||b.target===this.nq)&&this.mi(document.body,m)};t.PQ=function(){this.ar=m;this.mi(document.body,j)};t.OQ=function(b){if(this.ar){var c=ls(this,this.EK+(b.clientY-this.DK));this.ie.scrollTop(c)}this.py=b.target===this.mq?2:b.target===this.nq?1:0};
a.js=function(b){b.fp&&(b.ge.stop().css({opacity:b.options.Hu}).show(),b.Nm&&(clearTimeout(b.Nm),b.Nm=m))},a.ks=function(b,c){b.Nm=setTimeout(v(function(){this.ge.stop().fadeOut();this.Nm=m},b),c||0)};t.Cy=function(){var b=this.ie.scrollTop(),c=this.Se.height(),d=this.ie.height(),e=b/c*(d-2*this.options.top);js(this);this.ge.css({top:e+this.options.top});this.dispatchEvent(new ms(this,b,c-b-d,b/(c-d)))};
t.update=function(){var b=this.tl(this.ie).height,c=this.tl(this.Se).height;b>=c?(this.fp=m,this.ge.hide()):(this.fp=j,this.ge.show());this.ge.css({height:b/c*(b-2*this.options.top)});this.uk.css({height:b-2});this.Se.css({overflow:"hidden",width:this.K.width(),"min-height":"100%"});return this};
t.tl=function(b){var c={height:b.height(),width:b.width()};if(!c.height){var d=b.css("display"),e=b.css("position"),g=b.css("visibility");b.css({position:"absolute",display:"block",visibility:"hidden"});c={height:b.height(),width:b.width()};b.css({position:e,display:d,visibility:g})}return c};t.fQ=function(b){this.scrollTo(ls(this,b.offsetY-this.ge.height()/2))};a.ls=function(b,c){var d=b.ie.height()-2*b.options.top-b.ge.height(),e=b.Se.height()-b.ie.height();return c/d*e};
t.scrollTop=function(b){this.fp&&(b=b||200,js(this),this.ie.stop().animate({scrollTop:0},b));return this};t.mi=function(b,c){ug(b,!c)};t.scrollTo=function(b){this.fp&&(js(this),this.ie.stop().animate({scrollTop:b},200));return this};a.ms=function(b,c,d,e){hd.call(this,"scroll",b);this.scrollTop=c;this.nZ=d;this.oZ=e};y(ms,hd);a.ns=function(b){T.call(this);this.G=$.extend({},this.defaults,b||{})};y(ns,T);ns.prototype.defaults={TF:".tab-nav",FG:".tab-panel",Ck:"active"};ns.prototype.ea=function(b){if(b){this.g=b;var c=this,d=this.G;this.zk=$(d.TF,b);this.UA=$(d.FG,b);this.oj=this.zk.index("."+d.Ck);this.zk.on("click",function(){c.select(c.zk.index(this))});this.zk.attr("role","tab").parent().attr("role","tablist")}};
ns.prototype.select=function(b){if(!(0>b||b>this.zk.size()))if(this.dispatchEvent({type:"action",data:{index:b}}),b!==this.oj){this.oj=b;var c=this.G;this.zk.eq(b).addClass(c.Ck).attr("aria-selected","true").siblings().removeClass(c.Ck).attr("aria-selected","false");c=this.UA.eq(b);this.UA.not(c.show()).hide();this.dispatchEvent({type:"select",data:{index:b}})}};ns.prototype.index=p("oj");a.os=function(){M.call(this);this.Ff=[0,0,0];this.aG=[0,0,0];this.types=["default","follow","vote_thank"];this.Iv=j;this.Ve=[m,m,m];this.rl=[0,0,0];this.sm=[m,m,m]};y(os,An);t=os.prototype;
t.B=function(){this.Vg=H("zh-top-nav-live-new");this.VA=$(this.Vg);this.vp=H("zh-top-nav-count-wrap");this.en=K("span",{id:"zh-top-nav-count",className:"zu-top-nav-count zg-noti-number",style:"display:none"});this.contents=Wb("zm-noti7-content",this.Vg);this.AP=Wb("zm-noti7-popup-refresh",this.Vg);this.uC=Wb("zm-noti7-content-body",this.Vg);this.vp.appendChild(this.en);this.h().e(this.vp,"click",this.cI).e(this.vp,"keypress",function(b){32===b.keyCode&&(b.preventDefault(),this.cI())});this.h().e(Y,
"noti7",this.JN);this.h().e(this.Vg,"click",this.ka);this.h().e(this.Vg,"click",function(b){b=b.target;b.href&&/group_id=/.test(b.href+"")&&$(b).parent(".unread").removeClass("unread")});var b=J("zm-noti7-popup-tab-container");this.VF=Wb("new-noti",b);this.hh=new ns({TF:".zm-noti7-popup-tab-item",FG:".zm-noti7-content",Ck:"current"});this.h().e(this.hh,"action",function(b){this.HC=b=b.data.index;ps(this,b);var d=this.hm&&this.hm[b];d&&(setTimeout(function(){d.update()}),this.hh.index()===b&&d.scrollTop())}).e(this.hh,
"select",function(b){this.HC=b=b.data.index;qs(this,b);Y.V({type:"ga_click_top_nav_noti_tab",data:{hh:+b}});this.sc||bj.ce("noti7-tab",b)});this.hh.o(this.Vg);!dh.Ac&&navigator.userAgent.match(/iPad/i)==k&&(this.hm=z.map(this.contents,function(b){var d=new is;d.o(b);return d}));dh.Ac&&(this.Iv=m);this.Vl=H("zh-top-nav-pm-count");this.Vl||(this.Vl=K("span"));this.Ol=H("zh-top-nav-new-pm");this.Ol||(this.Ol=K("span"));this.Nn=parseInt($(this.Ol).attr("data-count")||$(this.Vl).attr("data-count"),10)||
0;this.qF=H("zh-top-nav-count-wrap");this.qF.innerHTML&&(this.count=+this.qF.innerHTML);this.h().e(Y,"inbox",this.uN)};t.vr=function(b){!tc(this.Vg,b.target)&&!tc(this.vp,b.target)&&rs(this,m)};a.qs=function(b,c){b.hm&&z.forEach(b.hm,function(b,e){c===e?b.enter():b.Nv&&(b.h().removeAll(),b.Cc&&b.Cc.stop(),b.Nv=m)})};t.ka=function(b){var c=b.target;c&&c.name&&"set"===c.name&&this.RY(b)};
t.JN=function(b){this.aG=this.Ff;this.Ff=b.pc;this.sc=this.Ff[0]+this.Ff[1]+this.Ff[2];Q(this.en,!!this.sc);this.en.innerHTML=99<this.sc?"99+":this.sc;z.forEach(this.Ff,function(b,d){Q(this.VF[d],b);b&&(this.Ve[d]=m);this.Iv&&0<b-this.aG[d]&&this.ql(d)},this);ss(this)};
a.ss=function(b){var c=99<b.sc?"99+":b.sc,d=99<b.Nn?"99+":b.Nn;window.document.title=(c||d?"("+(b.Nn?d+" 封私信":"")+(b.sc&&b.Nn?" / ":"")+(b.sc?c+" 条消息":"")+") ":"")+window.document.title.replace(/^(\(|\uff08)(\d)*(\+)?( )?(\u5c01\u79c1\u4fe1)?( \/ )?(\d)*(\+)?( )?(\u6761\u6d88\u606f)?(\)|\uff09)( )?/g,"")};
t.cI=function(){if(dh.Ac&&this.visible)rs(this,m);else if(this.visible&&!this.sc)rs(this,m);else{rs(this,j);var b;!this.mv&&!this.sc?(b=(b=bj.get("noti7-tab"))?Number(b):0,this.hh.select(b),this.sm[b]=j):this.sc&&(b=z.$v(this.Ff,of),b=-1===b?0:b,this.hh.select(b),this.sm[b]=j);Y.V({type:"ga_click_top_nav_noti",data:{hh:this.HC,oI:+(this.sc||0)}})}ss(this)};
a.ts=function(b,c){b.sc-=b.Ff[c];Q(b.VF[c],m);0>b.sc&&(b.sc=0);Q(b.en,!!b.sc);b.en.innerHTML=b.sc},a.ps=function(b,c){var d;b.Iv?b.visible&&(b.Ve[c]?("$$used$$"!==b.Ve[c]&&(b.uC[c].innerHTML=b.Ve[c],b.Ve[c]="$$used$$"),b.Ff[c]&&(d=new V(m),d.ajax("/noti7/readall","tab="+b.types[c],"POST")),ts(b,c),b.hm&&b.hm[c].update().scrollTop(),b.sc||bj.ce("noti7-tab",c)):(b.sm[c]=j,b.ql(c))):b.Ve[c]?("$$used$$"!==b.Ve[c]&&(b.uC[c].innerHTML=b.Ve[c],b.Ve[c]="$$used$$"),b.Ff[c]&&(d=new V(m),d.ajax("/noti7/readall",
"tab="+b.types[c],"POST")),ts(b,c)):(b.sm[c]=j,b.ql(c),d=new V(m),d.ajax("/noti7/readall","tab="+b.types[c],"POST"))},a.rs=function(b,c){c?b.VA.fadeIn(50):b.VA.fadeOut(50);b.visible=c;E.enable(b.vp,"open",b.visible);c?(b.Vg.focus(),z.forEach(b.Ve,function(b,c){b||this.ql(c)},b),b.h().e(document,"click",b.vr)):b.h().Fa(document,"click",b.vr);qs(b,-1)};
t.ql=function(b){if(!this.rl[b]||!this.rl[b].ac())this.rl[b]=new V(m),this.h().e(this.rl[b],"success",function(c){this.Ay(c,b)}),this.rl[b].ajax("/noti7/stack/"+this.types[b]+"?r="+za(),"","GET")};
t.Ay=function(b,c){$(this.AP[c]).hide();var d=Ie(this.rl[c]);if(d)if(d.r)U(d.msg);else{this.mv=j;if(d=d.msg)1===c&&(d='<div class="zm-noti7-content-head-item"><span class="zg-gray-normal">这些人最近关注了你</span></div>'+d);else switch(c){case 0:d="<div class='zm-noti7-popup-empty'>暂无新消息</div>";break;case 1:d="<div class='zm-noti7-popup-empty'>有人关注你时会显示在这里</div>";break;case 2:d="<div class='zm-noti7-popup-empty'>你的答案收到赞同、感谢时会显示在这里</div>"}this.Ve[c]=d;this.sm[c]&&(ps(this,c),this.sm[c]=m)}};
t.uN=function(b){this.Nn=b=$.isNumeric(b)?b:b.pc;0!==b?(this.Ol.innerHTML=this.Vl.innerHTML=b,this.Ol.style.visibility=this.Vl.style.visibility="visible"):this.Ol.style.visibility=this.Vl.style.visibility="hidden";ss(this)};a.us=function(b){T.call(this);$.extend(this.G={},this.defaults,b||{})};y(us,T);t=us.prototype;t.defaults={trigger:"hover",yG:"open",hideFocus:m};t.vc=function(){return this.ng.length&&this.Ec.length};t.o=function(b){if(b){var c=$(b),d=c.prev();this.ng=c;this.Ec=d;this.$parent=c.parent();us.n.o.call(this,b);return this}};t.toggle=function(){this.pb()?this.close():this.open()};t.pb=function(){return this.ng.is(":visible")};
t.open=function(){this.ng.attr("aria-hidden","false").parent().addClass(this.G.yG);this.Ec.attr("aria-expanded","true")};t.close=function(){this.ng.attr("aria-hidden","true").parent().removeClass(this.G.yG);this.Ec.attr("aria-expanded","false")};a.vs=function(b,c){var d=b.ng.children().find("a"),e=d.size();c>=e?c=0:-1>=c&&(c=e-1);d=d.eq(c);b.Ec.attr("aria-activedescendant",d.attr("id"));d.focus();b.index=c};
t.lQ=function(b){var c=b.keyCode;switch(c){case 32:b.preventDefault();this.toggle();break;case 27:case 9:this.close();break;case 38:case 40:vs(this,38===c?-1:0)}};t.JQ=function(b){var c=b.keyCode;switch(c){case 27:case 9:this.close();this.Ec.focus();break;case 38:case 40:b.preventDefault(),vs(this,this.index+(38===c?-1:1))}};
t.C=function(){var b=this,c=this.G,d=this.ng,e=this.Ec,g=e.attr("id");g||(g=Kh(Jh.P()),e.attr("id",g),d.attr("aria-labelledby",g));e.attr("role")||e.attr("role","button");this.Ec.attr("aria-haspopup","true").attr("aria-activedescendant","");this.ng.children().find("a").attr("tabindex",-1).attr("id",v(function(b,c){return c||Kh(Jh.P())},this));this.ng.on("keydown",v(this.JQ,this));this.Ec.on("keydown",v(this.lQ,this));d=Tg?"click":c.trigger;if("hover"===d)this.$parent.on("hover",v(function(b){"mouseenter"===
b.type?this.open():this.close()},this));else if("click"===d)this.Ec.on("click",v(function(b){b.preventDefault();this.toggle();this.Ec.focus()},this));this.$parent.on("focusout",function(){setTimeout(function(){b.$parent.get(0).contains(document.activeElement)||b.close()})});if(c.hideFocus)this.ng.children().find("a").on("click",function(){this.blur()})};a.ws=function(){var b={warning:"您的知乎用户名 "+S.kw+' 不符合 <a href="http://www.zhihu.com/question/19791408">知乎用户名规范</a>，请您 <a href="/settings/account#rename-section">修改</a>。',pending:"您提交的用户名修改正在审核中，帐号暂时锁定。"},c=qh,d=ph,e=m;c?(U(c,4E3),e=j):d&&(b[d]&&U(b[d],4E3),e=j);return e};a.xs=function(){M.call(this)};y(xs,An);t=xs.prototype;
t.RN=function(b){var c=this.O.Gg(),d=this.O.N.Dl,e=z.slice(c,1),g=k;"topic"===c[0]?(g="/topic/"+e[1],g=ys(this,g)):"people"===c[0]?(g="/people/"+e[1],g=ys(this,g)):"question"===c[0]?(g="/question/"+e[2],g=ys(this,g)):"search_link"===c[0]&&(g="/search?q="+encodeURI(e[0])+"&type=question");g&&(Qk(["/search?q="+encodeURI(this.O.Ub)+"&type1="+("search_link"===c[0]?"autocomplete_"+c[0]:"autocomplete")]),Y.V({type:"ga_serach_select",data:{type:c[0],index:d}}),Of.set("s-q",encodeURI(this.O.Ub),-1,"/"),Of.set("s-i",
d+1,-1,"/"),Of.set("sid",Zk(),-1,"/"),Of.set("s-t","autocomplete",-1,"/"),c=window.top,this.metaKey||this.jy?c.open(g):c.location.href=g);b.stopPropagation();b.preventDefault()};
a.ys=function(b,c){if(!b.metaKey)try{bj.set("query",b.O.Ub)}catch(d){c+="?q="+encodeURIComponent(b.O.Ub)}return c},a.zs=function(b,c){if(sb&&c.length&&c.children("ul").length){var d=function(d){d=d.target;!c[0].contains(d)&&!d.contains(b[0])&&e()},e=function(){b.parent().removeClass("open");c.hide();$(document.body).off("mousedown",d)};b.click(function(g){g.preventDefault();c.is(":visible")?e():(b.parent().addClass("open"),c.show(),$(document.body).mousedown(d))}).attr("href","javascript:;");c.find(".slide-up").click(e)}};
t.B=function(){bj.get("__Q_ISNEWLYCREATED__")&&(bj.remove("__Q_ISNEWLYCREATED__"),fh&&(fh.ZE=j));var b=(new wf(location)).Kc().get("q");b?b=decodeURIComponent(b):(b=bj.get("query"),bj.remove("query"));if(S.wa())(new os).B();else $("#zh-top-inner").on("click",'a[href="/topic"]',function(){mn(new kn("top_nav_topics"),m);return m}).on("click",".js-signin-noauth",function(){mn(new kn("top_nav_sign_in"),m);return m}).on("click",".js-signup-noauth",function(){mn(new kn("top_nav_sign_up"),j)});if(this.br=
H("zh-top-search")){var c=H("zu-top-add-question");this.h().e(c,"click",on(this.wt,{wa:"top_nav_ask",rg:j}));this.vX=c;if(Og||!sb)(new us({hideFocus:j})).o($("#top-nav-profile-dropdown").get(0));else{var c=$("#top-nav-dd-topic"),d=$("#mobile-top-nav-topic-popup");zs(c,d);Vg&&$("img",d).each(function(){var b=$(this).data("2x");b&&(this.src=b)});zs($("#js-top-nav-link-profile"),$("#mobile-top-nav-profile-popup"))}this.h().e(Y,"query_string_change",this.wt);this.AE=J("icon-magnify-q",this.br);var e=
this.Bd=J("zu-top-search-input",this.br);b&&(e.value=b);xk(yk.register("/",function(){setTimeout(function(){e.focus()});Hk(e,k,500)}),{group:"导航",name:"搜索"});b=new Po;this.O=new Qo("/autocomplete",this.Bd,k,k,this.br,k,["搜索话题、问题或人..."],k,b);this.O.Km=m;this.O.eg(j);this.h().e(this.O,"select",this.RN);this.h().e(this.Bd,"keydown",function(b){13===b.keyCode&&(this.Bd.value&&"show me the money"!==this.Bd.value&&!/^ +$/.test(this.Bd.value))&&(b=(new lj(location.href.match(we)[6]||k)).get("type"),(window.parent||
window).location.href="/search?q="+encodeURIComponent(this.Bd.value)+"&type="+(b||"question"))});this.h().e(this.O,om.qh.yi,this.tu);var g=v(function(){this.O.VC=!(this.metaKey||this.jy)},this);this.h().e(document,"keydown",function(b){b.metaKey&&(this.metaKey=j,g())});this.h().e(document,"keyup",function(b){if(91===b.keyCode||224===b.keyCode)this.metaKey=m,g()});this.h().e(document,"mouseup",function(b){nd(b,1)&&(this.jy=j,g(),setTimeout(v(function(){this.jy=m;g()},this),0))});this.h().e(this.Bd,
["keyup","focus"],this.bI);this.h().e(this.Bd,"blur",this.bI);this.h().e(this.Bd,"mousedown",function(b){b.stopPropagation();return j})}};t.bI=function(){this.Bd.value?E.add(this.AE,"icon-magnify-active"):E.remove(this.AE,"icon-magnify-active")};
t.tu=function(){var b=this.O.hb,c=this.O.N.cg;if(b&&0!==b.length){if(1===b.length){var d=K("div",{className:"zu-autocomplete-empty"},"没有找到相关的结果");kc(d,c[0]);L(c[0])}z.forEach(b,function(d,g){if(0===g||d[0]!==b[g-1][0]){var h=c[g],l={people:"用户",topic:"话题",question:"问题"}[d[0]];l&&(l=K("div",{className:"zu-autocomplete-row-label"},l),kc(l,h),this.h().e(this.O,om.qh.yi,Xk))}},this)}};t.wt=function(){if(!ws()){var b=Yr.P();b.show();this.Bd.value&&this.Bd.value!==this.Bd.title&&as(b,this.Bd.value)}};a.As=function(){T.call(this)};y(As,T);a.Bs=new As;Bs.o(document);a.Cs=function(){T.call(this)};y(Cs,T);a.Ds=function(b){ya(this,b)},a.Es=function(b){this.OF=b;this.K=$("<li>");this.pu()},a.Fs=function(b){this.hL=b;this.K=$("<ul>")};Cs.prototype.C=function(){Cs.n.C.call(this);this.pS()};Cs.prototype.pS=function(){var b=this.g;$.get("/trending").done(function(c){c=$.map(c,Ds.xL);b.appendChild((new Fs(c)).Y().K.get(0));E.remove(b.parentNode,"hidden")})};
Ds.xL=function(b){var c={"0":"fullname",1:"url_token",2:"avatar",3:"id",4:"headline",5:"reason",6:"type"},b=z.reduce(b,function(b,e,g){b[c[g]]=e;return b},{});return new Ds(b)};Es.prototype.template=Sk('<a href="#" data-tip="s$r$不感兴趣" class="del"><i class="icon icon-ignore"></i></a><a data-tip="p$t$<%=url_token%>" href="/people/<%=url_token%>" class="avatar"><img src="<%=avatar%>"></a><div class="bd"><a href="/people/<%=url_token%>" data-tip="p$t$<%=url_token%>"><%=fullname%></a><div class="headline"><span title="<%-headline%>"><%-headline%></span></div><div class="ft"><span class="reason"><%=reason%></span> <span class="zg-bull">&bull;</span> <a class="zg-follow follow" href="#" id="sugg-<%=id%>">关注</a></div></div>');
Es.prototype.pu=function(){var b=this.OF,c=this.K;c.on("click",".del",function(d){d.preventDefault();$.post("/un_trending",{id:b.id,type:b.type});c.remove()}).on("click",".follow",function(c){c.preventDefault();qn(this,b.type,xa(Hk,this),k,{follow_text:"关注"})})};Es.prototype.Y=function(){this.K.html(this.template(this.OF));return this};Fs.prototype.Y=function(){var b=this.K;$.each(this.hL,function(c,d){b.append((new Es(d)).Y().K)});return this};$(function(){var b=H("zh-trendings");b&&(new Cs).o(b)});a.Is=function(){window.console||(window.console={info:ha,log:ha,warning:ha,error:ha});Bs.on(["click!","show!","visit!"],wj);Id=window;sb=dh.Ac;$.ajaxPrefilter(function(b,c){var d,e;if(c.processData!==m&&"get"!==b.type&&(e=Of.get("_xsrf")))d=c.data||{},"string"===$.type(d)?Xa(d,"_xsrf=")||(d+="&_xsrf="+e):(d._xsrf=e,d=$.param(d)),b.data=d});(new xs).B();Ni.dispatchEvent("init");$(function(){Ni.dispatchEvent("postinit")});S.wa()?(Ki.push({GU:"json",filter:function(b){(b=b.profile_result)&&$(b).css("border-top",
"1px solid #eee").appendTo(document.body)}}),dh.Ac&&($.fx.off=j),$(function(){(new Vn).B()})):$("body").addClass("no-auth");Xa(location.host,"zhihu.com")||(Cg=j);$(document.body).children("div.zu-main").attr("role",Wc.dJ);document.addEventListener&&document.addEventListener("touchstart",ha,m);$(Gs);$(Hs)},a.Hs=function(){function b(b){return{member:"people",favlist:"collection"}[b]||b}$(document).on("videobox:open",function(){W("video","click_videobox_open")});$("#js-sidebar-app-link").click(function(){var b=
$(this).hasClass("iphone")?"click_zhihu_ios_dl_link":"click_zhihu_android_dl_link";W("app-promotion",b,"sidebar_not_logged_in")});$("#zh-top-link-logo").click(function(){W("navigation","visit_home","top_logo")});$("#zh-top-link-home").click(function(){W("navigation","visit_home","top_nav_home")});$("#top-nav-dd-topic").click(function(){W("navigation","visit_topics_activities","top_nav_topic")});$("#ga_sidebar_topic_all").click(function(){W("navigation","visit_topics_activities","sidebar_topic_all")});
$(".zm-side-pinned-topics .zm-side-nav a.zm-side-nav-link").eq(0).click(function(){W("navigation","visit_topic","sidebar_topic_1")}).end().eq(1).click(function(){W("navigation","visit_topic","sidebar_topic_2")}).end().eq(2).click(function(){W("navigation","visit_topic","sidebar_topic_3")});var c=$("#zh-trendings");c.on("click",'li a[href^="/topic/"]',function(b){b=$(b.target).closest("li").index()+1;W("navigation","visit_topic","sidebar_intresting_people_"+b+"_topic")});c.on("click",'li a[href^="/people"]',
function(b){b=$(b.target).closest("li").index()+1;W("navigation","visit_people_profile","sidebar_interesting_people_"+b)});$("#zh-single-question-page .zm-tag-editor-labels a.zm-item-tag").click(function(){W("question_answer","visit_topic","question_topic")});N(Y,"ga_serach_select",function(b){"topic"===b.data.type&&W("search","visit_topic","top_search_list_"+(b.data.index+1))});var d=$(".zm-search-result-topic-wrap").on("click",'.title-container a[href^="/topic/"]',function(){W("search","visit_topic",
"search_result_card_topic_name")}).on("click",'a[href^="/topic/"] .zm-search-result-topic-avatar',function(){W("search","visit_topic","search_result_card_topic_avatar")}).on("click",".meta a.question",function(){W("search","visit_topic","search_result_card_topic_questions_count")}).on("click",".meta a.follow",function(){W("search","visit_topic_followers","search_result_card_topic_followers_count")}),e=$('.zm-search3-side-topic .zm-search3-side-topic-item .content a[href^="/topic/"]').click(function(){var b=
e.index(this)+1;W("search","visit_topic","search_result_sidebar_topics_"+b+"_name")}),g=$(".zm-search3-side-topic .zm-search3-side-topic-item .zm-item-link-avatar").click(function(){var b=g.index(this)+1;W("search","visit_topic","search_result_sidebar_topics_"+b+"_avatar")}),h=$('#zh-search3-list[data-type="topic"]').on("click",".zm-search3-item .user-info a.user-name",function(){var b=$('#zh-search3-list[data-type="topic"] .zm-search3-item .user-info a.user-name').index(this)+1;W("search","visit_topic",
"search_result_topic_list_"+b+"_name")}).on("click",".zm-search3-item .user-info .meta a.follow",function(b){b=$(b.delegateTarget).find(".zm-search3-item .user-info .meta a.follow").index(this)+1;W("search","visit_topic_followers","search_result_topic_list_"+b+"_followers_count")});h.on("click",".zm-search3-item img.user-avatar",function(b){b=$(b.delegateTarget).find(".zm-search3-item img.user-avatar").index(this)+1;W("search","visit_topic","search_result_topic_list_"+b+"_avatar")});var l=$(".zm-topic-list-container").on("click",
'.subtopic a[href^="/topic/"]',function(){W("topic","visit_topic","topic_activity_children_topic")});$(".zm-side-section-inner.child-topic").on("click",'a.zm-item-tag[href^="/topic/"]',function(){W("topic","visit_topic","topic_sidebar_children_topic")});$(".zm-topic-cat-hot").on("click",'a[href^="/topic/"]',function(){W("topic","visit_topic","topic_square_sidebar")});$(".zm-topic-cat-sub").on("click",'a[href^="/topic/"]',function(){W("topic","visit_topic","topic_square_list_item")});$('a.zm-side-nav-link[href="/topics"]').click(function(){W("navigation",
"visit_topic_square","sidebar_topic_square")});$('a.zm-side-nav-link[href="/invitation/email"]').click(function(){W("navigation","visit_invite_by_email","sidebar_invite_friend")});$("#zh-tooltip").on("click",".zh-profile-card.member .avatar-link",function(){W("navigation","visit_people_profile","hovercard_people_name")});var n=$("#zh-top-nav-live-new").on("click",'.zm-noti7-content-item[data-notigroupname="FOLLOW"] .zm-list-content-medium a[href^="/people"]',function(){W("notification","visit_people_profile",
"top_nav_noti_follower_people_name")}).on("click",'.zm-noti7-content-item[data-notigroupname="FOLLOW"] .zm-item-link-avatar',function(){W("notification","visit_people_profile","top_nav_noti_follower_people_avatar")});n.on("click",'.zm-noti7-content-item[data-notigroupname="VOTE_THANK"] a[href^="/people"]',function(){W("notification","visit_people_profile","top_nav_noti_vote_thank_people_name")});n.on("click",'.zm-noti7-content-item[data-notigroupname="INVITE"] a[href^="/people"]',function(){W("notification",
"visit_people_profile","top_nav_noti_message_invitation_people_name")}).on("click",'.zm-noti7-content-item[data-notigroupname="QUESTION_COMMENT"] a[href^="/people"]',function(){W("notification","visit_people_profile","top_nav_noti_message_qcomment_people_name")}).on("click",'.zm-noti7-content-item[data-notigroupname="ANSWER_COMMENT"] a[href^="/people"]',function(){W("notification","visit_people_profile","top_nav_noti_message_acomment_people_name")}).on("click",'.zm-noti7-content-item[data-notigroupname="ANSWER"] a[href^="/people"]',
function(){W("notification","visit_people_profile","top_nav_noti_message_new_answer_people_name")}).on("click",'.zm-noti7-content-item[data-notigroupname="QUESTION"] a[href^="/people"]',function(){W("notification","visit_people_profile","top_nav_noti_message_edit_people_name")});var q=$("#js-home-feed-list");q.on("click",'div[data-feedtype="ANSWER_VOTE_UP"] .source a[href^="/people"]',function(){W("feed","visit_people_profile","feed_answer_vote_source_people_name")});q.on("click",'div[data-feedtype="ANSWER_VOTE_UP"] >.avatar a[href^="/people"]',
function(){W("feed","visit_people_profile","feed_answer_vote_source_people_avatar")});q.on("click",'div[data-feedtype="ANSWER_VOTE_UP"] .zm-item-answer-author-info a[href^="/people"]',function(){W("feed","visit_people_profile","feed_answer_vote_author_name")});q.on("click",'div[data-feedtype="ANSWER_CREATE"] .source a[href^="/people"]',function(){W("feed","visit_people_profile","feed_answer_answer_source_people_name")});q.on("click",'div[data-feedtype="ANSWER_CREATE"] >.avatar a[href^="/people"]',
function(){W("feed","visit_people_profile","feed_answer_answer_source_people_avatar")});q.on("click",'div[data-feedtype="QUESTION_FOLLOW"] .source a[href^="/people"]',function(){W("feed","visit_people_profile","feed_question_follow_source_people_name")});q.on("click",'div[data-feedtype="QUESTION_FOLLOW"] >.avatar a[href^="/people"]',function(){W("feed","visit_people_profile","feed_question_follow_source_people_avatar")});q.on("click",'div[data-feedtype="QUESTION_CREATE"] .source a[href^="/people"]',
function(){W("feed","visit_people_profile","feed_question_ask_source_people_name")});q.on("click",'div[data-feedtype="QUESTION_CREATE"] >.avatar a[href^="/people"]',function(){W("feed","visit_people_profile","feed_question_ask_source_people_avatar")});var r=$("#zh-question-answer-wrap").on("click",'.zm-item-answer-author-wrap >a[href^="/people"]',function(){W("question_answer","visit_people_profile","question_answer_author_name")}).on("click",".zm-item-answer-author-wrap img.zm-list-avatar",function(){W("question_answer",
"visit_people_profile","question_answer_author_avatar")});r.on("click",".voters a",function(){var b=$(this).parents(".voters").find("a").index(this)+1;W("question_answer","visit_people_profile","question_answer_voters_"+b)});r.on("click",'.zm-comment-hd a[href^="/people"]',function(){W("question_answer","visit_people_profile","question_answer_comment_author_name")}).on("click",".zm-comment-list img.zm-item-img-avatar",function(){W("question_answer","visit_people_profile","question_answer_comment_author_avatar")});
$(".zh-question-followers-sidebar",'a[href^="/people"]',function(){W("question_answer","visit_people_profile","question_sidebar_followers_avatar")});N(Y,"ga_serach_select",function(b){"people"===b.data.type&&W("search","visit_people_profile","top_search_list_"+(b.data.index+1))});d.on("click",'.title-container a[href^="/people/"]',function(){W("search","visit_people_profile","search_result_card_people_name")}).on("click",'a[href^="/people/"] .zm-search-result-topic-avatar',function(){W("search","visit_people_profile",
"search_result_card_people_avatar")});var w=$('.zm-search3-side.user a[href^="/people/"]').click(function(){var b=w.index(this);W("search","visit_people_profile","search_result_sidebar_people_"+b+"_avatar")}),C=$('#zh-search3-list[data-type="people"]').on("click",".zm-search3-item .user-info a.user-name",function(b){b=$(b.delegateTarget).find(".zm-search3-item .user-info a.user-name").index(this)+1;W("search","visit_people_profile","search_result_user_list_"+b+"_people_name")}).on("click",".zm-search3-item  img.user-avatar",
function(b){b=$(b.delegateTarget).find(".zm-search3-item img.user-avatar").index(this)+1;W("search","visit_people_profile","search_result_user_list_"+b+"_people_name")});$("#zh-topic-top-answerer").on("click",'.zm-topic-side-person-item-content a[href^="/people/"]',function(){W("topic","visit_people_profile","topic_sidebar_top_answerer_people_name")}).on("click","img.zm-list-avatar",function(){W("topic","visit_people_profile","topic_sidebar_top_answerer_people_avatar")});d.on("click",'a[href^="/people"][href$="/answers"]',
function(){W("search","visit_people_answers","search_result_card_people_answers_count")});C.on("click",'a[href^="/people"][href$="/answers"]',function(b){b=$(b.delegateTarget).find('a[href^="/people"][href$="/answers"]').index(this);W("search","visit_people_answers","search_result_user_list_"+b+"_people_answers_count")});d.on("click",'a[href^="/people"][href$="/followers"]',function(){W("search","visit_people_followers","search_result_card_people_followers_count")});C.on("click",'a[href^="/people"][href$="/followers"]',
function(b){b=$(b.delegateTarget).find('a[href^="/people"][href$="/followers"]').index(this);W("search","visit_people_followers","search_result_user_list_"+b+"_people_followers_count")});n.on("click",'.zm-noti7-content-item[data-notigroupname="VOTE_THANK"] a[href^="/question"]',function(){W("notification","visit_question","top_nav_noti_vote_thank_question")});n.on("click",'.zm-noti7-content-item[data-notigroupname="INVITE"] a[href^="/question"]',function(){W("notification","visit_question","top_nav_noti_message_invitation_question")}).on("click",
'.zm-noti7-content-item[data-notigroupname="QUESTION_COMMENT"] a[href^="/question"]',function(){W("notification","visit_question","top_nav_noti_message_qcomment_question")}).on("click",'.zm-noti7-content-item[data-notigroupname="ANSWER_COMMENT"] a[href^="/question"]',function(){W("notification","visit_question","top_nav_noti_message_acomment_question")}).on("click",'.zm-noti7-content-item[data-notigroupname="ANSWER"] a[href^="/question"]',function(){W("notification","visit_question","top_nav_noti_message_new_answser_question")});
q.on("click",'div[data-feedtype="ROUNDTABLE_ADD_RELATED"] h2 a[href^="/question"]',function(){var b="q"===$(this).closest("div[data-feedtype]").data("type");W("feed","visit_question",b?"roundtable_question_add":"roundtable_answer_add")}).on("click",'div[data-feedtype="ANSWER_VOTE_UP"] h2 a[href^="/question"]',function(){W("feed","visit_question","feed_answer_vote_question")}).on("click",'div[data-feedtype="ANSWER_CREATE"] h2 a[href^="/question"]',function(){W("feed","visit_question","feed_answer_answer_question")}).on("click",
'div[data-feedtype="QUESTION_FOLLOW"] h2 a[href^="/question"]',function(){W("feed","visit_question","feed_question_follow_question")}).on("click",'div[data-feedtype="QUESTION_CREATE"] a.meta-item[href^="/question"]',function(){var b=parseInt($(this).text(),10);b?W("feed","visit_question","feed_question_follow_has_answers",b):W("feed","visit_question","feed_question_follow_has_no_answer")}).on("click",'div[data-feedtype="QUESTION_CREATE"] h2 a[href^="/question"]',function(){W("feed","visit_question",
"feed_question_ask_question")});N(Y,"ga_serach_select",function(b){"question"===b.data.type&&W("search","visit_question","top_search_list_"+(b.data.index+1))});var I=$('#zh-search3-list[data-type="question"]').on("click",'.zm-search3-item .question-title a[href^="/question"]',function(b){b=$(b.delegateTarget).find('.zm-search3-item .question-title a[href^="/question"]').index(this)+1;W("search","visit_question","search_result_all_list_"+b+"_question")}).on("click",'.zm-search3-item .question-content a[href^="/question"]',
function(b){b=$(b.delegateTarget).find(".zm-search3-item").index($(this).parents(".zm-search3-item"))+1;W("search","visit_question","search_result_all_list_"+b+"_answer")}).on("click",'.zm-search3-item .meta a.answer[href^="/question"]',function(b){b=$(b.delegateTarget).find('.zm-search3-item .meta a.answer[href^="/question"]').index(this)+1;W("search","visit_question","search_result_all_list_"+b+"_answers_count")});$("#zh-question-related-questions").on("click","a",function(b){b=$(b.delegateTarget).find("a").index(this)+
1;W("question_answer","visit_question","question_answer_sidebar_related_questions_"+b)});I.on("click",'a[href^="/question"][href$="/followers"]',function(b){b=$(b.delegateTarget).find('a[href^="/question"][href$="/followers"]').index(this)+1;W("search","visit_question_followers","search_result_all_list_"+b+"_followers_count")});$('#zh-question-followers-sidebar a[href^="/question"][href$="/followers"]').click(function(){W("question_answer","visit_question_followers","question_followers_count")});
n.on("click",'.zm-noti7-content-item[data-notigroupname="QUESTION"] a[href^="/question"]',function(){W("notification","visit_question_log","top_nav_noti_message_edit_question")});$('.zu-main-sidebar a[href^="/question"][href$="/log"]').click(function(){W("question_answer","visit_question_log","question_log")});$('div[data-feedtype="ANSWER_CREATE"] .answer-date-link').click(function(){W("feed","visit_answer","feed_answer_answer_date")});$('div[data-feedtype="ANSWER_VOTE_UP"] .answer-date-link').click(function(){W("feed",
"visit_answer","feed_answer_vote_date")});$("zh-single-question-page .answer-date-link").click(function(){W("question_answer","visit_answer","question_answer_date")});$('a.zm-side-nav-link[href="/draft"]').click(function(){var b=parseInt($(this).find(".zg-num").text()||0,10);W("navigation","visit_draft","sidebar_my_draft",b)});$('a.zm-side-nav-link[href="/collections"]').click(function(){var b=parseInt($(this).find(".zg-num").text()||0,10);W("navigation","visit_collections","sidebar_my_collections",
b)});$('a.zm-side-nav-link[href="/question/invited"]').click(function(){var b=parseInt($(this).find(".zg-num").text()||0,10);W("navigation","visit_question_invited","sidebar_question_invited",b)});$('a[href="http://creativecommons.org"]').click(function(){W("navigation","visit_cc_license")});N(Y,"ga_click_back_to_top",function(){W("navigation","click_back_to_top")});N(Y,"ga_click_collapse_answer",function(){W("navigation","click_collapse_answer")});N(Y,"ga_click_follow",function(b){if("people"===
b.data.type&&b.data.vj){var d=$(b.target);0<d.parents("#zh-top-nav-live-new").length?(b=n.find('a[name="focus"]').index(b.target)+1,W("notification","click_follow_people","top_nav_noti_follower_follow",b)):0<d.parents("#zh-tooltip").length?W("navigation","click_follow_people","hovercard_follow"):0<d.parents("#zh-trendings").length?(b=c.find("a.follow").index(b.target)+1,W("navigation","click_follow_people","sidebar_intresting_people_"+b+"_follow")):0<d.parents(".zm-search-result-topic-wrap").length?
W("search","click_follow_people","search_result_card_people_follow"):0<d.parents('#zh-search3-list[data-type="people"]').length?(b=C.find(".zm-search3-item").index(d.parents(".zm-search3-item").get(0)),W("search","click_follow_people","search_result_user_list_"+b+"_people_follow")):0<d.parents("#zh-topic-top-answerer").length?W("topic","click_follow_people","topic_sidebar_top_answerer_follow"):W("navigation","click_follow_people","other_follow")}});N(Y,"ga_click_follow",function(b){if("people"===
b.data.type&&!b.data.vj){var d=$(b.target);0<d.parents("#zh-top-nav-live-new").length?(b=n.find('a[name="focus"]').index(b.target)+1,W("notification","click_unfollow_people","top_nav_noti_follower_unfollow",b)):0<d.parents("#zh-tooltip").length?W("navigation","click_unfollow_people","hovercard_unfollow"):0<d.parents("#zh-trendings").length?(b=c.find("a.follow").index(b.target)+1,W("navigation","click_unfollow_people","sidebar_intresting_people_"+b+"_unfollow")):0<d.parents(".zm-search-result-topic-wrap").length?
W("search","click_unfollow_people","search_result_card_people_unfollow"):0<d.parents('#zh-search3-list[data-type="people"]').length?(b=C.find(".zm-search3-item").index(d.parents(".zm-search3-item").get(0))+1,W("search","click_unfollow_people","search_result_user_list_"+b+"_people_unfollow")):0<d.parents("#zh-topic-top-answerer").length&&W("topic","click_unfollow_people","topic_sidebar_top_answerer_unfollow")}});N(Y,"ga_click_follow",function(b){"question"===b.data.type&&b.data.vj&&(b=$(b.target),
0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length?W("feed","click_follow_question","feed_answer_vote_follow_question"):0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length?W("feed","click_follow_question","feed_answer_answer_follow_question"):0<b.parents('div[data-feedtype="QUESTION_FOLLOW"]').length?W("feed","click_follow_question","feed_question_follow_follow_question"):0<b.parents('div[data-feedtype="QUESTION_CREATE"]').length?W("feed","click_follow_question","feed_question_ask_follow_question"):
0<b.parents("#zh-question-side-header-wrap").length?W("question_answer","click_follow_question","question_follow_question"):0<b.parents('#zh-search3-list[data-type="question"]').length?(b=I.find(".zm-search3-item").index(b.parents(".zm-search3-item").get(0))+1,W("search","click_follow_question","search_result_all_list_"+b+"_follow_question")):0<b.parents(".zm-topic-list-container").length&&W("topic","click_follow_question","topic_activity_follow_question"))});N(Y,"ga_click_follow",function(b){"question"===
b.data.type&&!b.data.vj&&(b=$(b.target),0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length?W("feed","click_unfollow_question","feed_answer_vote_unfollow_question"):0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length?W("feed","click_unfollow_question","feed_answer_answer_unfollow_question"):0<b.parents('div[data-feedtype="QUESTION_unFOLLOW"]').length?W("feed","click_unfollow_question","feed_question_follow_unfollow_question"):0<b.parents('div[data-feedtype="QUESTION_CREATE"]').length?W("feed",
"click_unfollow_question","feed_question_ask_unfollow_question"):0<b.parents("#zh-question-side-header-wrap").length?W("question_answer","click_unfollow_question","question_unfollow_question"):0<b.parents('#zh-search3-list[data-type="question"]').length?(b=I.find(".zm-search3-item").index(b.parents(".zm-search3-item").get(0))+1,W("search","click_unfollow_question","search_result_all_list_"+b+"_unfollow_question")):0<b.parents(".zm-topic-list-container").length&&W("topic","click_unfollow_question",
"topic_activity_unfollow_question"))});N(Y,"ga_click_follow",function(b){if("topic"===b.data.type&&b.data.vj){var c=$(b.target);0<c.parents(".zm-search-result-topic-wrap").length?W("search","click_follow_topic","search_result_card_topic_follow"):0<c.parents(".zm-search3-side-topic").length?(b=$(".zm-search3-side-topic").find('a[name="focus"][id^="topic"]').index(b.target)+1,W("search","click_follow_topic","search_result_sidebar_topics_"+b+"_follow")):0<c.parents('#zh-search3-list[data-type="topic"]').length&&
(b=h.find(".zm-search3-item").index(c.parents(".zm-search3-item").get(0))+1,W("search","click_follow_topic","search_result_topic_list_"+b+"_follow"))}});N(Y,"ga_click_follow",function(b){"topic"===b.data.type&&!b.data.vj&&0<$(b.target).parents(".zm-search-result-topic-wrap").length&&W("search","click_unfollow_topic","search_result_card_topic_unfollow")});N(Y,"ga_click_follow",function(b){"favlist"===b.data.type&&(b.data.vj?W("collection","click_follow_collection","collection_follow"):W("collection",
"click_unfollow_collection","collection_follow"))});N(Y,"ga_click_top_nav_noti",function(b){0<b.data.oI?W("notification","click_top_nav_noti","top_nav_noti_alert",b.data.oI):W("notification","click_top_nav_noti","top_nav_noti_no_alert")});N(Y,"ga_click_top_nav_noti_tab",function(b){W("notification","click_top_nav_noti_tab",["top_nav_noti_tab_message","top_nav_noti_tab_follower","top_nav_noti_tab_vote"][b.data.hh])});N(Y,"ga_click_enlarge_image",function(b){b=$(b.target).parents("div[data-feedtype]").attr("data-feedtype");
"ANSWER_CREATE"===b?W("navigation","click_enlarge_image","feed_answer_answer_image"):"ANSWER_VOTE_UP"===b&&W("navigation","click_enlarge_image","feed_answer_vote_image")});N(Y,"ga_click_feed_more",function(b){b.data&&b.data.Xn?W("feed","click_feed_more","feed_more_button"):W("feed","click_feed_more","feed_more_auto_load")});N(Y,"ga_click_feed_fresh",function(b){W("feed","click_feed_fresh","feed_fresh_button",b.data.count)});I.on("click","#zh-load-more",function(){W("search","click_search_result_more",
"search_result_all_more_buttion")});C.on("click","#zh-load-more",function(){W("search","click_search_result_more","search_result_user_more_buttion")});h.on("click","#zh-load-more",function(){W("search","click_search_result_more","search_result_topic_more_buttion")});N(Y,"ga_click_topic_more",function(b){var c="activity";-1<location.href.indexOf("questions")&&(c="questions");b.data&&b.data.Xn?W("feed","click_topic_more","topic_"+c+"_more_button"):W("feed","click_topic_more","topic_"+c+"_more_auto_load")});
q.on("click",'div[data-feedtype="ANSWER_VOTE_UP"] a.inline-block[name="toggleExpanded"]',function(){W("feed","click_expand","feed_answer_vote_expand")}).on("click",'div[data-feedtype="ANSWER_VOTE_UP"] a.zm-item-vote-count[name="toggleExpanded"]',function(){W("feed","click_expand","feed_answer_vote_vote_count")}).on("click",'div[data-feedtype="ANSWER_CREATE"] a.inline-block[name="toggleExpanded"]',function(){W("feed","click_expand","feed_answer_answer_expand")}).on("click",'div[data-feedtype="ANSWER_CREATE"] a.zm-item-vote-count[name="toggleExpanded"]',
function(){W("feed","click_expand","feed_answer_answer_vote_count")});d=$("zh-single-question-page").on("click",'#zh-question-detail a.inline-block[name="expand"]',function(){W("question_answer","click_expand","question_supplement_expand")});d.on("click",'.zm-item-answer a[name="more"]',function(){W("question_answer","click_expand","question_answer_voters_more")});d.on("click","#zh-question-collapsed-switcher",function(){W("question_answer","click_expand","question_answer_folded_expand")});l.on("click",
'a.inline-block[name="expand"]',function(){W("topic","click_expand","topic_activity_expand")}).on("click",'a.zm-item-vote-count[name="expand"]',function(){W("topic","click_expand","topic_activity_vote_count")});N(Y,"ga_click_sorter_item",function(b){(b={added_time:"time",vote:"vote"}[b.data.key])&&W("question_answer","click_sort_answer","question_answer_sorting_"+b)});N(Y,"ga_click_vote_up",function(b){b=$(b.target.m());if(0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length)b="feed_answer_vote_up";
else if(0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_up";else if(0<b.parents("#zh-single-question-page").length)b="question_answer_vote_up";else return;W("vote","click_vote_up_answer",b)});N(Y,"ga_click_vote_down",function(b){b=$(b.target.m());if(0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length)b="feed_answer_vote_down";else if(0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_down";else if(0<b.parents("#zh-single-question-page").length)b=
"question_answer_vote_down";else return;W("vote","click_vote_down_answer",b)});N(Y,"ga_click_thank_answer",function(b){b=$(b.target);if(0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length)b="feed_answer_vote_thank";else if(0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_thank";else if(0<b.parents("#zh-question-answer-wrap").length)b="question_answer_thank";else if(0<b.parents(".zm-topic-list-container").length)b="topic_activity_thank";else return;W("vote","click_thank_answer",
b)});N(Y,"ga_click_share_answer_box",function(b){b=$(b.target);if(0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length)b="feed_answer_vote_share";else if(0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_share";else if(0<b.parents("#zh-question-answer-wrap").length)b="question_answer_share";else if(0<b.parents(".zm-topic-list-container").length)b="topic_activity_share";else return;W("share","click_share_answer_box",b)});N(Y,"ga_click_share_question_box",function(b){$(b.target);
var c="question_question_share",d={sina:"question_sidebar_share_weibo",mail:"question_sidebar_share_email",letter:"question_sidebar_share_message"};b.data&&b.data.type&&(c=d[b.data.type]);W("share","click_share_answer_box",c)});N(Y,"ga_click_share_answer_weibo",function(b){b=b.data.AI;if(z.contains(b,"qq")&&z.contains(b,"sina"))b="share_answer_sina_tencent_weibo";else if(z.contains(b,"qq"))b="share_answer_tencent_weibo";else if(z.contains(b,"sina"))b="share_answer_sina_weibo";else return;W("share",
"click_share_answer_weibo",b)});N(Y,"ga_click_share_answer_email",function(){W("share","click_share_answer_email")});N(Y,"ga_click_share_answer_message",function(){W("share","click_share_answer_message")});N(Y,"ga_click_share_question_weibo",function(b){b=b.data.AI;if(z.contains(b,"qq")&&z.contains(b,"sina"))b="share_question_sina_tencent_weibo";else if(z.contains(b,"qq")&&!z.contains(b,"sina"))b="share_question_tencent_weibo";else if(!z.contains(b,"qq")&&z.contains(b,"sina"))b="share_question_sina_weibo";
else return;W("share","click_share_answer_weibo",b)});N(Y,"ga_click_share_question_email",function(){W("share","click_share_question_email")});N(Y,"ga_click_share_question_message",function(){W("share","click_share_question_message")});N(Y,"ga_click_report_box",function(c){W("report","click_report_"+b(c.data.type)+"_box")});N(Y,"ga_click_report",function(c){W("report","click_report_"+b(c.data.type))});N(Y,"ga_click_collect_answer_box",function(b){b=$(b.target);if(0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length)b=
"feed_answer_vote_collect";else if(0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_collect";else if(0<b.parents("#zh-single-question-page").length)b="question_answer_collect";else if(0<b.parents(".zm-topic-list-container").length)b="topic_activity_collect";else return;W("collection","click_collect_answer_box",b)});N(Y,"ga_click_collect_answer",function(b){W("collection","click_collect_answer","collection_count",b.data.count)});N(Y,"ga_click_add_collection",function(){W("collection",
"click_add_collection","collect_answer_window_add_collection")});N(Y,"ga_click_answer_not_helpful",function(b){b=$(b.target);if(0<b.closest('div[data-feedtype="ANSWER_VOTE_UP"]').length)b="feed_answer_vote_not_helpful";else if(0<b.closest('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_not_helpful";else if(0<b.closest("#zh-question-answer-wrap").length)b="question_answer_not_helpful";else if(0<b.closest(".zm-topic-list-container").length)b="topic_activity_not_helpful";else return;
W("vote","click_answer_not_helpful",b)});q.on("click");N(Y,"ga_click_question_ignore",function(b){b=$(b.target);if(0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length)b="feed_answer_vote_ignore_question";else if(0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length)b="feed_answer_answer_ignore_question";else if(0<b.parents('div[data-feedtype="QUESTION_FOLLOW"]').length)b="feed_question_follow_ignore_question";else if(0<b.parents('div[data-feedtype="QUESTION_CREATE"]').length)b="feed_question_ask_ignore_question";
else return;W("feed","click_question_ignore",b)});N(Y,"ga_question_topic_edit_start",function(){W("edit","click_edit_question_topic","question_topic_edit_start")});N(Y,"ga_question_topic_edit_finish_changed",function(){W("edit","click_edit_question_topic","question_topic_edit_finish_changed")});N(Y,"ga_question_title_edit_start",function(){W("edit","click_edit_question_titile","question_title_edit_start")});N(Y,"ga_question_title_edit_cancel",function(){W("edit","click_edit_question_titile","question_title_edit_cancel")});
N(Y,"ga_question_title_edit_save_changed",function(){W("edit","click_edit_question_titile","question_title_edit_save_changed")});N(Y,"ga_question_title_edit_save_unchanged",function(){W("edit","click_edit_question_titile","question_title_edit_save_unchanged")});N(Y,"ga_question_supplement_edit_start",function(){W("edit","click_edit_question_supplement","question_supplement_edit_start")});N(Y,"ga_question_supplement_edit_cancel",function(){W("edit","click_edit_question_supplement","question_supplement_edit_cancel")});
N(Y,"ga_question_supplement_edit_save_changed",function(){W("edit","click_edit_question_supplement","question_supplement_edit_save_changed")});N(Y,"ga_question_supplement_edit_save_unchanged",function(){W("edit","click_edit_question_supplement","question_supplement_edit_save_unchanged")});$("#zu-top-add-question").click(function(){W("question_answer","click_add_question","top_nav_question_add_start")});$(".zm-topic-ask-in-topic").click(function(){W("question_answer","click_add_question","topic_question_add_start")});
N(Y,"ga_click_add_question",function(b){W("question_answer","click_add_question","question_add_submit_with_topics",b.data.total);W("question_answer","click_add_question","question_add_submit_with_suggested_topics",b.data.Ft);W("question_answer","click_add_question","question_add_submit_with_suggested_topics_percent",Math.round(100*(b.data.Ft/b.data.total)))});$("#zh-question-answer-form-wrap .editable").focus(function(){W("question_answer","click_add_answer","question_answer_add_start")});$("#zh-question-answer-form-wrap .submit-button").click(function(){W("question_answer",
"click_add_answer","question_answer_add_publish")});N(Y,"ga_hover_hovercard",function(b){var b=$(b.target),d,e,g;b.is('[data-tip^="p$"]')?(e="hover_people_hovercard",0<b.parents("div[data-feedtype]").length?(d="feed",0<b.parents('div[data-feedtype="ANSWER_VOTE_UP"]').length?0<b.parents(".zm-item-answer-author-wrap").length?g="feed_answer_vote_author_name":0<b.parents("div.source").length&&(g=0<b.find("img").length?"feed_answer_vote_source_people_avatar":"feed_answer_vote_author_name"):0<b.parents('div[data-feedtype="ANSWER_CREATE"]').length?
0<b.parents("div.source").length&&(g=0<b.find("img").length?"feed_answer_answer_source_people_avatar":"feed_answer_answer_source_people_name"):0<b.parents('div[data-feedtype="QUESTION_FOLLOW"]').length?0<b.parents("div.source").length&&(g=0<b.find("img").length?"feed_question_follow_source_people_avatar":"feed_question_follow_source_people_name"):0<b.parents('div[data-feedtype="QUESTION_CREATE"]').length&&0<b.parents("div.source").length&&(g=0<b.find("img").length?"feed_question_ask_source_people_avatar":
"feed_question_ask_source_people_name")):0<b.parents("#zh-trendings").length?(d="navigation",$.contains(c.find("li:nth-child(1)").get(0),b.get(0))?g="sidebar_intresting_people_1":$.contains(c.find("li:nth-child(2)").get(0),b.get(0))?g="sidebar_intresting_people_2":$.contains(c.find("li:nth-child(3)").get(0),b.get(0))&&(g="sidebar_intresting_people_3")):0<b.parents("#zh-single-question-page").length?(d="question_answer",0<b.parents(".zm-item-answer-author-wrap").length?g=0<b.find("img").length?"question_answer_author_avatar":
"question_answer_author_name":0<b.parents(".voters").length?(g=b.parents(".voters").find('a[href^="/people"]').index(b.get(0))+1,g="question_answer_voters_"+g):0<b.parents(".zm-comment-list").length&&(g=0<b.find("img").length?"question_answer_comment_author_avatar":"question_answer_comment_author_name")):0<b.parents(".zm-search3-side.user").length?(d="search",g=b.parents(".zm-search3-side.user").find('a[href^="/people"]').index(b.get(0))+1,g="search_result_sidebar_people_"+g+"_avatar"):0<b.parents("#zh-topic-top-answerer").length&&
(d="topic",g=0<b.find("img").length?"topic_sidebar_top_answerer_people_avatar":"topic_sidebar_top_answerer_people_name")):b.is('[data-tip^="t$"]')?(e="hover_topic_hovercard",0<b.parents("#zh-single-question-page").length?(d="question_answer",g="question_topic"):0<b.parents(".zm-search3-side-topic").length&&(d="search",0<b.find("img").length?(g=b.parents(".zm-search3-side-topic").find("a.zm-item-link-avatar").index(b.get(0)),g="search_result_sidebar_topics_"+g+"_avatar"):(g=b.parents(".zm-search3-side-topic").find('.content a[href^="/topic/"]').index(b.get(0))+
1,g="search_result_sidebar_topics_"+g+"_name"))):b.is('[data-tip^="c$"]')?(e="hover_column_hovercard",0<b.parents("div[data-feedtype]").length&&(d="feed",0<b.parents('div[data-feedtype="ARTICLE_VOTE_UP"]').length?g="feed_article_vote":0<b.parents('div[data-feedtype="ARTICLE_CREATE"]').length&&(g="feed_article_create"))):b.is('[data-tip^="r$"]')&&(e="hover_roundtable_hovercard",d="feed",0<b.parents('div[data-feedtype="MEMBER_FOLLOW_ROUNDTABLE"]').length?g="feed_follow_roundtable":0<b.parents('div[data-feedtype^="ROUNDTABLE"]').length&&
(g="feed_roundtable_others"));d&&(e&&g)&&W(d,e,g,i,j)});0<$(".zm-search3-card.people").length&&W("search","show_search_result_card","search_result_card_people");0<$(".zm-search3-card.topic").length&&W("search","show_search_result_card","search_result_card_topic");N(Y,"ga_click_sign_in",function(b){b.data&&b.data.label?W("sign_in","click_sign_in",b.data.label):W("sign_in","click_sign_in")});N(Y,"ga_click_sign_in_close",function(){W("sign_in","click_sign_in_close","sign_in_box_main")});N(Y,"ga_click_sign_in_weibo",
function(b){W("sign_in","click_sign_in_weibo",b.label)});N(Y,"ga_click_sign_in_qq",function(b){W("sign_in","click_sign_in_qq",b.label)});N(Y,"ga_click_sign_in_switch",function(b){"signin"===b.data?W("sign_in","click_sign_in_switch","sign_in_box_switch_to_sign_in"):"signup"===b.data&&W("sign_in","click_sign_in_switch","sign_in_box_switch_to_sign_up")});N(Y,"ga_click_sign_in_link_account",function(b){b.target?(b=$(b.target),Xa(b.parent().text(),"该邮箱已注册")?W("sign_in","click_sign_in_link_account","sign_up_error_user_exists_link_account"):
Xa(b.parent().text(),"如果你已有知乎帐号")?$(".view-warmup").is(":visible")?W("sign_in","click_sign_in_link_account","sign_in_box_splash_link_account"):$(".view-info").is(":visible")&&W("sign_in","click_sign_in_link_account","sign_in_box_sign_up_link_account"):Xa(b.text(),"返回注册")&&W("sign_in","click_sign_in_link_account","sign_in_box_link_account_back")):b.label&&W("sign_in","click_sign_in_link_account",b.label)});N(Y,"ga_click_sign_in_connect",function(b){W("sign_in","click_sign_in_weibo",b.label)});N(Y,
"ga_click_sign_in_avatar",function(){W("sign_in","click_sign_in_avatar","sign_in_avatar_upload")});N(Y,"ga_click_sign_in_previous_step",function(){W("sign_in","click_sign_in_previous_step","sign_in_box_follow_user_previous")});N(Y,"ga_click_follow_topic",function(b){0<b.data?W("sign_in","click_follow_topic","sign_in_box_follow_topic_next",b.data):0===b.data&&W("sign_in","click_follow_topic","sign_in_box_follow_topic_skip")});N(Y,"ga_click_follow_people",function(b){0<b.data?W("sign_in","click_follow_people",
"sign_in_box_follow_people_next",b.data):0===b.data&&W("sign_in","click_follow_people","sign_in_box_follow_people_skip")});N(Y,"ga_click_play_video",function(b){W("video","click_play_video",b.label)});N(Y,"ga_visit_home_video",function(){W("video","visit_home_video","home_play_video_auto")});N(Y,"ga_click_close_video",function(b){W("video","click_close_video",b.label)});N(Y,"ga_click_share_video",function(b){W("video","click_share_video",b.label)})},a.Gs=function(){(new Tn).B();(new Wo).B();var b=
$("#rq3-sidenav-link"),c=$(".tour",b);c.length&&$(".close-button",c).click(function(){var b=$(this).data("feature");$.get("/notifeature",{feature:b});c.fadeOut(100,function(){c.remove()})});b=new Un;window.console&&console.info&&console.info(b.rK+"\n\n"+b.link)},a.Js=function(b,c){c=c||3E3;if(b){var d=H("zh-message-container");d&&(d.innerHTML=b[1],E.set(d,b[0]?"zg-error-message":"zg-info-message"),Q(d,j),0<c&&$(d).delay(c).fadeOut())}},a.Ok=function(){if(window.console){var b=z.toArray(arguments);
b.unshift("["+(new Date).toLocaleTimeString()+"]:\t");console.log.apply?console.log.apply(console,b):console.log(b[0],b.slice(1).join(","))}},a.Ks=yf.P(),a.Ls=new Ve;Ls.PC=m;Ks.$x=Ls;a.Ms=fa.PLOVR_MODULE_INFO,a.Ns=void 0;for(Ns in Ms)Ks.md[Ns]=new uf(Ms[Ns],Ns);Ks.KC==Ks.oq&&(Ks.KC=k,Ks.oq.Do(v(Ks.MD,Ks))&&Gf(Ks,Hf));a.Os=fa.PLOVR_MODULE_URIS,a.Ps=void 0;for(Ps in Os)Ks.md[Ps].jg=Os[Ps];Jf("app_core");Is();a.Qs=function(b,c){return!c.length?b:Qs(b[c.shift()],c)};
$(function(){window.znonce&&window.znonce.evalScripts();var b=$('meta[name="entry"]').attr("content"),b=b&&Qs(window,b.split("."));$.isFunction(b)&&b()});Ca("ZH.main",Is);Ca("ZH.setGlobalInfoMessage",function(b){Y&&b&&Dn(b)});Ca("ZH.cm",function(b,c){Y.dispatchEvent(new hn(b,c))});Ca("ZH.m",Js);Ca("ZH.i",function(b){Y.dispatchEvent(new hn(Tl,b))});}})(zhihu);